var App=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=62)}([function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return(r="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":i(e)})(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"a",function(){return p});var i=n(1),r=n(7),a=n(16),o="luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.",s=e,u=null;function l(){var e=s.require("gl");if(!e)throw new Error(o);return e.apply(void 0,arguments)}if(!a.a)try{u=s.require("gl/wrap")}catch(e){}var c=function e(){Object(i.a)(this,e)},f=u||r.a,h=(f.WebGLRenderingContext,f.WebGLProgram,f.WebGLShader,f.WebGLBuffer),d=void 0===h?c:h;f.WebGLFramebuffer,f.WebGLRenderbuffer,f.WebGLTexture,f.WebGLUniformLocation,f.WebGLActiveInfo,f.WebGLShaderPrecisionFormat;var p=r.a.WebGL2RenderingContext||function e(){Object(i.a)(this,e)};r.a.Image}).call(this,n(57)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="undefined"!=typeof window&&window.addEventListener,a=new Map,o=function(){return r&&window.__SEER_INITIALIZED__},s=function(e,t){var n=a.get(e),i=Date.now();return!!(n&&i-n<t)||(a.set(e,i),!1)},u=function(e){return function(t,n){if(!n||"object"!==(void 0===n?"undefined":i(n))||!e.has(n))return e.add(n),Object.prototype.toString.call(n).slice(8,-1).includes("Array")?Array.prototype.slice.call(n,0,20):n}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r&&o()){var n=new Set,i=JSON.stringify(t,u(n));try{window.postMessage({type:e,payload:i,source:"seer-agent"},"*")}catch(e){if(s("seer-log",2e3))return;console.log(e)}}},c=new Map,f=function(e){if(e&&e.data&&"seer-core"===e.data.source){var t=e.data,n=t.type,i=t.payload,r=c.get(n);r&&r.forEach(function(e){return e(i)})}},h=function(){r&&!window.__SEER_LISTENER__&&(window.addEventListener("message",f),window.__SEER_LISTENER__=!0)};t.default={send:l,throttle:s,isReady:o,list:function(e,t){return l("LIST",{key:e,data:t})},listItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l("LIST_ITEM",{key:e,itemKey:t,data:n})},updateItem:function(e,t,n,i){return l("UPDATE_ITEM",{key:e,itemKey:t,path:n,data:i})},multiUpdate:function(e,t,n){return l("MULTI_UPDATE_ITEM",{key:e,itemKey:t,array:n})},deleteItem:function(e,t){return l("DELETE_ITEM",{key:e,itemKey:t})},addLog:function(e,t,n){return l("ADD_LOG",{key:e,itemKey:t,msg:n})},listeners:c,listenFor:function(e,t){if(r){if(!e||!t)throw new Error("Please provide a type and callback");c.has(e)||c.set(e,[]),window.__SEER_LISTENER__||h(),c.get(e).push(t)}},removeListener:function(e){c.forEach(function(t,n){c.set(n,t.filter(function(t){return t!==e}))})},init:h,clean:function(){r&&window.__SEER_LISTENER__&&(window.removeEventListener("message",f),delete window.__SEER_LISTENER__)}}},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},r=i.window||i.self||i.global,a=i.global||i.self||i.window}).call(this,n(17))},function(e,t,n){"use strict";e.exports=n(52)},function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"c",function(){return g});var i,r,a,o=n(4),s=n(0),u=n(11),l=(i={},Object(s.a)(i,3042,!1),Object(s.a)(i,32773,new Float32Array([0,0,0,0])),Object(s.a)(i,32777,32774),Object(s.a)(i,34877,32774),Object(s.a)(i,32969,1),Object(s.a)(i,32968,0),Object(s.a)(i,32971,1),Object(s.a)(i,32970,0),Object(s.a)(i,3106,new Float32Array([0,0,0,0])),Object(s.a)(i,3107,[!0,!0,!0,!0]),Object(s.a)(i,2884,!1),Object(s.a)(i,2885,1029),Object(s.a)(i,2929,!1),Object(s.a)(i,2931,1),Object(s.a)(i,2932,513),Object(s.a)(i,2928,new Float32Array([0,1])),Object(s.a)(i,2930,!0),Object(s.a)(i,3024,!0),Object(s.a)(i,36006,null),Object(s.a)(i,2886,2305),Object(s.a)(i,33170,4352),Object(s.a)(i,2849,1),Object(s.a)(i,32823,!1),Object(s.a)(i,32824,0),Object(s.a)(i,10752,0),Object(s.a)(i,32938,1),Object(s.a)(i,32939,!1),Object(s.a)(i,3089,!1),Object(s.a)(i,3088,new Int32Array([0,0,1024,1024])),Object(s.a)(i,2960,!1),Object(s.a)(i,2961,0),Object(s.a)(i,2968,4294967295),Object(s.a)(i,36005,4294967295),Object(s.a)(i,2962,519),Object(s.a)(i,2967,0),Object(s.a)(i,2963,4294967295),Object(s.a)(i,34816,519),Object(s.a)(i,36003,0),Object(s.a)(i,36004,4294967295),Object(s.a)(i,2964,7680),Object(s.a)(i,2965,7680),Object(s.a)(i,2966,7680),Object(s.a)(i,34817,7680),Object(s.a)(i,34818,7680),Object(s.a)(i,34819,7680),Object(s.a)(i,2978,new Int32Array([0,0,1024,1024])),Object(s.a)(i,3333,4),Object(s.a)(i,3317,4),Object(s.a)(i,37440,!1),Object(s.a)(i,37441,!1),Object(s.a)(i,37443,37444),Object(s.a)(i,35723,4352),Object(s.a)(i,36010,null),Object(s.a)(i,35977,!1),Object(s.a)(i,3330,0),Object(s.a)(i,3332,0),Object(s.a)(i,3331,0),Object(s.a)(i,3314,0),Object(s.a)(i,32878,0),Object(s.a)(i,3316,0),Object(s.a)(i,3315,0),Object(s.a)(i,32877,0),i),c=function(e,t,n){return t?e.enable(n):e.disable(n)},f=function(e,t,n){return e.hint(n,t)},h=function(e,t,n){return e.pixelStorei(n,t)},d=(r={},Object(s.a)(r,3042,c),Object(s.a)(r,32773,function(e,t){return e.blendColor.apply(e,Object(o.a)(t))}),Object(s.a)(r,32777,"blendEquation"),Object(s.a)(r,34877,"blendEquation"),Object(s.a)(r,32969,"blendFunc"),Object(s.a)(r,32968,"blendFunc"),Object(s.a)(r,32971,"blendFunc"),Object(s.a)(r,32970,"blendFunc"),Object(s.a)(r,3106,function(e,t){return e.clearColor.apply(e,Object(o.a)(t))}),Object(s.a)(r,3107,function(e,t){return e.colorMask.apply(e,Object(o.a)(t))}),Object(s.a)(r,2884,c),Object(s.a)(r,2885,function(e,t){return e.cullFace(t)}),Object(s.a)(r,2929,c),Object(s.a)(r,2931,function(e,t){return e.clearDepth(t)}),Object(s.a)(r,2932,function(e,t){return e.depthFunc(t)}),Object(s.a)(r,2928,function(e,t){return e.depthRange.apply(e,Object(o.a)(t))}),Object(s.a)(r,2930,function(e,t){return e.depthMask(t)}),Object(s.a)(r,3024,c),Object(s.a)(r,35723,f),Object(s.a)(r,36006,function(e,t){var n=Object(u.c)(e)?36009:36160;return e.bindFramebuffer(n,t)}),Object(s.a)(r,2886,function(e,t){return e.frontFace(t)}),Object(s.a)(r,33170,f),Object(s.a)(r,2849,function(e,t){return e.lineWidth(t)}),Object(s.a)(r,32823,c),Object(s.a)(r,32824,"polygonOffset"),Object(s.a)(r,10752,"polygonOffset"),Object(s.a)(r,35977,c),Object(s.a)(r,32938,"sampleCoverage"),Object(s.a)(r,32939,"sampleCoverage"),Object(s.a)(r,3089,c),Object(s.a)(r,3088,function(e,t){return e.scissor.apply(e,Object(o.a)(t))}),Object(s.a)(r,2960,c),Object(s.a)(r,2961,function(e,t){return e.clearStencil(t)}),Object(s.a)(r,2968,function(e,t){return e.stencilMaskSeparate(1028,t)}),Object(s.a)(r,36005,function(e,t){return e.stencilMaskSeparate(1029,t)}),Object(s.a)(r,2962,"stencilFuncFront"),Object(s.a)(r,2967,"stencilFuncFront"),Object(s.a)(r,2963,"stencilFuncFront"),Object(s.a)(r,34816,"stencilFuncBack"),Object(s.a)(r,36003,"stencilFuncBack"),Object(s.a)(r,36004,"stencilFuncBack"),Object(s.a)(r,2964,"stencilOpFront"),Object(s.a)(r,2965,"stencilOpFront"),Object(s.a)(r,2966,"stencilOpFront"),Object(s.a)(r,34817,"stencilOpBack"),Object(s.a)(r,34818,"stencilOpBack"),Object(s.a)(r,34819,"stencilOpBack"),Object(s.a)(r,2978,function(e,t){return e.viewport.apply(e,Object(o.a)(t))}),Object(s.a)(r,3333,h),Object(s.a)(r,3317,h),Object(s.a)(r,37440,h),Object(s.a)(r,37441,h),Object(s.a)(r,37443,h),Object(s.a)(r,3330,h),Object(s.a)(r,3332,h),Object(s.a)(r,3331,h),Object(s.a)(r,36010,function(e,t){return e.bindFramebuffer(36008,t)}),Object(s.a)(r,3314,h),Object(s.a)(r,32878,h),Object(s.a)(r,3316,h),Object(s.a)(r,3315,h),Object(s.a)(r,32877,h),r),p={blendEquation:function(e,t){return e.blendEquationSeparate(t[32777],t[34877])},blendFunc:function(e,t){return e.blendFuncSeparate(t[32969],t[32968],t[32971],t[32970])},polygonOffset:function(e,t){return e.polygonOffset(t[32824],t[10752])},sampleCoverage:function(e,t){return e.sampleCoverage(t[32938],t[32939])},stencilFuncFront:function(e,t){return e.stencilFuncSeparate(1028,t[2962],t[2967],t[2963])},stencilFuncBack:function(e,t){return e.stencilFuncSeparate(1029,t[34816],t[36003],t[36004])},stencilOpFront:function(e,t){return e.stencilOpSeparate(1028,t[2964],t[2965],t[2966])},stencilOpBack:function(e,t){return e.stencilOpSeparate(1029,t[34817],t[34818],t[34819])}},v=function(e,t){return e.isEnabled(t)},g=(a={},Object(s.a)(a,3042,v),Object(s.a)(a,2884,v),Object(s.a)(a,2929,v),Object(s.a)(a,3024,v),Object(s.a)(a,32823,v),Object(s.a)(a,32926,v),Object(s.a)(a,32928,v),Object(s.a)(a,3089,v),Object(s.a)(a,2960,v),Object(s.a)(a,35977,v),a)},function(e,t,n){"use strict";(function(e,i){n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var r=n(3),a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===i?"undefined":Object(r.a)(i))&&i},o=a.window||a.self||a.global,s=a.process||{};console}).call(this,n(17),n(20))},function(e,t,n){"use strict";function i(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}n(27);function r(e){for(var t in e)return!1;return!0}function a(e){return Boolean(e&&2===e._version)}n.d(t,"a",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return r})},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var i=n(9);n(27),n(11);function r(e,t){var n={};for(var r in t){var a=Number(r),o=i.d[r];o&&("string"==typeof o?n[o]=!0:o(e,t[r],a))}var s=e.state&&e.state.cache;if(s){var u=Object.assign({},s,t);for(var l in n){(0,i.a[l])(e,u)}}}function a(e,t){var n=i.c[t];return n?n(e,Number(t)):e.getParameter(Number(t))}function o(e,t){t=t||i.b;var n=Array.isArray(t)?t:Object.keys(t),r={},o=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value;r[f]=a(e,f)}}catch(e){s=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}return r}function s(e){r(e,Object.assign({},i.b,{}))}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return v});var i=n(1),r=n(2),a=n(30),o=n(9),s=n(12),u=n(11),l=function(e,t){var n=Array.isArray(e)||ArrayBuffer.isView(e),i=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&i&&e.length===t.length){for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}return e===t};function c(e,t){var n=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=n.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:n.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function f(e,t,n){var i=e[t].bind(e);e[t]=function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var s,u=n.apply(void 0,[e.state._updateCache].concat(a)),l=u.valueChanged,c=u.oldValue;l&&((s=e.state).log.apply(s,["gl.".concat(t)].concat(a)),i.apply(void 0,a));return c},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}var h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.copyState,a=void 0!==r&&r,u=n.log,l=void 0===u?function(){}:u;Object(i.a)(this,e),this.gl=t,this.stateStack=[],this.enable=!0,this.cache=a?Object(s.a)(t):Object.assign({},o.b),this.log=l,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(r.a)(e,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){Object(u.a)(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Object(s.c)(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,n=!1,i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var r in e)Object(u.a)(void 0!==r),l(e[r],this.cache[r])||(n=!0,t=this.cache[r],!i||r in i||(i[r]=this.cache[r]),this.cache[r]=e[r]);return{valueChanged:n,oldValue:t}}}]),e}();function d(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.enable,r=void 0===i||i,o=n.copyState;if(Object(u.a)(void 0!==o),!t.state){var s=void 0!==e?e:window;for(var l in s.polyfillContext&&s.polyfillContext(t),t.state=new h(t,{copyState:o,enable:r}),a.a){f(t,l,a.a[l])}c(t,"getParameter"),c(t,"isEnabled")}return t.state.enable=r,t}function p(e){e.state||d(e,{copyState:!1}),e.state.push()}function v(e){Object(u.a)(e.state),e.state.pop()}}).call(this,n(17))},function(e,t,n){"use strict";function i(e,t){if(!e)throw new Error(t||"webgl2-polyfill: assertion failed.")}n.d(t,"a",function(){return i})},,function(e,t,n){"use strict";(function(e){var i=n(3),r=n(33),a=!("object"===(void 0===e?"undefined":Object(i.a)(e))&&"[object process]"===String(e)&&!e.browser)||r.a;t.a=a}).call(this,n(20))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return a});var r=n(3),a=("object"!==(void 0===e?"undefined":Object(r.a)(e))||"[object process]"!==String(e)||e.browser,"undefined"!=typeof window&&window,void 0!==i?i:window);"undefined"!=typeof document&&document}).call(this,n(20),n(17))},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return a});var i="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",r="undefined"!=typeof window?window:e,a=(void 0!==e||window,"undefined"!=typeof document&&document,!1);try{var o={get passive(){a=!0}};r.addEventListener("test",o,o),r.removeEventListener("test",o,o)}catch(e){}}).call(this,n(17))},function(e,t){var n,i,r=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var u,l=[],c=!1,f=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&d())}function d(){if(!c){var e=s(h);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){e.exports=n(58)},function(e,t,n){"use strict";var i,r,a=n(0),o=n(14),s=function(e){return l(e)?void 0:0},u=(i={},Object(a.a)(i,3074,function(e){return l(e)?void 0:36064}),Object(a.a)(i,35723,function(e){return l(e)?void 0:4352}),Object(a.a)(i,35977,s),Object(a.a)(i,32937,s),Object(a.a)(i,36795,function(e,t){var n=l(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0}),Object(a.a)(i,37445,function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)}),Object(a.a)(i,37446,function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)}),Object(a.a)(i,34047,function(e,t){var n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),Object(a.a)(i,32883,s),Object(a.a)(i,35071,s),Object(a.a)(i,37447,s),Object(a.a)(i,36063,function(e,t){if(!l(e)){var n=e.getExtension("WEBGL_draw_buffers");return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),Object(a.a)(i,35379,s),Object(a.a)(i,35374,s),Object(a.a)(i,35377,s),Object(a.a)(i,34852,function(e){if(!l(e)){var t=e.getExtension("WEBGL_draw_buffers");return t?t.MAX_DRAW_BUFFERS_WEBGL:0}}),Object(a.a)(i,36203,function(e){return e.getExtension("OES_element_index")?2147483647:65535}),Object(a.a)(i,33001,function(e){return e.getExtension("OES_element_index")?16777216:65535}),Object(a.a)(i,33e3,function(e){return 16777216}),Object(a.a)(i,37157,s),Object(a.a)(i,35373,s),Object(a.a)(i,35657,s),Object(a.a)(i,36183,s),Object(a.a)(i,37137,s),Object(a.a)(i,34045,s),Object(a.a)(i,35978,s),Object(a.a)(i,35979,s),Object(a.a)(i,35968,s),Object(a.a)(i,35376,s),Object(a.a)(i,35375,s),Object(a.a)(i,35659,s),Object(a.a)(i,37154,s),Object(a.a)(i,35371,s),Object(a.a)(i,35658,s),Object(a.a)(i,35076,s),Object(a.a)(i,35077,s),Object(a.a)(i,35380,s),i);function l(e){return Boolean(e&&2===e._version)}n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h});function c(e){return Boolean(e&&2===e._version)}var f=(r={},Object(a.a)(r,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){Object(o.a)(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(a.a)(r,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){Object(o.a)(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(a.a)(r,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){Object(o.a)(!1)}}),Object(a.a)(r,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){Object(o.a)(!1)},deleteQuery:function(){Object(o.a)(!1)},beginQuery:function(){Object(o.a)(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},getQueryObject:function(){}}),r),h={readBuffer:function(e,t,n){c(e)&&t(n)},getVertexAttrib:function(e,t,n,i){var r,a=function(e,t){return{webgl2:c(e),ext:e.getExtension(t)}}(e,"ANGLE_instanced_arrays"),o=a.webgl2,s=a.ext;switch(i){case 35069:r=!!o&&void 0;break;case 35070:r=o||s?void 0:0}return void 0!==r?r:t(n,i)},getProgramParameter:function(e,t,n,i){if(!c(e))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,i)},getInternalformatParameter:function(e,t,n,i,r){if(!c(e))switch(r){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(n,i,r)},getTexParameter:function(e,t,n,i){switch(i){case 34046:var r=e.luma.extensions.EXT_texture_filter_anisotropic;i=r&&r.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,i)},getParameter:function(e,t,n){var i=u[n],r="function"==typeof i?i(e,t,n):i;return void 0!==r?r:t(n)},hint:function(e,t,n,i){return t(n,i)}}},,,,function(e,t,n){"use strict";(function(e){var t=n(14),i=n(22);function r(e,n){var r=n.extension,a=n.target,o=n.target2,s=i.b[r];Object(t.a)(s);for(var u=s.meta,l=(void 0===u?{}:u).suffix,c=void 0===l?"":l,f=e.getExtension(r),h=function(){var t=p[d],n="".concat(t).concat(c),i=null;"meta"===t||"function"==typeof e[t]||(f&&"function"==typeof f[n]?i=function(){return f[n].apply(f,arguments)}:"function"==typeof s[t]&&(i=s[t].bind(a))),i&&(a[t]=i,o[t]=i)},d=0,p=Object.keys(s);d<p.length;d++)h()}(void 0!==e?e:window).polyfillContext=function(e){return e.luma=e.luma||{},function(e){e.luma.extensions={};var t=e.getSupportedExtensions()||[],n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.luma[s]=e.getExtension(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}(e),e.luma.polyfilled||(function(e,t){var n=!0,i=!1,a=void 0;try{for(var o,s=Object.getOwnPropertyNames(t)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;"overrides"!==u&&r(e,{extension:u,target:e.luma,target2:e})}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}(e,i.b),function(e,t){var n=t.target,r=t.target2;Object.keys(i.a).forEach(function(t){if("function"==typeof i.a[t]){var a=e[t]?e[t].bind(e):function(){},o=i.a[t].bind(null,e,a);n[t]=o,r[t]=o}})}(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0),e}}).call(this,n(17))},function(e,t,n){"use strict";function i(e,t){if(e===t)return!0;var n=Array.isArray(e)||ArrayBuffer.isView(e),i=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&i&&e.length===t.length){for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}return!1}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=n(3),r=n(29);function a(){return!("object"===(void 0===e?"undefined":Object(i.a)(e))&&"[object process]"===String(e)&&!e.browser)||Object(r.a)()}}).call(this,n(20))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var i=n(3);function r(t){if("undefined"!=typeof window&&"object"===Object(i.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===Object(i.a)(e.versions)&&Boolean(e.versions.electron))return!0;var n="object"===("undefined"==typeof navigator?"undefined":Object(i.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,r=t||n;return!!(r&&r.indexOf("Electron")>=0)}}).call(this,n(20))},function(e,t,n){"use strict";var i=n(0);t.a={enable:function(e,t){return e(Object(i.a)({},t,!0))},disable:function(e,t){return e(Object(i.a)({},t,!1))},pixelStorei:function(e,t,n){return e(Object(i.a)({},t,n))},hint:function(e,t,n){return e(Object(i.a)({},t,n))},bindFramebuffer:function(e,t,n){var r;switch(t){case 36160:return e((r={},Object(i.a)(r,36006,n),Object(i.a)(r,36010,n),r));case 36009:return e(Object(i.a)({},36006,n));case 36008:return e(Object(i.a)({},36010,n));default:return null}},blendColor:function(e,t,n,r,a){return e(Object(i.a)({},32773,new Float32Array([t,n,r,a])))},blendEquation:function(e,t){var n;return e((n={},Object(i.a)(n,32777,t),Object(i.a)(n,34877,t),n))},blendEquationSeparate:function(e,t,n){var r;return e((r={},Object(i.a)(r,32777,t),Object(i.a)(r,34877,n),r))},blendFunc:function(e,t,n){var r;return e((r={},Object(i.a)(r,32969,t),Object(i.a)(r,32968,n),Object(i.a)(r,32971,t),Object(i.a)(r,32970,n),r))},blendFuncSeparate:function(e,t,n,r,a){var o;return e((o={},Object(i.a)(o,32969,t),Object(i.a)(o,32968,n),Object(i.a)(o,32971,r),Object(i.a)(o,32970,a),o))},clearColor:function(e,t,n,r,a){return e(Object(i.a)({},3106,new Float32Array([t,n,r,a])))},clearDepth:function(e,t){return e(Object(i.a)({},2931,t))},clearStencil:function(e,t){return e(Object(i.a)({},2961,t))},colorMask:function(e,t,n,r,a){return e(Object(i.a)({},3107,[t,n,r,a]))},cullFace:function(e,t){return e(Object(i.a)({},2885,t))},depthFunc:function(e,t){return e(Object(i.a)({},2932,t))},depthRange:function(e,t,n){return e(Object(i.a)({},2928,new Float32Array([t,n])))},depthMask:function(e,t){return e(Object(i.a)({},2930,t))},frontFace:function(e,t){return e(Object(i.a)({},2886,t))},lineWidth:function(e,t){return e(Object(i.a)({},2849,t))},polygonOffset:function(e,t,n){var r;return e((r={},Object(i.a)(r,32824,t),Object(i.a)(r,10752,n),r))},sampleCoverage:function(e,t,n){var r;return e((r={},Object(i.a)(r,32938,t),Object(i.a)(r,32939,n),r))},scissor:function(e,t,n,r,a){return e(Object(i.a)({},3088,new Int32Array([t,n,r,a])))},stencilMask:function(e,t){var n;return e((n={},Object(i.a)(n,2968,t),Object(i.a)(n,36005,t),n))},stencilMaskSeparate:function(e,t,n){return e(Object(i.a)({},1028===t?2968:36005,n))},stencilFunc:function(e,t,n,r){var a;return e((a={},Object(i.a)(a,2962,t),Object(i.a)(a,2967,n),Object(i.a)(a,2963,r),Object(i.a)(a,34816,t),Object(i.a)(a,36003,n),Object(i.a)(a,36004,r),a))},stencilFuncSeparate:function(e,t,n,r,a){var o;return e((o={},Object(i.a)(o,1028===t?2962:34816,n),Object(i.a)(o,1028===t?2967:36003,r),Object(i.a)(o,1028===t?2963:36004,a),o))},stencilOp:function(e,t,n,r){var a;return e((a={},Object(i.a)(a,2964,t),Object(i.a)(a,2965,n),Object(i.a)(a,2966,r),Object(i.a)(a,34817,t),Object(i.a)(a,34818,n),Object(i.a)(a,34819,r),a))},stencilOpSeparate:function(e,t,n,r,a){var o;return e((o={},Object(i.a)(o,1028===t?2964:34817,n),Object(i.a)(o,1028===t?2965:34818,r),Object(i.a)(o,1028===t?2966:34819,a),o))},viewport:function(e,t,n,r,a){return e(Object(i.a)({},2978,new Int32Array([t,n,r,a])))}}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=o(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))r.call(n,c)&&(u[c]=n[c]);if(i){s=i(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(53)},function(e,t,n){"use strict";(function(e){var i=n(3);t.a="undefined"!=typeof window&&"object"===Object(i.a)(window.process)&&"renderer"===window.process.type||!(void 0===e||"object"!==Object(i.a)(e.versions)||!Boolean(e.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":Object(i.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}).call(this,n(20))},function(e,t,n){"use strict";function i(e,t,n){n=n||2;var i,s,u,l,c,d,v,g=t&&t.length,m=g?t[0]*n:e.length,y=r(e,0,m,n,!0),b=[];if(!y||y.next===y.prev)return b;if(g&&(y=function(e,t,n,i){var o,s,u,l,c,d=[];for(o=0,s=t.length;o<s;o++)u=t[o]*i,l=o<s-1?t[o+1]*i:e.length,(c=r(e,u,l,i,!1))===c.next&&(c.steiner=!0),d.push(p(c));for(d.sort(f),o=0;o<d.length;o++)h(d[o],n),n=a(n,n.next);return n}(e,t,y,n)),e.length>80*n){i=u=e[0],s=l=e[1];for(var _=n;_<m;_+=n)(c=e[_])<i&&(i=c),(d=e[_+1])<s&&(s=d),c>u&&(u=c),d>l&&(l=d);v=0!==(v=Math.max(u-i,l-s))?1/v:0}return o(y,b,n,i,s,v),b}function r(e,t,n,i,r){var a,o;if(r===O(e,t,n,i)>0)for(a=t;a<n;a+=i)o=x(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=x(a,e[a],e[a+1],o);return o&&y(o,o.next)&&(k(o),o=o.next),o}function a(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!y(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{if(k(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function o(e,t,n,i,r,f,h){if(e){!h&&f&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=d(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,o,s,u,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<l&&(s++,i=i.nextZ);t++);for(u=l;s>0||u>0&&i;)0!==s&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,u--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,l*=2}while(o>1)}(r)}(e,i,r,f);for(var p,v,g=e;e.prev!==e.next;)if(p=e.prev,v=e.next,f?u(e,i,r,f):s(e))t.push(p.i/n),t.push(e.i/n),t.push(v.i/n),k(e),e=v.next,g=v.next;else if((e=v)===g){h?1===h?o(e=l(e,t,n),t,n,i,r,f,2):2===h&&c(e,t,n,i,r,f):o(a(e),t,n,i,r,f,1);break}}}function s(e){var t=e.prev,n=e,i=e.next;if(m(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(v(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&m(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function u(e,t,n,i){var r=e.prev,a=e,o=e.next;if(m(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,u=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,l=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,c=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,f=d(s,u,t,n,i),h=d(l,c,t,n,i),p=e.prevZ,g=e.nextZ;p&&p.z>=f&&g&&g.z<=h;){if(p!==e.prev&&p!==e.next&&v(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,g!==e.prev&&g!==e.next&&v(r.x,r.y,a.x,a.y,o.x,o.y,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&v(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;g&&g.z<=h;){if(g!==e.prev&&g!==e.next&&v(r.x,r.y,a.x,a.y,o.x,o.y,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function l(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!y(r,a)&&b(r,i,i.next,a)&&_(r,a)&&_(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),k(i),k(i.next),i=e=a),i=i.next}while(i!==e);return i}function c(e,t,n,i,r,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&g(u,l)){var c=w(u,l);return u=a(u,u.next),c=a(c,c.next),o(u,t,n,i,r,s),void o(c,t,n,i,r,s)}l=l.next}u=u.next}while(u!==e)}function f(e,t){return e.x-t.x}function h(e,t){if(t=function(e,t){var n,i=t,r=e.x,a=e.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===o)return n.prev;var u,l=n,c=n.x,f=n.y,h=1/0;i=n.next;for(;i!==l;)r>=i.x&&i.x>=c&&r!==i.x&&v(a<f?r:o,a,c,f,a<f?o:r,a,i.x,i.y)&&((u=Math.abs(a-i.y)/(r-i.x))<h||u===h&&i.x>n.x)&&_(i,e)&&(n=i,h=u),i=i.next;return n}(e,t)){var n=w(t,e);a(n,n.next)}}function d(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function v(e,t,n,i,r,a,o,s){return(r-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function g(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&b(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&_(e,t)&&_(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)}function m(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function y(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,n,i){return!!(y(e,t)&&y(n,i)||y(e,i)&&y(n,t))||m(e,t,n)>0!=m(e,t,i)>0&&m(n,i,e)>0!=m(n,i,t)>0}function _(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function w(e,t){var n=new P(e.i,e.x,e.y),i=new P(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function x(e,t,n,i){var r=new P(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function k(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function P(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}e.exports=i,e.exports.default=i,i.deviation=function(e,t,n,i){var r=t&&t.length,a=r?t[0]*n:e.length,o=Math.abs(O(e,0,a,n));if(r)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;o-=Math.abs(O(e,l,c,n))}var f=0;for(s=0;s<i.length;s+=3){var h=i[s]*n,d=i[s+1]*n,p=i[s+2]*n;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},i.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,r=0;r<e.length;r++){for(var a=0;a<e[r].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[r][a][o]);r>0&&(i+=e[r-1].length,n.holes.push(i))}return n}},function(e,t,n){e.exports=n(59)()},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";
/** @license React v16.8.6
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(31),r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,f=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);!function(e,t,n,i,r,a,o,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,a,o,s],l=0;(e=Error(t.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function w(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||b}function x(){}function k(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||b}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&y("85"),this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=w.prototype;var P=k.prototype=new x;P.constructor=k,i(P,w.prototype),P.isPureReactComponent=!0;var O={current:null},E={current:null},T=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,n){var i=void 0,r={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)T.call(t,i)&&!S.hasOwnProperty(i)&&(r[i]=t[i]);var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===r[i]&&(r[i]=u[i]);return{$$typeof:a,type:e,key:o,ref:s,props:r,_owner:E.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var A=/\/+/g,L=[];function M(e,t,n,i){if(L.length){var r=L.pop();return r.result=e,r.keyPrefix=t,r.func=n,r.context=i,r.count=0,r}return{result:e,keyPrefix:t,func:n,context:i,count:0}}function F(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>L.length&&L.push(e)}function I(e,t,n){return null==e?0:function e(t,n,i,r){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case a:case o:u=!0}}if(u)return i(r,t,""===n?"."+R(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var l=0;l<t.length;l++){var c=n+R(s=t[l],l);u+=e(s,c,i,r)}else if(c=null===t||"object"!=typeof t?null:"function"==typeof(c=m&&t[m]||t["@@iterator"])?c:null,"function"==typeof c)for(t=c.call(t),l=0;!(s=t.next()).done;)u+=e(s=s.value,c=n+R(s,l++),i,r);else"object"===s&&y("31","[object Object]"==(i=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":i,"");return u}(e,"",t,n)}function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function N(e,t){e.func.call(e.context,t,e.count++)}function D(e,t,n){var i=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?B(e,i,n,function(e){return e}):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),i.push(e))}function B(e,t,n,i,r){var a="";null!=n&&(a=(""+n).replace(A,"$&/")+"/"),I(e,D,t=M(t,a,i,r)),F(t)}function z(){var e=O.current;return null===e&&y("321"),e}var U={Children:{map:function(e,t,n){if(null==e)return e;var i=[];return B(e,i,null,t,n),i},forEach:function(e,t,n){if(null==e)return e;I(e,N,t=M(null,null,t,n)),F(t)},count:function(e){return I(e,function(){return null},null)},toArray:function(e){var t=[];return B(e,t,null,function(e){return e}),t},only:function(e){return C(e)||y("143"),e}},createRef:function(){return{current:null}},Component:w,PureComponent:k,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return z().useCallback(e,t)},useContext:function(e,t){return z().useContext(e,t)},useEffect:function(e,t){return z().useEffect(e,t)},useImperativeHandle:function(e,t,n){return z().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return z().useLayoutEffect(e,t)},useMemo:function(e,t){return z().useMemo(e,t)},useReducer:function(e,t,n){return z().useReducer(e,t,n)},useRef:function(e){return z().useRef(e)},useState:function(e){return z().useState(e)},Fragment:s,StrictMode:u,Suspense:p,createElement:j,cloneElement:function(e,t,n){null==e&&y("267",e);var r=void 0,o=i({},e.props),s=e.key,u=e.ref,l=e._owner;if(null!=t){void 0!==t.ref&&(u=t.ref,l=E.current),void 0!==t.key&&(s=""+t.key);var c=void 0;for(r in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)T.call(t,r)&&!S.hasOwnProperty(r)&&(o[r]=void 0===t[r]&&void 0!==c?c[r]:t[r])}if(1===(r=arguments.length-2))o.children=n;else if(1<r){c=Array(r);for(var f=0;f<r;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:a,type:e.type,key:s,ref:u,props:o,_owner:l}},createFactory:function(e){var t=j.bind(null,e);return t.type=e,t},isValidElement:C,version:"16.8.6",unstable_ConcurrentMode:h,unstable_Profiler:l,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:O,ReactCurrentOwner:E,assign:i}},V={default:U},G=V&&U||V;e.exports=G.default||G},function(e,t,n){"use strict";
/** @license React v16.8.6
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(8),r=n(31),a=n(54);function o(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);!function(e,t,n,i,r,a,o,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,a,o,s],l=0;(e=Error(t.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}i||o("227");var s=!1,u=null,l=!1,c=null,f={onError:function(e){s=!0,u=e}};function h(e,t,n,i,r,a,o,l,c){s=!1,u=null,function(e,t,n,i,r,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}.apply(f,arguments)}var d=null,p={};function v(){if(d)for(var e in p){var t=p[e],n=d.indexOf(e);if(-1<n||o("96",e),!m[n])for(var i in t.extractEvents||o("97",e),m[n]=t,n=t.eventTypes){var r=void 0,a=n[i],s=t,u=i;y.hasOwnProperty(u)&&o("99",u),y[u]=a;var l=a.phasedRegistrationNames;if(l){for(r in l)l.hasOwnProperty(r)&&g(l[r],s,u);r=!0}else a.registrationName?(g(a.registrationName,s,u),r=!0):r=!1;r||o("98",i,e)}}}function g(e,t,n){b[e]&&o("100",e),b[e]=t,_[e]=t.eventTypes[n].dependencies}var m=[],y={},b={},_={},w=null,x=null,k=null;function P(e,t,n){var i=e.type||"unknown-event";e.currentTarget=k(n),function(e,t,n,i,r,a,f,d,p){if(h.apply(this,arguments),s){if(s){var v=u;s=!1,u=null}else o("198"),v=void 0;l||(l=!0,c=v)}}(i,t,void 0,e),e.currentTarget=null}function O(e,t){return null==t&&o("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function E(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var T=null;function S(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var i=0;i<t.length&&!e.isPropagationStopped();i++)P(e,t[i],n[i]);else t&&P(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var j={injectEventPluginOrder:function(e){d&&o("101"),d=Array.prototype.slice.call(e),v()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];p.hasOwnProperty(t)&&p[t]===i||(p[t]&&o("102",t),p[t]=i,n=!0)}n&&v()}};function C(e,t){var n=e.stateNode;if(!n)return null;var i=w(n);if(!i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&o("231",t,typeof n),n)}function A(e){if(null!==e&&(T=O(T,e)),e=T,T=null,e&&(E(e,S),T&&o("95"),l))throw e=c,l=!1,c=null,e}var L=Math.random().toString(36).slice(2),M="__reactInternalInstance$"+L,F="__reactEventHandlers$"+L;function I(e){if(e[M])return e[M];for(;!e[M];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[M]).tag||6===e.tag?e:null}function R(e){return!(e=e[M])||5!==e.tag&&6!==e.tag?null:e}function N(e){if(5===e.tag||6===e.tag)return e.stateNode;o("33")}function D(e){return e[F]||null}function B(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function z(e,t,n){(t=C(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=O(n._dispatchListeners,t),n._dispatchInstances=O(n._dispatchInstances,e))}function U(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=B(t);for(t=n.length;0<t--;)z(n[t],"captured",e);for(t=0;t<n.length;t++)z(n[t],"bubbled",e)}}function V(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=C(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=O(n._dispatchListeners,t),n._dispatchInstances=O(n._dispatchInstances,e))}function G(e){e&&e.dispatchConfig.registrationName&&V(e._targetInst,null,e)}function W(e){E(e,U)}var H=!("undefined"==typeof window||!window.document||!window.document.createElement);function X(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var q={animationend:X("Animation","AnimationEnd"),animationiteration:X("Animation","AnimationIteration"),animationstart:X("Animation","AnimationStart"),transitionend:X("Transition","TransitionEnd")},Y={},Z={};function Q(e){if(Y[e])return Y[e];if(!q[e])return e;var t,n=q[e];for(t in n)if(n.hasOwnProperty(t)&&t in Z)return Y[e]=n[t];return e}H&&(Z=document.createElement("div").style,"AnimationEvent"in window||(delete q.animationend.animation,delete q.animationiteration.animation,delete q.animationstart.animation),"TransitionEvent"in window||delete q.transitionend.transition);var K=Q("animationend"),$=Q("animationiteration"),J=Q("animationstart"),ee=Q("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ne=null,ie=null,re=null;function ae(){if(re)return re;var e,t,n=ie,i=n.length,r="value"in ne?ne.value:ne.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return re=r.slice(e,1<t?1-t:void 0)}function oe(){return!0}function se(){return!1}function ue(e,t,n,i){for(var r in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?oe:se,this.isPropagationStopped=se,this}function le(e,t,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,n,i),r}return new this(e,t,n,i)}function ce(e){e instanceof this||o("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function fe(e){e.eventPool=[],e.getPooled=le,e.release=ce}r(ue.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=oe)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=oe)},persist:function(){this.isPersistent=oe},isPersistent:se,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=se,this._dispatchInstances=this._dispatchListeners=null}}),ue.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ue.extend=function(e){function t(){}function n(){return i.apply(this,arguments)}var i=this;t.prototype=i.prototype;var a=new t;return r(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=r({},i.Interface,e),n.extend=i.extend,fe(n),n},fe(ue);var he=ue.extend({data:null}),de=ue.extend({data:null}),pe=[9,13,27,32],ve=H&&"CompositionEvent"in window,ge=null;H&&"documentMode"in document&&(ge=document.documentMode);var me=H&&"TextEvent"in window&&!ge,ye=H&&(!ve||ge&&8<ge&&11>=ge),be=String.fromCharCode(32),_e={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},we=!1;function xe(e,t){switch(e){case"keyup":return-1!==pe.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ke(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Pe=!1;var Oe={eventTypes:_e,extractEvents:function(e,t,n,i){var r=void 0,a=void 0;if(ve)e:{switch(e){case"compositionstart":r=_e.compositionStart;break e;case"compositionend":r=_e.compositionEnd;break e;case"compositionupdate":r=_e.compositionUpdate;break e}r=void 0}else Pe?xe(e,n)&&(r=_e.compositionEnd):"keydown"===e&&229===n.keyCode&&(r=_e.compositionStart);return r?(ye&&"ko"!==n.locale&&(Pe||r!==_e.compositionStart?r===_e.compositionEnd&&Pe&&(a=ae()):(ie="value"in(ne=i)?ne.value:ne.textContent,Pe=!0)),r=he.getPooled(r,t,n,i),a?r.data=a:null!==(a=ke(n))&&(r.data=a),W(r),a=r):a=null,(e=me?function(e,t){switch(e){case"compositionend":return ke(t);case"keypress":return 32!==t.which?null:(we=!0,be);case"textInput":return(e=t.data)===be&&we?null:e;default:return null}}(e,n):function(e,t){if(Pe)return"compositionend"===e||!ve&&xe(e,t)?(e=ae(),re=ie=ne=null,Pe=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ye&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=de.getPooled(_e.beforeInput,t,n,i)).data=e,W(t)):t=null,null===a?t:null===t?a:[a,t]}},Ee=null,Te=null,Se=null;function je(e){if(e=x(e)){"function"!=typeof Ee&&o("280");var t=w(e.stateNode);Ee(e.stateNode,e.type,t)}}function Ce(e){Te?Se?Se.push(e):Se=[e]:Te=e}function Ae(){if(Te){var e=Te,t=Se;if(Se=Te=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Le(e,t){return e(t)}function Me(e,t,n){return e(t,n)}function Fe(){}var Ie=!1;function Re(e,t){if(Ie)return e(t);Ie=!0;try{return Le(e,t)}finally{Ie=!1,(null!==Te||null!==Se)&&(Fe(),Ae())}}var Ne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function De(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ne[e.type]:"textarea"===t}function Be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ze(e){if(!H)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Ue(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ve(e){e._valueTracker||(e._valueTracker=function(e){var t=Ue(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ge(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Ue(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}var We=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;We.hasOwnProperty("ReactCurrentDispatcher")||(We.ReactCurrentDispatcher={current:null});var He=/^(.*)[\\\/]/,Xe="function"==typeof Symbol&&Symbol.for,qe=Xe?Symbol.for("react.element"):60103,Ye=Xe?Symbol.for("react.portal"):60106,Ze=Xe?Symbol.for("react.fragment"):60107,Qe=Xe?Symbol.for("react.strict_mode"):60108,Ke=Xe?Symbol.for("react.profiler"):60114,$e=Xe?Symbol.for("react.provider"):60109,Je=Xe?Symbol.for("react.context"):60110,et=Xe?Symbol.for("react.concurrent_mode"):60111,tt=Xe?Symbol.for("react.forward_ref"):60112,nt=Xe?Symbol.for("react.suspense"):60113,it=Xe?Symbol.for("react.memo"):60115,rt=Xe?Symbol.for("react.lazy"):60116,at="function"==typeof Symbol&&Symbol.iterator;function ot(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=at&&e[at]||e["@@iterator"])?e:null}function st(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case et:return"ConcurrentMode";case Ze:return"Fragment";case Ye:return"Portal";case Ke:return"Profiler";case Qe:return"StrictMode";case nt:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case Je:return"Context.Consumer";case $e:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case it:return st(e.type);case rt:if(e=1===e._status?e._result:null)return st(e)}return null}function ut(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var i=e._debugOwner,r=e._debugSource,a=st(e.type);n=null,i&&(n=st(i.type)),i=a,a="",r?a=" (at "+r.fileName.replace(He,"")+":"+r.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(i||"Unknown")+a}t+=n,e=e.return}while(e);return t}var lt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ct=Object.prototype.hasOwnProperty,ft={},ht={};function dt(e,t,n,i,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pt[e]=new dt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pt[t]=new dt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){pt[e]=new dt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pt[e]=new dt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pt[e]=new dt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){pt[e]=new dt(e,3,!0,e,null)}),["capture","download"].forEach(function(e){pt[e]=new dt(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){pt[e]=new dt(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){pt[e]=new dt(e,5,!1,e.toLowerCase(),null)});var vt=/[\-:]([a-z])/g;function gt(e){return e[1].toUpperCase()}function mt(e,t,n,i){var r=pt.hasOwnProperty(t)?pt[t]:null;(null!==r?0===r.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,i){if(null==t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!ct.call(ht,e)||!ct.call(ft,e)&&(lt.test(e)?ht[e]=!0:(ft[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}function yt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function bt(e,t){var n=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function _t(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=yt(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function wt(e,t){null!=(t=t.checked)&&mt(e,"checked",t,!1)}function xt(e,t){wt(e,t);var n=yt(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?Pt(e,t.type,n):t.hasOwnProperty("defaultValue")&&Pt(e,t.type,yt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function kt(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Pt(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vt,gt);pt[t]=new dt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vt,gt);pt[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vt,gt);pt[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){pt[e]=new dt(e,1,!1,e.toLowerCase(),null)});var Ot={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Et(e,t,n){return(e=ue.getPooled(Ot.change,e,t,n)).type="change",Ce(n),W(e),e}var Tt=null,St=null;function jt(e){A(e)}function Ct(e){if(Ge(N(e)))return e}function At(e,t){if("change"===e)return t}var Lt=!1;function Mt(){Tt&&(Tt.detachEvent("onpropertychange",Ft),St=Tt=null)}function Ft(e){"value"===e.propertyName&&Ct(St)&&Re(jt,e=Et(St,e,Be(e)))}function It(e,t,n){"focus"===e?(Mt(),St=n,(Tt=t).attachEvent("onpropertychange",Ft)):"blur"===e&&Mt()}function Rt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ct(St)}function Nt(e,t){if("click"===e)return Ct(t)}function Dt(e,t){if("input"===e||"change"===e)return Ct(t)}H&&(Lt=ze("input")&&(!document.documentMode||9<document.documentMode));var Bt={eventTypes:Ot,_isInputEventSupported:Lt,extractEvents:function(e,t,n,i){var r=t?N(t):window,a=void 0,o=void 0,s=r.nodeName&&r.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===r.type?a=At:De(r)?Lt?a=Dt:(a=Rt,o=It):(s=r.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(a=Nt),a&&(a=a(e,t)))return Et(a,n,i);o&&o(e,r,t),"blur"===e&&(e=r._wrapperState)&&e.controlled&&"number"===r.type&&Pt(r,"number",r.value)}},zt=ue.extend({view:null,detail:null}),Ut={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ut[e])&&!!t[e]}function Gt(){return Vt}var Wt=0,Ht=0,Xt=!1,qt=!1,Yt=zt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Gt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Wt;return Wt=e.screenX,Xt?"mousemove"===e.type?e.screenX-t:0:(Xt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ht;return Ht=e.screenY,qt?"mousemove"===e.type?e.screenY-t:0:(qt=!0,0)}}),Zt=Yt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Qt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Kt={eventTypes:Qt,extractEvents:function(e,t,n,i){var r="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(r&&(n.relatedTarget||n.fromElement)||!a&&!r)return null;if(r=i.window===i?i:(r=i.ownerDocument)?r.defaultView||r.parentWindow:window,a?(a=t,t=(t=n.relatedTarget||n.toElement)?I(t):null):a=null,a===t)return null;var o=void 0,s=void 0,u=void 0,l=void 0;"mouseout"===e||"mouseover"===e?(o=Yt,s=Qt.mouseLeave,u=Qt.mouseEnter,l="mouse"):"pointerout"!==e&&"pointerover"!==e||(o=Zt,s=Qt.pointerLeave,u=Qt.pointerEnter,l="pointer");var c=null==a?r:N(a);if(r=null==t?r:N(t),(e=o.getPooled(s,a,n,i)).type=l+"leave",e.target=c,e.relatedTarget=r,(n=o.getPooled(u,t,n,i)).type=l+"enter",n.target=r,n.relatedTarget=c,i=t,a&&i)e:{for(r=i,l=0,o=t=a;o;o=B(o))l++;for(o=0,u=r;u;u=B(u))o++;for(;0<l-o;)t=B(t),l--;for(;0<o-l;)r=B(r),o--;for(;l--;){if(t===r||t===r.alternate)break e;t=B(t),r=B(r)}t=null}else t=null;for(r=t,t=[];a&&a!==r&&(null===(l=a.alternate)||l!==r);)t.push(a),a=B(a);for(a=[];i&&i!==r&&(null===(l=i.alternate)||l!==r);)a.push(i),i=B(i);for(i=0;i<t.length;i++)V(t[i],"bubbled",e);for(i=a.length;0<i--;)V(a[i],"captured",n);return[e,n]}};function $t(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var Jt=Object.prototype.hasOwnProperty;function en(e,t){if($t(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!Jt.call(t,n[i])||!$t(e[n[i]],t[n[i]]))return!1;return!0}function tn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function nn(e){2!==tn(e)&&o("188")}function rn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tn(e))&&o("188"),1===t?null:e;for(var n=e,i=t;;){var r=n.return,a=r?r.alternate:null;if(!r||!a)break;if(r.child===a.child){for(var s=r.child;s;){if(s===n)return nn(r),e;if(s===i)return nn(r),t;s=s.sibling}o("188")}if(n.return!==i.return)n=r,i=a;else{s=!1;for(var u=r.child;u;){if(u===n){s=!0,n=r,i=a;break}if(u===i){s=!0,i=r,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,i=r;break}if(u===i){s=!0,i=a,n=r;break}u=u.sibling}s||o("189")}}n.alternate!==i&&o("190")}return 3!==n.tag&&o("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var an=ue.extend({animationName:null,elapsedTime:null,pseudoElement:null}),on=ue.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sn=zt.extend({relatedTarget:null});function un(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn=zt.extend({key:function(e){if(e.key){var t=ln[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=un(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Gt,charCode:function(e){return"keypress"===e.type?un(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?un(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),hn=Yt.extend({dataTransfer:null}),dn=zt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Gt}),pn=ue.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vn=Yt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),gn=[["abort","abort"],[K,"animationEnd"],[$,"animationIteration"],[J,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],mn={},yn={};function bn(e,t){var n=e[0],i="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:i,captured:i+"Capture"},dependencies:[n],isInteractive:t},mn[e]=t,yn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){bn(e,!0)}),gn.forEach(function(e){bn(e,!1)});var _n={eventTypes:mn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=yn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,i){var r=yn[e];if(!r)return null;switch(e){case"keypress":if(0===un(n))return null;case"keydown":case"keyup":e=fn;break;case"blur":case"focus":e=sn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Yt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=dn;break;case K:case $:case J:e=an;break;case ee:e=pn;break;case"scroll":e=zt;break;case"wheel":e=vn;break;case"copy":case"cut":case"paste":e=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Zt;break;default:e=ue}return W(t=e.getPooled(r,t,n,i)),t}},wn=_n.isInteractiveTopLevelEventType,xn=[];function kn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var i;for(i=n;i.return;)i=i.return;if(!(i=3!==i.tag?null:i.stateNode.containerInfo))break;e.ancestors.push(n),n=I(i)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var r=Be(e.nativeEvent);i=e.topLevelType;for(var a=e.nativeEvent,o=null,s=0;s<m.length;s++){var u=m[s];u&&(u=u.extractEvents(i,t,a,r))&&(o=O(o,u))}A(o)}}var Pn=!0;function On(e,t){if(!t)return null;var n=(wn(e)?Tn:Sn).bind(null,e);t.addEventListener(e,n,!1)}function En(e,t){if(!t)return null;var n=(wn(e)?Tn:Sn).bind(null,e);t.addEventListener(e,n,!0)}function Tn(e,t){Me(Sn,e,t)}function Sn(e,t){if(Pn){var n=Be(t);if(null===(n=I(n))||"number"!=typeof n.tag||2===tn(n)||(n=null),xn.length){var i=xn.pop();i.topLevelType=e,i.nativeEvent=t,i.targetInst=n,e=i}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Re(kn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>xn.length&&xn.push(e)}}}var jn={},Cn=0,An="_reactListenersID"+(""+Math.random()).slice(2);function Ln(e){return Object.prototype.hasOwnProperty.call(e,An)||(e[An]=Cn++,jn[e[An]]={}),jn[e[An]]}function Mn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Fn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function In(e,t){var n,i=Fn(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Fn(i)}}function Rn(){for(var e=window,t=Mn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Mn((e=t.contentWindow).document)}return t}function Nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Dn(e){var t=Rn(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==i&&Nn(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=void 0===i.end?a:Math.min(i.end,r),!e.extend&&a>i&&(r=i,i=a,a=r),r=In(n,a);var o=In(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bn=H&&"documentMode"in document&&11>=document.documentMode,zn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Un=null,Vn=null,Gn=null,Wn=!1;function Hn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Wn||null==Un||Un!==Mn(n)?null:("selectionStart"in(n=Un)&&Nn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Gn&&en(Gn,n)?null:(Gn=n,(e=ue.getPooled(zn.select,Vn,e,t)).type="select",e.target=Un,W(e),e))}var Xn={eventTypes:zn,extractEvents:function(e,t,n,i){var r,a=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;if(!(r=!a)){e:{a=Ln(a),r=_.onSelect;for(var o=0;o<r.length;o++){var s=r[o];if(!a.hasOwnProperty(s)||!a[s]){a=!1;break e}}a=!0}r=!a}if(r)return null;switch(a=t?N(t):window,e){case"focus":(De(a)||"true"===a.contentEditable)&&(Un=a,Vn=t,Gn=null);break;case"blur":Gn=Vn=Un=null;break;case"mousedown":Wn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wn=!1,Hn(n,i);case"selectionchange":if(Bn)break;case"keydown":case"keyup":return Hn(n,i)}return null}};function qn(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Yn(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+yt(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Zn(e,t){return null!=t.dangerouslySetInnerHTML&&o("91"),r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&o("92"),Array.isArray(t)&&(1>=t.length||o("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:yt(n)}}function Kn(e,t){var n=yt(t.value),i=yt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function $n(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}j.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=D,x=R,k=N,j.injectEventPluginsByName({SimpleEventPlugin:_n,EnterLeaveEventPlugin:Kt,ChangeEventPlugin:Bt,SelectEventPlugin:Xn,BeforeInputEventPlugin:Oe});var Jn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function ei(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ti(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ei(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ni=void 0,ii=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==Jn.svg||"innerHTML"in e)e.innerHTML=t;else{for((ni=ni||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=ni.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ri(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ai={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oi=["Webkit","ms","Moz","O"];function si(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ai.hasOwnProperty(e)&&ai[e]?(""+t).trim():t+"px"}function ui(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=si(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(ai).forEach(function(e){oi.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ai[t]=ai[e]})});var li=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ci(e,t){t&&(li[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&o("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&o("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||o("61")),null!=t.style&&"object"!=typeof t.style&&o("62",""))}function fi(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function hi(e,t){var n=Ln(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=_[t];for(var i=0;i<t.length;i++){var r=t[i];if(!n.hasOwnProperty(r)||!n[r]){switch(r){case"scroll":En("scroll",e);break;case"focus":case"blur":En("focus",e),En("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":ze(r)&&En(r,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(r)&&On(r,e)}n[r]=!0}}}function di(){}var pi=null,vi=null;function gi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function mi(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var yi="function"==typeof setTimeout?setTimeout:void 0,bi="function"==typeof clearTimeout?clearTimeout:void 0,_i=a.unstable_scheduleCallback,wi=a.unstable_cancelCallback;function xi(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function ki(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var Pi=[],Oi=-1;function Ei(e){0>Oi||(e.current=Pi[Oi],Pi[Oi]=null,Oi--)}function Ti(e,t){Pi[++Oi]=e.current,e.current=t}var Si={},ji={current:Si},Ci={current:!1},Ai=Si;function Li(e,t){var n=e.type.contextTypes;if(!n)return Si;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Mi(e){return null!=(e=e.childContextTypes)}function Fi(e){Ei(Ci),Ei(ji)}function Ii(e){Ei(Ci),Ei(ji)}function Ri(e,t,n){ji.current!==Si&&o("168"),Ti(ji,t),Ti(Ci,n)}function Ni(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var a in i=i.getChildContext())a in e||o("108",st(t)||"Unknown",a);return r({},n,i)}function Di(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Si,Ai=ji.current,Ti(ji,t),Ti(Ci,Ci.current),!0}function Bi(e,t,n){var i=e.stateNode;i||o("169"),n?(t=Ni(e,t,Ai),i.__reactInternalMemoizedMergedChildContext=t,Ei(Ci),Ei(ji),Ti(ji,t)):Ei(Ci),Ti(Ci,n)}var zi=null,Ui=null;function Vi(e){return function(t){try{return e(t)}catch(e){}}}function Gi(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Wi(e,t,n,i){return new Gi(e,t,n,i)}function Hi(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Xi(e,t){var n=e.alternate;return null===n?((n=Wi(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qi(e,t,n,i,r,a){var s=2;if(i=e,"function"==typeof e)Hi(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case Ze:return Yi(n.children,r,a,t);case et:return Zi(n,3|r,a,t);case Qe:return Zi(n,2|r,a,t);case Ke:return(e=Wi(12,n,t,4|r)).elementType=Ke,e.type=Ke,e.expirationTime=a,e;case nt:return(e=Wi(13,n,t,r)).elementType=nt,e.type=nt,e.expirationTime=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case $e:s=10;break e;case Je:s=9;break e;case tt:s=11;break e;case it:s=14;break e;case rt:s=16,i=null;break e}o("130",null==e?e:typeof e,"")}return(t=Wi(s,n,t,r)).elementType=e,t.type=i,t.expirationTime=a,t}function Yi(e,t,n,i){return(e=Wi(7,e,i,t)).expirationTime=n,e}function Zi(e,t,n,i){return e=Wi(8,e,i,t),t=0==(1&t)?Qe:et,e.elementType=t,e.type=t,e.expirationTime=n,e}function Qi(e,t,n){return(e=Wi(6,e,null,t)).expirationTime=n,e}function Ki(e,t,n){return(t=Wi(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $i(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),tr(t,e)}function Ji(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,i=e.latestPendingTime;n===t?e.earliestPendingTime=i===t?e.latestPendingTime=0:i:i===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,i=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:i>t&&(e.latestSuspendedTime=t),tr(t,e)}function er(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function tr(e,t){var n=t.earliestSuspendedTime,i=t.latestSuspendedTime,r=t.earliestPendingTime,a=t.latestPingedTime;0===(r=0!==r?r:a)&&(0===e||i<e)&&(r=i),0!==(e=r)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=r,t.expirationTime=e}function nr(e,t){if(e&&e.defaultProps)for(var n in t=r({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ir=(new i.Component).refs;function rr(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:r({},t,n),e.memoizedState=n,null!==(i=e.updateQueue)&&0===e.expirationTime&&(i.baseState=n)}var ar={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var i=ws(),r=Ya(i=Yo(i,e));r.payload=t,null!=n&&(r.callback=n),Vo(),Qa(e,r),Ko(e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var i=ws(),r=Ya(i=Yo(i,e));r.tag=Va,r.payload=t,null!=n&&(r.callback=n),Vo(),Qa(e,r),Ko(e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ws(),i=Ya(n=Yo(n,e));i.tag=Ga,null!=t&&(i.callback=t),Vo(),Qa(e,i),Ko(e,n)}};function or(e,t,n,i,r,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!en(n,i)||!en(r,a))}function sr(e,t,n){var i=!1,r=Si,a=t.contextType;return"object"==typeof a&&null!==a?a=za(a):(r=Mi(t)?Ai:ji.current,a=(i=null!=(i=t.contextTypes))?Li(e,r):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ar,e.stateNode=t,t._reactInternalFiber=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function ur(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ar.enqueueReplaceState(t,t.state,null)}function lr(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=ir;var a=t.contextType;"object"==typeof a&&null!==a?r.context=za(a):(a=Mi(t)?Ai:ji.current,r.context=Li(e,a)),null!==(a=e.updateQueue)&&(eo(e,a,n,r,i),r.state=e.memoizedState),"function"==typeof(a=t.getDerivedStateFromProps)&&(rr(e,t,a,n),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ar.enqueueReplaceState(r,r.state,null),null!==(a=e.updateQueue)&&(eo(e,a,n,r,i),r.state=e.memoizedState)),"function"==typeof r.componentDidMount&&(e.effectTag|=4)}var cr=Array.isArray;function fr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var i=void 0;n&&(1!==n.tag&&o("309"),i=n.stateNode),i||o("147",e);var r=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===r?t.ref:((t=function(e){var t=i.refs;t===ir&&(t=i.refs={}),null===e?delete t[r]:t[r]=e})._stringRef=r,t)}"string"!=typeof e&&o("284"),n._owner||o("290",e)}return e}function hr(e,t){"textarea"!==e.type&&o("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function dr(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t,n){return(e=Xi(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.effectTag=2,n):i:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,i){return null===t||6!==t.tag?((t=Qi(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,i){return null!==t&&t.elementType===n.type?((i=r(t,n.props)).ref=fr(e,t,n),i.return=e,i):((i=qi(n.type,n.key,n.props,null,e.mode,i)).ref=fr(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ki(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function f(e,t,n,i,a){return null===t||7!==t.tag?((t=Yi(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Qi(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case qe:return(n=qi(t.type,t.key,t.props,null,e.mode,n)).ref=fr(e,null,t),n.return=e,n;case Ye:return(t=Ki(t,e.mode,n)).return=e,t}if(cr(t)||ot(t))return(t=Yi(t,e.mode,n,null)).return=e,t;hr(e,t)}return null}function d(e,t,n,i){var r=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==r?null:u(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case qe:return n.key===r?n.type===Ze?f(e,t,n.props.children,i,r):l(e,t,n,i):null;case Ye:return n.key===r?c(e,t,n,i):null}if(cr(n)||ot(n))return null!==r?null:f(e,t,n,i,null);hr(e,n)}return null}function p(e,t,n,i,r){if("string"==typeof i||"number"==typeof i)return u(t,e=e.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case qe:return e=e.get(null===i.key?n:i.key)||null,i.type===Ze?f(t,e,i.props.children,r,i.key):l(t,e,i,r);case Ye:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r)}if(cr(i)||ot(i))return f(t,e=e.get(n)||null,i,r,null);hr(t,i)}return null}function v(r,o,s,u){for(var l=null,c=null,f=o,v=o=0,g=null;null!==f&&v<s.length;v++){f.index>v?(g=f,f=null):g=f.sibling;var m=d(r,f,s[v],u);if(null===m){null===f&&(f=g);break}e&&f&&null===m.alternate&&t(r,f),o=a(m,o,v),null===c?l=m:c.sibling=m,c=m,f=g}if(v===s.length)return n(r,f),l;if(null===f){for(;v<s.length;v++)(f=h(r,s[v],u))&&(o=a(f,o,v),null===c?l=f:c.sibling=f,c=f);return l}for(f=i(r,f);v<s.length;v++)(g=p(f,r,v,s[v],u))&&(e&&null!==g.alternate&&f.delete(null===g.key?v:g.key),o=a(g,o,v),null===c?l=g:c.sibling=g,c=g);return e&&f.forEach(function(e){return t(r,e)}),l}function g(r,s,u,l){var c=ot(u);"function"!=typeof c&&o("150"),null==(u=c.call(u))&&o("151");for(var f=c=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=d(r,v,y.value,l);if(null===b){v||(v=m);break}e&&v&&null===b.alternate&&t(r,v),s=a(b,s,g),null===f?c=b:f.sibling=b,f=b,v=m}if(y.done)return n(r,v),c;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=h(r,y.value,l))&&(s=a(y,s,g),null===f?c=y:f.sibling=y,f=y);return c}for(v=i(r,v);!y.done;g++,y=u.next())null!==(y=p(v,r,g,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=a(y,s,g),null===f?c=y:f.sibling=y,f=y);return e&&v.forEach(function(e){return t(r,e)}),c}return function(e,i,a,u){var l="object"==typeof a&&null!==a&&a.type===Ze&&null===a.key;l&&(a=a.props.children);var c="object"==typeof a&&null!==a;if(c)switch(a.$$typeof){case qe:e:{for(c=a.key,l=i;null!==l;){if(l.key===c){if(7===l.tag?a.type===Ze:l.elementType===a.type){n(e,l.sibling),(i=r(l,a.type===Ze?a.props.children:a.props)).ref=fr(e,l,a),i.return=e,e=i;break e}n(e,l);break}t(e,l),l=l.sibling}a.type===Ze?((i=Yi(a.props.children,e.mode,u,a.key)).return=e,e=i):((u=qi(a.type,a.key,a.props,null,e.mode,u)).ref=fr(e,i,a),u.return=e,e=u)}return s(e);case Ye:e:{for(l=a.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(e,i.sibling),(i=r(i,a.children||[])).return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}(i=Ki(a,e.mode,u)).return=e,e=i}return s(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==i&&6===i.tag?(n(e,i.sibling),(i=r(i,a)).return=e,e=i):(n(e,i),(i=Qi(a,e.mode,u)).return=e,e=i),s(e);if(cr(a))return v(e,i,a,u);if(ot(a))return g(e,i,a,u);if(c&&hr(e,a),void 0===a&&!l)switch(e.tag){case 1:case 0:o("152",(u=e.type).displayName||u.name||"Component")}return n(e,i)}}var pr=dr(!0),vr=dr(!1),gr={},mr={current:gr},yr={current:gr},br={current:gr};function _r(e){return e===gr&&o("174"),e}function wr(e,t){Ti(br,t),Ti(yr,e),Ti(mr,gr);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ti(null,"");break;default:t=ti(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Ei(mr),Ti(mr,t)}function xr(e){Ei(mr),Ei(yr),Ei(br)}function kr(e){_r(br.current);var t=_r(mr.current),n=ti(t,e.type);t!==n&&(Ti(yr,e),Ti(mr,n))}function Pr(e){yr.current===e&&(Ei(mr),Ei(yr))}var Or=0,Er=2,Tr=4,Sr=8,jr=16,Cr=32,Ar=64,Lr=128,Mr=We.ReactCurrentDispatcher,Fr=0,Ir=null,Rr=null,Nr=null,Dr=null,Br=null,zr=null,Ur=0,Vr=null,Gr=0,Wr=!1,Hr=null,Xr=0;function qr(){o("321")}function Yr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$t(e[n],t[n]))return!1;return!0}function Zr(e,t,n,i,r,a){if(Fr=a,Ir=t,Nr=null!==e?e.memoizedState:null,Mr.current=null===Nr?ua:la,t=n(i,r),Wr){do{Wr=!1,Xr+=1,Nr=null!==e?e.memoizedState:null,zr=Dr,Vr=Br=Rr=null,Mr.current=la,t=n(i,r)}while(Wr);Hr=null,Xr=0}return Mr.current=sa,(e=Ir).memoizedState=Dr,e.expirationTime=Ur,e.updateQueue=Vr,e.effectTag|=Gr,e=null!==Rr&&null!==Rr.next,Fr=0,zr=Br=Dr=Nr=Rr=Ir=null,Ur=0,Vr=null,Gr=0,e&&o("300"),t}function Qr(){Mr.current=sa,Fr=0,zr=Br=Dr=Nr=Rr=Ir=null,Ur=0,Vr=null,Gr=0,Wr=!1,Hr=null,Xr=0}function Kr(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Br?Dr=Br=e:Br=Br.next=e,Br}function $r(){if(null!==zr)zr=(Br=zr).next,Nr=null!==(Rr=Nr)?Rr.next:null;else{null===Nr&&o("310");var e={memoizedState:(Rr=Nr).memoizedState,baseState:Rr.baseState,queue:Rr.queue,baseUpdate:Rr.baseUpdate,next:null};Br=null===Br?Dr=e:Br.next=e,Nr=Rr.next}return Br}function Jr(e,t){return"function"==typeof t?t(e):t}function ea(e){var t=$r(),n=t.queue;if(null===n&&o("311"),n.lastRenderedReducer=e,0<Xr){var i=n.dispatch;if(null!==Hr){var r=Hr.get(n);if(void 0!==r){Hr.delete(n);var a=t.memoizedState;do{a=e(a,r.action),r=r.next}while(null!==r);return $t(a,t.memoizedState)||(_a=!0),t.memoizedState=a,t.baseUpdate===n.last&&(t.baseState=a),n.lastRenderedState=a,[a,i]}}return[t.memoizedState,i]}i=n.last;var s=t.baseUpdate;if(a=t.baseState,null!==s?(null!==i&&(i.next=null),i=s.next):i=null!==i?i.next:null,null!==i){var u=r=null,l=i,c=!1;do{var f=l.expirationTime;f<Fr?(c||(c=!0,u=s,r=a),f>Ur&&(Ur=f)):a=l.eagerReducer===e?l.eagerState:e(a,l.action),s=l,l=l.next}while(null!==l&&l!==i);c||(u=s,r=a),$t(a,t.memoizedState)||(_a=!0),t.memoizedState=a,t.baseUpdate=u,t.baseState=r,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function ta(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===Vr?(Vr={lastEffect:null}).lastEffect=e.next=e:null===(t=Vr.lastEffect)?Vr.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Vr.lastEffect=e),e}function na(e,t,n,i){var r=Kr();Gr|=e,r.memoizedState=ta(t,n,void 0,void 0===i?null:i)}function ia(e,t,n,i){var r=$r();i=void 0===i?null:i;var a=void 0;if(null!==Rr){var o=Rr.memoizedState;if(a=o.destroy,null!==i&&Yr(i,o.deps))return void ta(Or,n,a,i)}Gr|=e,r.memoizedState=ta(t,n,a,i)}function ra(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function aa(){}function oa(e,t,n){25>Xr||o("301");var i=e.alternate;if(e===Ir||null!==i&&i===Ir)if(Wr=!0,e={expirationTime:Fr,action:n,eagerReducer:null,eagerState:null,next:null},null===Hr&&(Hr=new Map),void 0===(n=Hr.get(t)))Hr.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{Vo();var r=ws(),a={expirationTime:r=Yo(r,e),action:n,eagerReducer:null,eagerState:null,next:null},s=t.last;if(null===s)a.next=a;else{var u=s.next;null!==u&&(a.next=u),s.next=a}if(t.last=a,0===e.expirationTime&&(null===i||0===i.expirationTime)&&null!==(i=t.lastRenderedReducer))try{var l=t.lastRenderedState,c=i(l,n);if(a.eagerReducer=i,a.eagerState=c,$t(c,l))return}catch(e){}Ko(e,r)}}var sa={readContext:za,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useLayoutEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr},ua={readContext:za,useCallback:function(e,t){return Kr().memoizedState=[e,void 0===t?null:t],e},useContext:za,useEffect:function(e,t){return na(516,Lr|Ar,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,na(4,Tr|Cr,ra.bind(null,t,e),n)},useLayoutEffect:function(e,t){return na(4,Tr|Cr,e,t)},useMemo:function(e,t){var n=Kr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Kr();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=oa.bind(null,Ir,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Kr().memoizedState=e},useState:function(e){var t=Kr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:e}).dispatch=oa.bind(null,Ir,e),[t.memoizedState,e]},useDebugValue:aa},la={readContext:za,useCallback:function(e,t){var n=$r();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Yr(t,i[1])?i[0]:(n.memoizedState=[e,t],e)},useContext:za,useEffect:function(e,t){return ia(516,Lr|Ar,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ia(4,Tr|Cr,ra.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ia(4,Tr|Cr,e,t)},useMemo:function(e,t){var n=$r();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Yr(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:ea,useRef:function(){return $r().memoizedState},useState:function(e){return ea(Jr)},useDebugValue:aa},ca=null,fa=null,ha=!1;function da(e,t){var n=Wi(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function pa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function va(e){if(ha){var t=fa;if(t){var n=t;if(!pa(e,t)){if(!(t=xi(n))||!pa(e,t))return e.effectTag|=2,ha=!1,void(ca=e);da(ca,n)}ca=e,fa=ki(t)}else e.effectTag|=2,ha=!1,ca=e}}function ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;ca=e}function ma(e){if(e!==ca)return!1;if(!ha)return ga(e),ha=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!mi(t,e.memoizedProps))for(t=fa;t;)da(e,t),t=xi(t);return ga(e),fa=ca?xi(e.stateNode):null,!0}function ya(){fa=ca=null,ha=!1}var ba=We.ReactCurrentOwner,_a=!1;function wa(e,t,n,i){t.child=null===e?vr(t,null,n,i):pr(t,e.child,n,i)}function xa(e,t,n,i,r){n=n.render;var a=t.ref;return Ba(t,r),i=Zr(e,t,n,i,a,r),null===e||_a?(t.effectTag|=1,wa(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Aa(e,t,r))}function ka(e,t,n,i,r,a){if(null===e){var o=n.type;return"function"!=typeof o||Hi(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=qi(n.type,null,i,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Pa(e,t,o,i,r,a))}return o=e.child,r<a&&(r=o.memoizedProps,(n=null!==(n=n.compare)?n:en)(r,i)&&e.ref===t.ref)?Aa(e,t,a):(t.effectTag|=1,(e=Xi(o,i)).ref=t.ref,e.return=t,t.child=e)}function Pa(e,t,n,i,r,a){return null!==e&&en(e.memoizedProps,i)&&e.ref===t.ref&&(_a=!1,r<a)?Aa(e,t,a):Ea(e,t,n,i,a)}function Oa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ea(e,t,n,i,r){var a=Mi(n)?Ai:ji.current;return a=Li(t,a),Ba(t,r),n=Zr(e,t,n,i,a,r),null===e||_a?(t.effectTag|=1,wa(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Aa(e,t,r))}function Ta(e,t,n,i,r){if(Mi(n)){var a=!0;Di(t)}else a=!1;if(Ba(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),sr(t,n,i),lr(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"==typeof l&&null!==l?l=za(l):l=Li(t,l=Mi(n)?Ai:ji.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==i||u!==l)&&ur(t,o,i,l),Ha=!1;var h=t.memoizedState;u=o.state=h;var d=t.updateQueue;null!==d&&(eo(t,d,i,o,r),u=t.memoizedState),s!==i||h!==u||Ci.current||Ha?("function"==typeof c&&(rr(t,n,c,i),u=t.memoizedState),(s=Ha||or(t,n,s,i,h,u,l))?(f||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=i,t.memoizedState=u),o.props=i,o.state=u,o.context=l,i=s):("function"==typeof o.componentDidMount&&(t.effectTag|=4),i=!1)}else o=t.stateNode,s=t.memoizedProps,o.props=t.type===t.elementType?s:nr(t.type,s),u=o.context,"object"==typeof(l=n.contextType)&&null!==l?l=za(l):l=Li(t,l=Mi(n)?Ai:ji.current),(f="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==i||u!==l)&&ur(t,o,i,l),Ha=!1,u=t.memoizedState,h=o.state=u,null!==(d=t.updateQueue)&&(eo(t,d,i,o,r),h=t.memoizedState),s!==i||u!==h||Ci.current||Ha?("function"==typeof c&&(rr(t,n,c,i),h=t.memoizedState),(c=Ha||or(t,n,s,i,u,h,l))?(f||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,h,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,h,l)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=i,t.memoizedState=h),o.props=i,o.state=h,o.context=l,i=c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),i=!1);return Sa(e,t,n,i,a,r)}function Sa(e,t,n,i,r,a){Oa(e,t);var o=0!=(64&t.effectTag);if(!i&&!o)return r&&Bi(t,n,!1),Aa(e,t,a);i=t.stateNode,ba.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return t.effectTag|=1,null!==e&&o?(t.child=pr(t,e.child,null,a),t.child=pr(t,null,s,a)):wa(e,t,s,a),t.memoizedState=i.state,r&&Bi(t,n,!0),t.child}function ja(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),wr(e,t.containerInfo)}function Ca(e,t,n){var i=t.mode,r=t.pendingProps,a=t.memoizedState;if(0==(64&t.effectTag)){a=null;var o=!1}else a={timedOutAt:null!==a?a.timedOutAt:0},o=!0,t.effectTag&=-65;if(null===e)if(o){var s=r.fallback;e=Yi(null,i,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),i=Yi(s,i,n,null),e.sibling=i,(n=e).return=i.return=t}else n=i=vr(t,null,r.children,n);else null!==e.memoizedState?(s=(i=e.child).sibling,o?(n=r.fallback,r=Xi(i,i.pendingProps),0==(1&t.mode)&&((o=null!==t.memoizedState?t.child.child:t.child)!==i.child&&(r.child=o)),i=r.sibling=Xi(s,n,s.expirationTime),n=r,r.childExpirationTime=0,n.return=i.return=t):n=i=pr(t,i.child,r.children,n)):(s=e.child,o?(o=r.fallback,(r=Yi(null,i,0,null)).child=s,0==(1&t.mode)&&(r.child=null!==t.memoizedState?t.child.child:t.child),(i=r.sibling=Yi(o,i,n,null)).effectTag|=2,n=r,r.childExpirationTime=0,n.return=i.return=t):i=n=pr(t,s,r.children,n)),t.stateNode=e.stateNode;return t.memoizedState=a,t.child=n,i}function Aa(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&o("153"),null!==t.child){for(n=Xi(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Xi(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function La(e,t,n){var i=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Ci.current)_a=!0;else if(i<n){switch(_a=!1,t.tag){case 3:ja(t),ya();break;case 5:kr(t);break;case 1:Mi(t.type)&&Di(t);break;case 4:wr(t,t.stateNode.containerInfo);break;case 10:Na(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(i=t.child.childExpirationTime)&&i>=n?Ca(e,t,n):null!==(t=Aa(e,t,n))?t.sibling:null}return Aa(e,t,n)}}else _a=!1;switch(t.expirationTime=0,t.tag){case 2:i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var r=Li(t,ji.current);if(Ba(t,n),r=Zr(null,t,i,e,r,n),t.effectTag|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof){if(t.tag=1,Qr(),Mi(i)){var a=!0;Di(t)}else a=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null;var s=i.getDerivedStateFromProps;"function"==typeof s&&rr(t,i,s,e),r.updater=ar,t.stateNode=r,r._reactInternalFiber=t,lr(t,i,e,n),t=Sa(null,t,i,!0,a,n)}else t.tag=0,wa(null,t,r,n),t=t.child;return t;case 16:switch(r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),a=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(r),t.type=e,r=t.tag=function(e){if("function"==typeof e)return Hi(e)?1:0;if(null!=e){if((e=e.$$typeof)===tt)return 11;if(e===it)return 14}return 2}(e),a=nr(e,a),s=void 0,r){case 0:s=Ea(null,t,e,a,n);break;case 1:s=Ta(null,t,e,a,n);break;case 11:s=xa(null,t,e,a,n);break;case 14:s=ka(null,t,e,nr(e.type,a),i,n);break;default:o("306",e,"")}return s;case 0:return i=t.type,r=t.pendingProps,Ea(e,t,i,r=t.elementType===i?r:nr(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ta(e,t,i,r=t.elementType===i?r:nr(i,r),n);case 3:return ja(t),null===(i=t.updateQueue)&&o("282"),r=null!==(r=t.memoizedState)?r.element:null,eo(t,i,t.pendingProps,null,n),(i=t.memoizedState.element)===r?(ya(),t=Aa(e,t,n)):(r=t.stateNode,(r=(null===e||null===e.child)&&r.hydrate)&&(fa=ki(t.stateNode.containerInfo),ca=t,r=ha=!0),r?(t.effectTag|=2,t.child=vr(t,null,i,n)):(wa(e,t,i,n),ya()),t=t.child),t;case 5:return kr(t),null===e&&va(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,s=r.children,mi(i,r)?s=null:null!==a&&mi(i,a)&&(t.effectTag|=16),Oa(e,t),1!==n&&1&t.mode&&r.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(wa(e,t,s,n),t=t.child),t;case 6:return null===e&&va(t),null;case 13:return Ca(e,t,n);case 4:return wr(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=pr(t,null,i,n):wa(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,xa(e,t,i,r=t.elementType===i?r:nr(i,r),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,Na(t,a=r.value),null!==s){var u=s.value;if(0===(a=$t(u,a)?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(u,a):1073741823))){if(s.children===r.children&&!Ci.current){t=Aa(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.contextDependencies;if(null!==l){s=u.child;for(var c=l.first;null!==c;){if(c.context===i&&0!=(c.observedBits&a)){1===u.tag&&((c=Ya(n)).tag=Ga,Qa(u,c)),u.expirationTime<n&&(u.expirationTime=n),null!==(c=u.alternate)&&c.expirationTime<n&&(c.expirationTime=n),c=n;for(var f=u.return;null!==f;){var h=f.alternate;if(f.childExpirationTime<c)f.childExpirationTime=c,null!==h&&h.childExpirationTime<c&&(h.childExpirationTime=c);else{if(!(null!==h&&h.childExpirationTime<c))break;h.childExpirationTime=c}f=f.return}l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}wa(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=(a=t.pendingProps).children,Ba(t,n),i=i(r=za(r,a.unstable_observedBits)),t.effectTag|=1,wa(e,t,i,n),t.child;case 14:return a=nr(r=t.type,t.pendingProps),ka(e,t,r,a=nr(r.type,a),i,n);case 15:return Pa(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:nr(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Mi(i)?(e=!0,Di(t)):e=!1,Ba(t,n),sr(t,i,r),lr(t,i,r,n),Sa(null,t,i,!0,e,n)}o("156")}var Ma={current:null},Fa=null,Ia=null,Ra=null;function Na(e,t){var n=e.type._context;Ti(Ma,n._currentValue),n._currentValue=t}function Da(e){var t=Ma.current;Ei(Ma),e.type._context._currentValue=t}function Ba(e,t){Fa=e,Ra=Ia=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(_a=!0),e.contextDependencies=null}function za(e,t){return Ra!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(Ra=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ia?(null===Fa&&o("308"),Ia=t,Fa.contextDependencies={first:t,expirationTime:0}):Ia=Ia.next=t),e._currentValue}var Ua=0,Va=1,Ga=2,Wa=3,Ha=!1;function Xa(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function qa(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ya(e){return{expirationTime:e,tag:Ua,payload:null,callback:null,next:null,nextEffect:null}}function Za(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Qa(e,t){var n=e.alternate;if(null===n){var i=e.updateQueue,r=null;null===i&&(i=e.updateQueue=Xa(e.memoizedState))}else i=e.updateQueue,r=n.updateQueue,null===i?null===r?(i=e.updateQueue=Xa(e.memoizedState),r=n.updateQueue=Xa(n.memoizedState)):i=e.updateQueue=qa(r):null===r&&(r=n.updateQueue=qa(i));null===r||i===r?Za(i,t):null===i.lastUpdate||null===r.lastUpdate?(Za(i,t),Za(r,t)):(Za(i,t),r.lastUpdate=t)}function Ka(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Xa(e.memoizedState):$a(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function $a(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=qa(t)),t}function Ja(e,t,n,i,a,o){switch(n.tag){case Va:return"function"==typeof(e=n.payload)?e.call(o,i,a):e;case Wa:e.effectTag=-2049&e.effectTag|64;case Ua:if(null==(a="function"==typeof(e=n.payload)?e.call(o,i,a):e))break;return r({},i,a);case Ga:Ha=!0}return i}function eo(e,t,n,i,r){Ha=!1;for(var a=(t=$a(e,t)).baseState,o=null,s=0,u=t.firstUpdate,l=a;null!==u;){var c=u.expirationTime;c<r?(null===o&&(o=u,a=l),s<c&&(s=c)):(l=Ja(e,0,u,l,n,i),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(c=null,u=t.firstCapturedUpdate;null!==u;){var f=u.expirationTime;f<r?(null===c&&(c=u,null===o&&(a=l)),s<f&&(s=f)):(l=Ja(e,0,u,l,n,i),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===o&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===o&&null===c&&(a=l),t.baseState=a,t.firstUpdate=o,t.firstCapturedUpdate=c,e.expirationTime=s,e.memoizedState=l}function to(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),no(t.firstEffect,n),t.firstEffect=t.lastEffect=null,no(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function no(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var i=t;"function"!=typeof n&&o("191",n),n.call(i)}e=e.nextEffect}}function io(e,t){return{value:e,source:t,stack:ut(t)}}function ro(e){e.effectTag|=4}var ao=void 0,oo=void 0,so=void 0,uo=void 0;ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},oo=function(){},so=function(e,t,n,i,a){var o=e.memoizedProps;if(o!==i){var s=t.stateNode;switch(_r(mr.current),e=null,n){case"input":o=bt(s,o),i=bt(s,i),e=[];break;case"option":o=qn(s,o),i=qn(s,i),e=[];break;case"select":o=r({},o,{value:void 0}),i=r({},i,{value:void 0}),e=[];break;case"textarea":o=Zn(s,o),i=Zn(s,i),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof i.onClick&&(s.onclick=di)}ci(n,i),s=n=void 0;var u=null;for(n in o)if(!i.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var l=o[n];for(s in l)l.hasOwnProperty(s)&&(u||(u={}),u[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in i){var c=i[n];if(l=null!=o?o[n]:void 0,i.hasOwnProperty(n)&&c!==l&&(null!=c||null!=l))if("style"===n)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(u||(u={}),u[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(u||(u={}),u[s]=c[s])}else u||(e||(e=[]),e.push(n,u)),u=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(e=e||[]).push(n,""+c)):"children"===n?l===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=c&&hi(a,n),e||l===c||(e=[])):(e=e||[]).push(n,c))}u&&(e=e||[]).push("style",u),a=e,(t.updateQueue=a)&&ro(t)}},uo=function(e,t,n,i){n!==i&&ro(t)};var lo="function"==typeof WeakSet?WeakSet:Set;function co(e,t){var n=t.source,i=t.stack;null===i&&null!==n&&(i=ut(n)),null!==n&&st(n.type),t=t.value,null!==e&&1===e.tag&&st(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function fo(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){qo(e,t)}else t.current=null}function ho(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)!==Or){var r=i.destroy;i.destroy=void 0,void 0!==r&&r()}(i.tag&t)!==Or&&(r=i.create,i.destroy=r()),i=i.next}while(i!==n)}}function po(e){switch("function"==typeof Ui&&Ui(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var i=n.destroy;if(void 0!==i){var r=e;try{i()}catch(e){qo(r,e)}}n=n.next}while(n!==t)}break;case 1:if(fo(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){qo(e,t)}break;case 5:fo(e);break;case 4:mo(e)}}function vo(e){return 5===e.tag||3===e.tag||4===e.tag}function go(e){e:{for(var t=e.return;null!==t;){if(vo(t)){var n=t;break e}t=t.return}o("160"),n=void 0}var i=t=void 0;switch(n.tag){case 5:t=n.stateNode,i=!1;break;case 3:case 4:t=n.stateNode.containerInfo,i=!0;break;default:o("161")}16&n.effectTag&&(ri(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||vo(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var r=e;;){if(5===r.tag||6===r.tag)if(n)if(i){var a=t,s=r.stateNode,u=n;8===a.nodeType?a.parentNode.insertBefore(s,u):a.insertBefore(s,u)}else t.insertBefore(r.stateNode,n);else i?(s=t,u=r.stateNode,8===s.nodeType?(a=s.parentNode).insertBefore(u,s):(a=s).appendChild(u),null!=(s=s._reactRootContainer)||null!==a.onclick||(a.onclick=di)):t.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function mo(e){for(var t=e,n=!1,i=void 0,r=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&o("160"),n.tag){case 5:i=n.stateNode,r=!1;break e;case 3:case 4:i=n.stateNode.containerInfo,r=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var a=t,s=a;;)if(po(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}r?(a=i,s=t.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):i.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){i=t.stateNode.containerInfo,r=!0,t.child.return=t,t=t.child;continue}}else if(po(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function yo(e,t){switch(t.tag){case 0:case 11:case 14:case 15:ho(Tr,Sr,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var r=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&function(e,t,n,i,r){e[F]=r,"input"===n&&"radio"===r.type&&null!=r.name&&wt(e,r),fi(n,i),i=fi(n,r);for(var a=0;a<t.length;a+=2){var o=t[a],s=t[a+1];"style"===o?ui(e,s):"dangerouslySetInnerHTML"===o?ii(e,s):"children"===o?ri(e,s):mt(e,o,s,i)}switch(n){case"input":xt(e,r);break;case"textarea":Kn(e,r);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!r.multiple,null!=(n=r.value)?Yn(e,!!r.multiple,n,!1):t!==!!r.multiple&&(null!=r.defaultValue?Yn(e,!!r.multiple,r.defaultValue,!0):Yn(e,!!r.multiple,r.multiple?[]:"",!1))}}(n,a,r,e,i)}break;case 6:null===t.stateNode&&o("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,i=void 0,e=t,null===n?i=!1:(i=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=ws())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var i=n.stateNode;if(t)i.style.display="none";else{i=n.stateNode;var r=n.memoizedProps.style;r=null!=r&&r.hasOwnProperty("display")?r.display:null,i.style.display=si("display",r)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(i=n.child.sibling).return=n,n=i;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,i),null!==(n=t.updateQueue)){t.updateQueue=null;var s=t.stateNode;null===s&&(s=t.stateNode=new lo),n.forEach(function(e){var n=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=Yo(t=ws(),e),null!==(e=Qo(e,t))&&($i(e,t),0!==(t=e.expirationTime)&&xs(e,t))}.bind(null,t,e);s.has(e)||(s.add(e),e.then(n,n))})}break;case 17:break;default:o("163")}}var bo="function"==typeof WeakMap?WeakMap:Map;function _o(e,t,n){(n=Ya(n)).tag=Wa,n.payload={element:null};var i=t.value;return n.callback=function(){As(i),co(e,t)},n}function wo(e,t,n){(n=Ya(n)).tag=Wa;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var r=t.value;n.payload=function(){return i(r)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof i&&(null===No?No=new Set([this]):No.add(this));var n=t.value,r=t.stack;co(e,t),this.componentDidCatch(n,{componentStack:null!==r?r:""})}),n}function xo(e){switch(e.tag){case 1:Mi(e.type)&&Fi();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return xr(),Ii(),0!=(64&(t=e.effectTag))&&o("285"),e.effectTag=-2049&t|64,e;case 5:return Pr(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return xr(),null;case 10:return Da(e),null;default:return null}}var ko=We.ReactCurrentDispatcher,Po=We.ReactCurrentOwner,Oo=1073741822,Eo=!1,To=null,So=null,jo=0,Co=-1,Ao=!1,Lo=null,Mo=!1,Fo=null,Io=null,Ro=null,No=null;function Do(){if(null!==To)for(var e=To.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!=n&&Fi();break;case 3:xr(),Ii();break;case 5:Pr(t);break;case 4:xr();break;case 10:Da(t)}e=e.return}So=null,jo=0,Co=-1,Ao=!1,To=null}function Bo(){for(;null!==Lo;){var e=Lo.effectTag;if(16&e&&ri(Lo.stateNode,""),128&e){var t=Lo.alternate;null!==t&&(null!==(t=t.ref)&&("function"==typeof t?t(null):t.current=null))}switch(14&e){case 2:go(Lo),Lo.effectTag&=-3;break;case 6:go(Lo),Lo.effectTag&=-3,yo(Lo.alternate,Lo);break;case 4:yo(Lo.alternate,Lo);break;case 8:mo(e=Lo),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Lo=Lo.nextEffect}}function zo(){for(;null!==Lo;){if(256&Lo.effectTag)e:{var e=Lo.alternate,t=Lo;switch(t.tag){case 0:case 11:case 15:ho(Er,Or,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:nr(t.type,n),i),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:o("163")}}Lo=Lo.nextEffect}}function Uo(e,t){for(;null!==Lo;){var n=Lo.effectTag;if(36&n){var i=Lo.alternate,r=Lo,a=t;switch(r.tag){case 0:case 11:case 15:ho(jr,Cr,r);break;case 1:var s=r.stateNode;if(4&r.effectTag)if(null===i)s.componentDidMount();else{var u=r.elementType===r.type?i.memoizedProps:nr(r.type,i.memoizedProps);s.componentDidUpdate(u,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}null!==(i=r.updateQueue)&&to(0,i,s);break;case 3:if(null!==(i=r.updateQueue)){if(s=null,null!==r.child)switch(r.child.tag){case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}to(0,i,s)}break;case 5:a=r.stateNode,null===i&&4&r.effectTag&&gi(r.type,r.memoizedProps)&&a.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:o("163")}}128&n&&(null!==(r=Lo.ref)&&(a=Lo.stateNode,"function"==typeof r?r(a):r.current=a)),512&n&&(Fo=e),Lo=Lo.nextEffect}}function Vo(){null!==Io&&wi(Io),null!==Ro&&Ro()}function Go(e,t){Mo=Eo=!0,e.current===t&&o("177");var n=e.pendingCommitExpirationTime;0===n&&o("261"),e.pendingCommitExpirationTime=0;var i=t.expirationTime,r=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?$i(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,$i(e,t)):t>n&&$i(e,t)}tr(0,e)}(e,r>i?r:i),Po.current=null,i=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,i=t.firstEffect):i=t:i=t.firstEffect,pi=Pn,vi=function(){var e=Rn();if(Nn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{t.nodeType,r.nodeType}catch(e){t=null;break e}var a=0,o=-1,s=-1,u=0,l=0,c=e,f=null;t:for(;;){for(var h;c!==t||0!==i&&3!==c.nodeType||(o=a+i),c!==r||0!==n&&3!==c.nodeType||(s=a+n),3===c.nodeType&&(a+=c.nodeValue.length),null!==(h=c.firstChild);)f=c,c=h;for(;;){if(c===e)break t;if(f===t&&++u===i&&(o=a),f===r&&++l===n&&(s=a),null!==(h=c.nextSibling))break;f=(c=f).parentNode}c=h}t=-1===o||-1===s?null:{start:o,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),Pn=!1,Lo=i;null!==Lo;){r=!1;var s=void 0;try{zo()}catch(e){r=!0,s=e}r&&(null===Lo&&o("178"),qo(Lo,s),null!==Lo&&(Lo=Lo.nextEffect))}for(Lo=i;null!==Lo;){r=!1,s=void 0;try{Bo()}catch(e){r=!0,s=e}r&&(null===Lo&&o("178"),qo(Lo,s),null!==Lo&&(Lo=Lo.nextEffect))}for(Dn(vi),vi=null,Pn=!!pi,pi=null,e.current=t,Lo=i;null!==Lo;){r=!1,s=void 0;try{Uo(e,n)}catch(e){r=!0,s=e}r&&(null===Lo&&o("178"),qo(Lo,s),null!==Lo&&(Lo=Lo.nextEffect))}if(null!==i&&null!==Fo){var u=function(e,t){Ro=Io=Fo=null;var n=is;is=!0;do{if(512&t.effectTag){var i=!1,r=void 0;try{var a=t;ho(Lr,Or,a),ho(Or,Ar,a)}catch(e){i=!0,r=e}i&&qo(t,r)}t=t.nextEffect}while(null!==t);is=n,0!==(n=e.expirationTime)&&xs(e,n),ls||is||Ts(1073741823,!1)}.bind(null,e,i);Io=a.unstable_runWithPriority(a.unstable_NormalPriority,function(){return _i(u)}),Ro=u}Eo=Mo=!1,"function"==typeof zi&&zi(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(No=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function Wo(e){for(;;){var t=e.alternate,n=e.return,i=e.sibling;if(0==(1024&e.effectTag)){To=e;e:{var a=t,s=jo,u=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Mi(t.type)&&Fi();break;case 3:xr(),Ii(),(u=t.stateNode).pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),null!==a&&null!==a.child||(ma(t),t.effectTag&=-3),oo(t);break;case 5:Pr(t);var l=_r(br.current);if(s=t.type,null!==a&&null!=t.stateNode)so(a,t,s,u,l),a.ref!==t.ref&&(t.effectTag|=128);else if(u){var c=_r(mr.current);if(ma(t)){a=(u=t).stateNode;var f=u.type,h=u.memoizedProps,d=l;switch(a[M]=u,a[F]=h,s=void 0,l=f){case"iframe":case"object":On("load",a);break;case"video":case"audio":for(f=0;f<te.length;f++)On(te[f],a);break;case"source":On("error",a);break;case"img":case"image":case"link":On("error",a),On("load",a);break;case"form":On("reset",a),On("submit",a);break;case"details":On("toggle",a);break;case"input":_t(a,h),On("invalid",a),hi(d,"onChange");break;case"select":a._wrapperState={wasMultiple:!!h.multiple},On("invalid",a),hi(d,"onChange");break;case"textarea":Qn(a,h),On("invalid",a),hi(d,"onChange")}for(s in ci(l,h),f=null,h)h.hasOwnProperty(s)&&(c=h[s],"children"===s?"string"==typeof c?a.textContent!==c&&(f=["children",c]):"number"==typeof c&&a.textContent!==""+c&&(f=["children",""+c]):b.hasOwnProperty(s)&&null!=c&&hi(d,s));switch(l){case"input":Ve(a),kt(a,h,!0);break;case"textarea":Ve(a),$n(a);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(a.onclick=di)}s=f,u.updateQueue=s,(u=null!==s)&&ro(t)}else{h=t,d=s,a=u,f=9===l.nodeType?l:l.ownerDocument,c===Jn.html&&(c=ei(d)),c===Jn.html?"script"===d?((a=f.createElement("div")).innerHTML="<script><\/script>",f=a.removeChild(a.firstChild)):"string"==typeof a.is?f=f.createElement(d,{is:a.is}):(f=f.createElement(d),"select"===d&&(d=f,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):f=f.createElementNS(c,d),(a=f)[M]=h,a[F]=u,ao(a,t,!1,!1),d=a;var p=l,v=fi(f=s,h=u);switch(f){case"iframe":case"object":On("load",d),l=h;break;case"video":case"audio":for(l=0;l<te.length;l++)On(te[l],d);l=h;break;case"source":On("error",d),l=h;break;case"img":case"image":case"link":On("error",d),On("load",d),l=h;break;case"form":On("reset",d),On("submit",d),l=h;break;case"details":On("toggle",d),l=h;break;case"input":_t(d,h),l=bt(d,h),On("invalid",d),hi(p,"onChange");break;case"option":l=qn(d,h);break;case"select":d._wrapperState={wasMultiple:!!h.multiple},l=r({},h,{value:void 0}),On("invalid",d),hi(p,"onChange");break;case"textarea":Qn(d,h),l=Zn(d,h),On("invalid",d),hi(p,"onChange");break;default:l=h}ci(f,l),c=void 0;var g=f,m=d,y=l;for(c in y)if(y.hasOwnProperty(c)){var _=y[c];"style"===c?ui(m,_):"dangerouslySetInnerHTML"===c?null!=(_=_?_.__html:void 0)&&ii(m,_):"children"===c?"string"==typeof _?("textarea"!==g||""!==_)&&ri(m,_):"number"==typeof _&&ri(m,""+_):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(b.hasOwnProperty(c)?null!=_&&hi(p,c):null!=_&&mt(m,c,_,v))}switch(f){case"input":Ve(d),kt(d,h,!1);break;case"textarea":Ve(d),$n(d);break;case"option":null!=h.value&&d.setAttribute("value",""+yt(h.value));break;case"select":(l=d).multiple=!!h.multiple,null!=(d=h.value)?Yn(l,!!h.multiple,d,!1):null!=h.defaultValue&&Yn(l,!!h.multiple,h.defaultValue,!0);break;default:"function"==typeof l.onClick&&(d.onclick=di)}(u=gi(s,u))&&ro(t),t.stateNode=a}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&o("166");break;case 6:a&&null!=t.stateNode?uo(a,t,a.memoizedProps,u):("string"!=typeof u&&(null===t.stateNode&&o("166")),a=_r(br.current),_r(mr.current),ma(t)?(s=(u=t).stateNode,a=u.memoizedProps,s[M]=u,(u=s.nodeValue!==a)&&ro(t)):(s=t,(u=(9===a.nodeType?a:a.ownerDocument).createTextNode(u))[M]=t,s.stateNode=u));break;case 11:break;case 13:if(u=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=s,To=t;break e}u=null!==u,s=null!==a&&null!==a.memoizedState,null!==a&&!u&&s&&(null!==(a=a.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=a,a.nextEffect=l):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),(u||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:xr(),oo(t);break;case 10:Da(t);break;case 9:case 14:break;case 17:Mi(t.type)&&Fi();break;case 18:break;default:o("156")}To=null}if(t=e,1===jo||1!==t.childExpirationTime){for(u=0,s=t.child;null!==s;)(a=s.expirationTime)>u&&(u=a),(l=s.childExpirationTime)>u&&(u=l),s=s.sibling;t.childExpirationTime=u}if(null!==To)return To;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=xo(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==i)return i;if(null===n)break;e=n}return null}function Ho(e){var t=La(e.alternate,e,jo);return e.memoizedProps=e.pendingProps,null===t&&(t=Wo(e)),Po.current=null,t}function Xo(e,t){Eo&&o("243"),Vo(),Eo=!0;var n=ko.current;ko.current=sa;var i=e.nextExpirationTimeToWorkOn;i===jo&&e===So&&null!==To||(Do(),jo=i,To=Xi((So=e).current,null),e.pendingCommitExpirationTime=0);for(var r=!1;;){try{if(t)for(;null!==To&&!Os();)To=Ho(To);else for(;null!==To;)To=Ho(To)}catch(t){if(Ra=Ia=Fa=null,Qr(),null===To)r=!0,As(t);else{null===To&&o("271");var a=To,s=a.return;if(null!==s){e:{var u=e,l=s,c=a,f=t;if(s=jo,c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==f&&"object"==typeof f&&"function"==typeof f.then){var h=f;f=l;var d=-1,p=-1;do{if(13===f.tag){var v=f.alternate;if(null!==v&&null!==(v=v.memoizedState)){p=10*(1073741822-v.timedOutAt);break}"number"==typeof(v=f.pendingProps.maxDuration)&&(0>=v?d=0:(-1===d||v<d)&&(d=v))}f=f.return}while(null!==f);f=l;do{if((v=13===f.tag)&&(v=void 0!==f.memoizedProps.fallback&&null===f.memoizedState),v){if(null===(l=f.updateQueue)?((l=new Set).add(h),f.updateQueue=l):l.add(h),0==(1&f.mode)){f.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:((s=Ya(1073741823)).tag=Ga,Qa(c,s))),c.expirationTime=1073741823;break e}l=s;var g=(c=u).pingCache;null===g?(g=c.pingCache=new bo,v=new Set,g.set(h,v)):void 0===(v=g.get(h))&&(v=new Set,g.set(h,v)),v.has(l)||(v.add(l),c=Zo.bind(null,c,h,l),h.then(c,c)),-1===d?u=1073741823:(-1===p&&(p=10*(1073741822-er(u,s))-5e3),u=p+d),0<=u&&Co<u&&(Co=u),f.effectTag|=2048,f.expirationTime=s;break e}f=f.return}while(null!==f);f=Error((st(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ut(c))}Ao=!0,f=io(f,c),u=l;do{switch(u.tag){case 3:u.effectTag|=2048,u.expirationTime=s,Ka(u,s=_o(u,f,s));break e;case 1:if(d=f,p=u.type,c=u.stateNode,0==(64&u.effectTag)&&("function"==typeof p.getDerivedStateFromError||null!==c&&"function"==typeof c.componentDidCatch&&(null===No||!No.has(c)))){u.effectTag|=2048,u.expirationTime=s,Ka(u,s=wo(u,d,s));break e}}u=u.return}while(null!==u)}To=Wo(a);continue}r=!0,As(t)}}break}if(Eo=!1,ko.current=n,Ra=Ia=Fa=null,Qr(),r)So=null,e.finishedWork=null;else if(null!==To)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&o("281"),So=null,Ao){if(r=e.latestPendingTime,a=e.latestSuspendedTime,s=e.latestPingedTime,0!==r&&r<i||0!==a&&a<i||0!==s&&s<i)return Ji(e,i),void _s(e,n,i,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,i=e.nextExpirationTimeToWorkOn=i,t=e.expirationTime=1073741823,void _s(e,n,i,t,-1)}t&&-1!==Co?(Ji(e,i),(t=10*(1073741822-er(e,i)))<Co&&(Co=t),t=10*(1073741822-ws()),t=Co-t,_s(e,n,i,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=i,e.finishedWork=n)}}function qo(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var i=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===No||!No.has(i)))return Qa(n,e=wo(n,e=io(t,e),1073741823)),void Ko(n,1073741823);break;case 3:return Qa(n,e=_o(n,e=io(t,e),1073741823)),void Ko(n,1073741823)}n=n.return}3===e.tag&&(Qa(e,n=_o(e,n=io(t,e),1073741823)),Ko(e,1073741823))}function Yo(e,t){var n=a.unstable_getCurrentPriorityLevel(),i=void 0;if(0==(1&t.mode))i=1073741823;else if(Eo&&!Mo)i=jo;else{switch(n){case a.unstable_ImmediatePriority:i=1073741823;break;case a.unstable_UserBlockingPriority:i=1073741822-10*(1+((1073741822-e+15)/10|0));break;case a.unstable_NormalPriority:i=1073741822-25*(1+((1073741822-e+500)/25|0));break;case a.unstable_LowPriority:case a.unstable_IdlePriority:i=1;break;default:o("313")}null!==So&&i===jo&&--i}return n===a.unstable_UserBlockingPriority&&(0===os||i<os)&&(os=i),i}function Zo(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),null!==So&&jo===n?So=null:(t=e.earliestSuspendedTime,i=e.latestSuspendedTime,0!==t&&n<=t&&n>=i&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),tr(n,e),0!==(n=e.expirationTime)&&xs(e,n)))}function Qo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var i=e.return,r=null;if(null===i&&3===e.tag)r=e.stateNode;else for(;null!==i;){if(n=i.alternate,i.childExpirationTime<t&&(i.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===i.return&&3===i.tag){r=i.stateNode;break}i=i.return}return r}function Ko(e,t){null!==(e=Qo(e,t))&&(!Eo&&0!==jo&&t>jo&&Do(),$i(e,t),Eo&&!Mo&&So===e||xs(e,e.expirationTime),gs>vs&&(gs=0,o("185")))}function $o(e,t,n,i,r){return a.unstable_runWithPriority(a.unstable_ImmediatePriority,function(){return e(t,n,i,r)})}var Jo=null,es=null,ts=0,ns=void 0,is=!1,rs=null,as=0,os=0,ss=!1,us=null,ls=!1,cs=!1,fs=null,hs=a.unstable_now(),ds=1073741822-(hs/10|0),ps=ds,vs=50,gs=0,ms=null;function ys(){ds=1073741822-((a.unstable_now()-hs)/10|0)}function bs(e,t){if(0!==ts){if(t<ts)return;null!==ns&&a.unstable_cancelCallback(ns)}ts=t,e=a.unstable_now()-hs,ns=a.unstable_scheduleCallback(Es,{timeout:10*(1073741822-t)-e})}function _s(e,t,n,i,r){e.expirationTime=i,0!==r||Os()?0<r&&(e.timeoutHandle=yi(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,ys(),ps=ds,Ss(e,n)}.bind(null,e,t,n),r)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function ws(){return is?ps:(ks(),0!==as&&1!==as||(ys(),ps=ds),ps)}function xs(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===es?(Jo=es=e,e.nextScheduledRoot=e):(es=es.nextScheduledRoot=e).nextScheduledRoot=Jo):t>e.expirationTime&&(e.expirationTime=t),is||(ls?cs&&(rs=e,as=1073741823,js(e,1073741823,!1)):1073741823===t?Ts(1073741823,!1):bs(e,t))}function ks(){var e=0,t=null;if(null!==es)for(var n=es,i=Jo;null!==i;){var r=i.expirationTime;if(0===r){if((null===n||null===es)&&o("244"),i===i.nextScheduledRoot){Jo=es=i.nextScheduledRoot=null;break}if(i===Jo)Jo=r=i.nextScheduledRoot,es.nextScheduledRoot=r,i.nextScheduledRoot=null;else{if(i===es){(es=n).nextScheduledRoot=Jo,i.nextScheduledRoot=null;break}n.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=n.nextScheduledRoot}else{if(r>e&&(e=r,t=i),i===es)break;if(1073741823===e)break;n=i,i=i.nextScheduledRoot}}rs=t,as=e}var Ps=!1;function Os(){return!!Ps||!!a.unstable_shouldYield()&&(Ps=!0)}function Es(){try{if(!Os()&&null!==Jo){ys();var e=Jo;do{var t=e.expirationTime;0!==t&&ds<=t&&(e.nextExpirationTimeToWorkOn=ds),e=e.nextScheduledRoot}while(e!==Jo)}Ts(0,!0)}finally{Ps=!1}}function Ts(e,t){if(ks(),t)for(ys(),ps=ds;null!==rs&&0!==as&&e<=as&&!(Ps&&ds>as);)js(rs,as,ds>as),ks(),ys(),ps=ds;else for(;null!==rs&&0!==as&&e<=as;)js(rs,as,!1),ks();if(t&&(ts=0,ns=null),0!==as&&bs(rs,as),gs=0,ms=null,null!==fs)for(e=fs,fs=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){ss||(ss=!0,us=e)}}if(ss)throw e=us,us=null,ss=!1,e}function Ss(e,t){is&&o("253"),rs=e,as=t,js(e,t,!1),Ts(1073741823,!1)}function js(e,t,n){if(is&&o("245"),is=!0,n){var i=e.finishedWork;null!==i?Cs(e,i,t):(e.finishedWork=null,-1!==(i=e.timeoutHandle)&&(e.timeoutHandle=-1,bi(i)),Xo(e,n),null!==(i=e.finishedWork)&&(Os()?e.finishedWork=i:Cs(e,i,t)))}else null!==(i=e.finishedWork)?Cs(e,i,t):(e.finishedWork=null,-1!==(i=e.timeoutHandle)&&(e.timeoutHandle=-1,bi(i)),Xo(e,n),null!==(i=e.finishedWork)&&Cs(e,i,t));is=!1}function Cs(e,t,n){var i=e.firstBatch;if(null!==i&&i._expirationTime>=n&&(null===fs?fs=[i]:fs.push(i),i._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===ms?gs++:(ms=e,gs=0),a.unstable_runWithPriority(a.unstable_ImmediatePriority,function(){Go(e,t)})}function As(e){null===rs&&o("246"),rs.expirationTime=0,ss||(ss=!0,us=e)}function Ls(e,t){var n=ls;ls=!0;try{return e(t)}finally{(ls=n)||is||Ts(1073741823,!1)}}function Ms(e,t){if(ls&&!cs){cs=!0;try{return e(t)}finally{cs=!1}}return e(t)}function Fs(e,t,n){ls||is||0===os||(Ts(os,!1),os=0);var i=ls;ls=!0;try{return a.unstable_runWithPriority(a.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(ls=i)||is||Ts(1073741823,!1)}}function Is(e,t,n,i,r){var a=t.current;e:if(n){t:{2===tn(n=n._reactInternalFiber)&&1===n.tag||o("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);o("171"),s=void 0}if(1===n.tag){var u=n.type;if(Mi(u)){n=Ni(n,u,s);break e}}n=s}else n=Si;return null===t.context?t.context=n:t.pendingContext=n,t=r,(r=Ya(i)).payload={element:e},null!==(t=void 0===t?null:t)&&(r.callback=t),Vo(),Qa(a,r),Ko(a,i),i}function Rs(e,t,n,i){var r=t.current;return Is(e,t,n,r=Yo(ws(),r),i)}function Ns(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ds(e){var t=1073741822-25*(1+((1073741822-ws()+500)/25|0));t>=Oo&&(t=Oo-1),this._expirationTime=Oo=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Bs(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function zs(e,t,n){e={current:t=Wi(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Us(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Vs(e,t,n,i,r){var a=n._reactRootContainer;if(a){if("function"==typeof r){var o=r;r=function(){var e=Ns(a._internalRoot);o.call(e)}}null!=e?a.legacy_renderSubtreeIntoContainer(e,t,r):a.render(t,r)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new zs(e,!1,t)}(n,i),"function"==typeof r){var s=r;r=function(){var e=Ns(a._internalRoot);s.call(e)}}Ms(function(){null!=e?a.legacy_renderSubtreeIntoContainer(e,t,r):a.render(t,r)})}return Ns(a._internalRoot)}function Gs(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Us(t)||o("200"),function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ye,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ee=function(e,t,n){switch(t){case"input":if(xt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=D(i);r||o("90"),Ge(i),xt(i,r)}}}break;case"textarea":Kn(e,n);break;case"select":null!=(t=n.value)&&Yn(e,!!n.multiple,t,!1)}},Ds.prototype.render=function(e){this._defer||o("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,i=new Bs;return Is(e,t,null,n,i._onCommit),i},Ds.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ds.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||o("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var i=null,r=t;r!==this;)i=r,r=r._next;null===i&&o("251"),i._next=r._next,this._next=t,e.firstBatch=this}this._defer=!1,Ss(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Ds.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Bs.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Bs.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&o("191",n),n()}}},zs.prototype.render=function(e,t){var n=this._internalRoot,i=new Bs;return null!==(t=void 0===t?null:t)&&i.then(t),Rs(e,n,null,i._onCommit),i},zs.prototype.unmount=function(e){var t=this._internalRoot,n=new Bs;return null!==(e=void 0===e?null:e)&&n.then(e),Rs(null,t,null,n._onCommit),n},zs.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var i=this._internalRoot,r=new Bs;return null!==(n=void 0===n?null:n)&&r.then(n),Rs(t,i,e,r._onCommit),r},zs.prototype.createBatch=function(){var e=new Ds(this),t=e._expirationTime,n=this._internalRoot,i=n.firstBatch;if(null===i)n.firstBatch=e,e._next=null;else{for(n=null;null!==i&&i._expirationTime>=t;)n=i,i=i._next;e._next=i,null!==n&&(n._next=e)}return e},Le=Ls,Me=Fs,Fe=function(){is||0===os||(Ts(os,!1),os=0)};var Ws,Hs,Xs={createPortal:Gs,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?o("188"):o("268",Object.keys(e))),e=null===(e=rn(t))?null:e.stateNode},hydrate:function(e,t,n){return Us(t)||o("200"),Vs(null,e,t,!0,n)},render:function(e,t,n){return Us(t)||o("200"),Vs(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,i){return Us(n)||o("200"),(null==e||void 0===e._reactInternalFiber)&&o("38"),Vs(e,t,n,!1,i)},unmountComponentAtNode:function(e){return Us(e)||o("40"),!!e._reactRootContainer&&(Ms(function(){Vs(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Gs.apply(void 0,arguments)},unstable_batchedUpdates:Ls,unstable_interactiveUpdates:Fs,flushSync:function(e,t){is&&o("187");var n=ls;ls=!0;try{return $o(e,t)}finally{ls=n,Ts(1073741823,!1)}},unstable_createRoot:function(e,t){return Us(e)||o("299","unstable_createRoot"),new zs(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=ls;ls=!0;try{$o(e)}finally{(ls=t)||is||Ts(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[R,N,D,j.injectEventPluginsByName,y,W,function(e){E(e,G)},Ce,Ae,Sn,A]}};Hs=(Ws={findFiberByHostInstance:I,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);zi=Vi(function(e){return t.onCommitFiberRoot(n,e)}),Ui=Vi(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}}(r({},Ws,{overrideProps:null,currentDispatcherRef:We.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return Hs?Hs(e):null}}));var qs={default:Xs},Ys=qs&&Xs||qs;e.exports=Ys.default||Ys},function(e,t,n){"use strict";e.exports=n(55)},function(e,t,n){"use strict";(function(e){
/** @license React v0.13.6
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(t,"__esModule",{value:!0});var n=null,i=!1,r=3,a=-1,o=-1,s=!1,u=!1;function l(){if(!s){var e=n.expirationTime;u?k():u=!0,x(h,e)}}function c(){var e=n,t=n.next;if(n===t)n=null;else{var i=n.previous;n=i.next=t,t.previous=i}e.next=e.previous=null,i=e.callback,t=e.expirationTime,e=e.priorityLevel;var a=r,s=o;r=e,o=t;try{var u=i()}finally{r=a,o=s}if("function"==typeof u)if(u={callback:u,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=u.next=u.previous=u;else{i=null,e=n;do{if(e.expirationTime>=t){i=e;break}e=e.next}while(e!==n);null===i?i=n:i===n&&(n=u,l()),(t=i.previous).next=i.previous=u,u.next=i,u.previous=t}}function f(){if(-1===a&&null!==n&&1===n.priorityLevel){s=!0;try{do{c()}while(null!==n&&1===n.priorityLevel)}finally{s=!1,null!==n?l():u=!1}}}function h(e){s=!0;var r=i;i=e;try{if(e)for(;null!==n;){var a=t.unstable_now();if(!(n.expirationTime<=a))break;do{c()}while(null!==n&&n.expirationTime<=a)}else if(null!==n)do{c()}while(null!==n&&!P())}finally{s=!1,i=r,null!==n?l():u=!1,f()}}var d,p,v=Date,g="function"==typeof setTimeout?setTimeout:void 0,m="function"==typeof clearTimeout?clearTimeout:void 0,y="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,b="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function _(e){d=y(function(t){m(p),e(t)}),p=g(function(){b(d),e(t.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var w=performance;t.unstable_now=function(){return w.now()}}else t.unstable_now=function(){return v.now()};var x,k,P,O=null;if("undefined"!=typeof window?O=window:void 0!==e&&(O=e),O&&O._schedMock){var E=O._schedMock;x=E[0],k=E[1],P=E[2],t.unstable_now=E[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var T=null,S=function(e){if(null!==T)try{T(e)}finally{T=null}};x=function(e){null!==T?setTimeout(x,0,e):(T=e,setTimeout(S,0,!1))},k=function(){T=null},P=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof y&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var j=null,C=!1,A=-1,L=!1,M=!1,F=0,I=33,R=33;P=function(){return F<=t.unstable_now()};var N=new MessageChannel,D=N.port2;N.port1.onmessage=function(){C=!1;var e=j,n=A;j=null,A=-1;var i=t.unstable_now(),r=!1;if(0>=F-i){if(!(-1!==n&&n<=i))return L||(L=!0,_(B)),j=e,void(A=n);r=!0}if(null!==e){M=!0;try{e(r)}finally{M=!1}}};var B=function(e){if(null!==j){_(B);var t=e-F+R;t<R&&I<R?(8>t&&(t=8),R=t<I?I:t):I=t,F=e+R,C||(C=!0,D.postMessage(void 0))}else L=!1};x=function(e,t){j=e,A=t,M||0>t?D.postMessage(void 0):L||(L=!0,_(B))},k=function(){j=null,C=!1,A=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=r,o=a;r=e,a=t.unstable_now();try{return n()}finally{r=i,a=o,f()}},t.unstable_next=function(e){switch(r){case 1:case 2:case 3:var n=3;break;default:n=r}var i=r,o=a;r=n,a=t.unstable_now();try{return e()}finally{r=i,a=o,f()}},t.unstable_scheduleCallback=function(e,i){var o=-1!==a?a:t.unstable_now();if("object"==typeof i&&null!==i&&"number"==typeof i.timeout)i=o+i.timeout;else switch(r){case 1:i=o+-1;break;case 2:i=o+250;break;case 5:i=o+1073741823;break;case 4:i=o+1e4;break;default:i=o+5e3}if(e={callback:e,priorityLevel:r,expirationTime:i,next:null,previous:null},null===n)n=e.next=e.previous=e,l();else{o=null;var s=n;do{if(s.expirationTime>i){o=s;break}s=s.next}while(s!==n);null===o?o=n:o===n&&(n=e,l()),(i=o.previous).next=o.previous=e,e.next=o,e.previous=i}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var i=e.previous;i.next=t,t.previous=i}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=r;return function(){var i=r,o=a;r=n,a=t.unstable_now();try{return e.apply(this,arguments)}finally{r=i,a=o,f()}}},t.unstable_getCurrentPriorityLevel=function(){return r},t.unstable_shouldYield=function(){return!i&&(null!==n&&n.expirationTime<o||P())},t.unstable_continueExecution=function(){null!==n&&l()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(17))},function(e,t){},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){var i=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(e,t,n,i){var r=t&&t.prototype instanceof v?t:v,a=Object.create(r.prototype),o=new T(i||[]);return a._invoke=function(e,t,n){var i=c;return function(r,a){if(i===h)throw new Error("Generator is already running");if(i===d){if("throw"===r)throw a;return j()}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=P(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===c)throw i=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var u=l(e,t,n);if("normal"===u.type){if(i=n.done?d:f,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=d,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c="suspendedStart",f="suspendedYield",h="executing",d="completed",p={};function v(){}function g(){}function m(){}var y={};y[a]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(S([])));_&&_!==n&&i.call(_,a)&&(y=_);var w=m.prototype=v.prototype=Object.create(y);function x(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function k(e){var t;this._invoke=function(n,r){function a(){return new Promise(function(t,a){!function t(n,r,a,o){var s=l(e[n],e,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,a,o)},function(e){t("throw",e,a,o)}):Promise.resolve(c).then(function(e){u.value=e,a(u)},function(e){return t("throw",e,a,o)})}o(s.arg)}(n,r,t,a)})}return t=t?t.then(a,a):a()}}function P(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=l(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,p;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function S(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:j}}function j(){return{value:t,done:!0}}return g.prototype=w.constructor=m,m.constructor=g,m[s]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},x(k.prototype),k.prototype[o]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,i,r){var a=new k(u(t,n,i,r));return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},x(w),w[s]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=S,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:S(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=i}catch(e){Function("r","regeneratorRuntime = r")(i)}},function(e,t,n){"use strict";var i=n(60);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){var i;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(r,a,o,s){"use strict";var u,l=["","webkit","Moz","MS","ms","o"],c=a.createElement("div"),f="function",h=Math.round,d=Math.abs,p=Date.now;function v(e,t,n){return setTimeout(x(e,n),t)}function g(e,t,n){return!!Array.isArray(e)&&(m(e,n[t],n),!0)}function m(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function y(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=r.console&&(r.console.warn||r.console.log);return a&&a.call(r.console,i,n),e.apply(this,arguments)}}u="function"!=typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==s&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var b=y(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===s)&&(e[i[r]]=t[i[r]]),r++;return e},"extend","Use `assign`."),_=y(function(e,t){return b(e,t,!0)},"merge","Use `assign`.");function w(e,t,n){var i,r=t.prototype;(i=e.prototype=Object.create(r)).constructor=e,i._super=r,n&&u(i,n)}function x(e,t){return function(){return e.apply(t,arguments)}}function k(e,t){return typeof e==f?e.apply(t&&t[0]||s,t):e}function P(e,t){return e===s?t:e}function O(e,t,n){m(j(t),function(t){e.addEventListener(t,n,!1)})}function E(e,t,n){m(j(t),function(t){e.removeEventListener(t,n,!1)})}function T(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function S(e,t){return e.indexOf(t)>-1}function j(e){return e.trim().split(/\s+/g)}function C(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function A(e){return Array.prototype.slice.call(e,0)}function L(e,t,n){for(var i=[],r=[],a=0;a<e.length;){var o=t?e[a][t]:e[a];C(r,o)<0&&i.push(e[a]),r[a]=o,a++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function M(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),a=0;a<l.length;){if((i=(n=l[a])?n+r:t)in e)return i;a++}return s}var F=1;function I(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||r}var R="ontouchstart"in r,N=M(r,"PointerEvent")!==s,D=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B=25,z=1,U=2,V=4,G=8,W=1,H=2,X=4,q=8,Y=16,Z=H|X,Q=q|Y,K=Z|Q,$=["x","y"],J=["clientX","clientY"];function ee(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){k(e.options.enable,[e])&&n.handler(t)},this.init()}function te(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,a=t&z&&i-r==0,o=t&(V|G)&&i-r==0;n.isFirst=!!a,n.isFinal=!!o,a&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=ne(t));r>1&&!n.firstMultiple?n.firstMultiple=ne(t):1===r&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,u=o?o.center:a.center,l=t.center=ie(i);t.timeStamp=p(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=se(u,l),t.distance=oe(u,l),function(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},a=e.prevInput||{};t.eventType!==z&&a.eventType!==V||(r=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y});t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}(n,t),t.offsetDirection=ae(t.deltaX,t.deltaY);var c=re(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=d(c.x)>d(c.y)?c.x:c.y,t.scale=o?(f=o.pointers,h=i,oe(h[0],h[1],J)/oe(f[0],f[1],J)):1,t.rotation=o?function(e,t){return se(t[1],t[0],J)+se(e[1],e[0],J)}(o.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,r,a,o=e.lastInterval||t,u=t.timeStamp-o.timeStamp;if(t.eventType!=G&&(u>B||o.velocity===s)){var l=t.deltaX-o.deltaX,c=t.deltaY-o.deltaY,f=re(u,l,c);i=f.x,r=f.y,n=d(f.x)>d(f.y)?f.x:f.y,a=ae(l,c),e.lastInterval=t}else n=o.velocity,i=o.velocityX,r=o.velocityY,a=o.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=a}(n,t);var f,h;var v=e.element;T(t.srcEvent.target,v)&&(v=t.srcEvent.target);t.target=v}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function ne(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:h(e.pointers[n].clientX),clientY:h(e.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:t,center:ie(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ie(e){var t=e.length;if(1===t)return{x:h(e[0].clientX),y:h(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:h(n/t),y:h(i/t)}}function re(e,t,n){return{x:t/e||0,y:n/e||0}}function ae(e,t){return e===t?W:d(e)>=d(t)?e<0?H:X:t<0?q:Y}function oe(e,t,n){n||(n=$);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function se(e,t,n){n||(n=$);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}ee.prototype={handler:function(){},init:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(I(this.element),this.evWin,this.domHandler)}};var ue={mousedown:z,mousemove:U,mouseup:V},le="mousedown",ce="mousemove mouseup";function fe(){this.evEl=le,this.evWin=ce,this.pressed=!1,ee.apply(this,arguments)}w(fe,ee,{handler:function(e){var t=ue[e.type];t&z&&0===e.button&&(this.pressed=!0),t&U&&1!==e.which&&(t=V),this.pressed&&(t&V&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var he={pointerdown:z,pointermove:U,pointerup:V,pointercancel:G,pointerout:G},de={2:"touch",3:"pen",4:"mouse",5:"kinect"},pe="pointerdown",ve="pointermove pointerup pointercancel";function ge(){this.evEl=pe,this.evWin=ve,ee.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(pe="MSPointerDown",ve="MSPointerMove MSPointerUp MSPointerCancel"),w(ge,ee,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=he[i],a=de[e.pointerType]||e.pointerType,o="touch"==a,s=C(t,e.pointerId,"pointerId");r&z&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):r&(V|G)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(s,1))}});var me={touchstart:z,touchmove:U,touchend:V,touchcancel:G},ye="touchstart",be="touchstart touchmove touchend touchcancel";function _e(){this.evTarget=ye,this.evWin=be,this.started=!1,ee.apply(this,arguments)}w(_e,ee,{handler:function(e){var t=me[e.type];if(t===z&&(this.started=!0),this.started){var n=function(e,t){var n=A(e.touches),i=A(e.changedTouches);t&(V|G)&&(n=L(n.concat(i),"identifier",!0));return[n,i]}.call(this,e,t);t&(V|G)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var we={touchstart:z,touchmove:U,touchend:V,touchcancel:G},xe="touchstart touchmove touchend touchcancel";function ke(){this.evTarget=xe,this.targetIds={},ee.apply(this,arguments)}w(ke,ee,{handler:function(e){var t=we[e.type],n=function(e,t){var n=A(e.touches),i=this.targetIds;if(t&(z|U)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,a,o=A(e.changedTouches),s=[],u=this.target;if(a=n.filter(function(e){return T(e.target,u)}),t===z)for(r=0;r<a.length;)i[a[r].identifier]=!0,r++;r=0;for(;r<o.length;)i[o[r].identifier]&&s.push(o[r]),t&(V|G)&&delete i[o[r].identifier],r++;if(!s.length)return;return[L(a.concat(s),"identifier",!0),s]}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var Pe=2500,Oe=25;function Ee(){ee.apply(this,arguments);var e=x(this.handler,this);this.touch=new ke(this.manager,e),this.mouse=new fe(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Te(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)},Pe)}}w(Ee,ee,{handler:function(e,t,n){var i="touch"==n.pointerType,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)(function(e,t){e&z?(this.primaryTouch=t.changedPointers[0].identifier,Te.call(this,t)):e&(V|G)&&Te.call(this,t)}).call(this,t,n);else if(r&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],a=Math.abs(t-r.x),o=Math.abs(n-r.y);if(a<=Oe&&o<=Oe)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Se=M(c.style,"touchAction"),je=Se!==s,Ce="auto",Ae="manipulation",Le="none",Me="pan-x",Fe="pan-y",Ie=function(){if(!je)return!1;var e={},t=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||r.CSS.supports("touch-action",n)}),e}();function Re(e,t){this.manager=e,this.set(t)}Re.prototype={set:function(e){"compute"==e&&(e=this.compute()),je&&this.manager.element.style&&Ie[e]&&(this.manager.element.style[Se]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return m(this.manager.recognizers,function(t){k(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(S(e,Le))return Le;var t=S(e,Me),n=S(e,Fe);if(t&&n)return Le;if(t||n)return t?Me:Fe;if(S(e,Ae))return Ae;return Ce}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,r=S(i,Le)&&!Ie[Le],a=S(i,Fe)&&!Ie[Fe],o=S(i,Me)&&!Ie[Me];if(r){var s=1===e.pointers.length,u=e.distance<2,l=e.deltaTime<250;if(s&&u&&l)return}if(!o||!a)return r||a&&n&Z||o&&n&Q?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ne=1,De=2,Be=4,ze=8,Ue=ze,Ve=16;function Ge(e){this.options=u({},this.defaults,e||{}),this.id=F++,this.manager=null,this.options.enable=P(this.options.enable,!0),this.state=Ne,this.simultaneous={},this.requireFail=[]}function We(e){return e&Ve?"cancel":e&ze?"end":e&Be?"move":e&De?"start":""}function He(e){return e==Y?"down":e==q?"up":e==H?"left":e==X?"right":""}function Xe(e,t){var n=t.manager;return n?n.get(e):e}function qe(){Ge.apply(this,arguments)}function Ye(){qe.apply(this,arguments),this.pX=null,this.pY=null}function Ze(){qe.apply(this,arguments)}function Qe(){Ge.apply(this,arguments),this._timer=null,this._input=null}function Ke(){qe.apply(this,arguments)}function $e(){qe.apply(this,arguments)}function Je(){Ge.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function et(e,t){return(t=t||{}).recognizers=P(t.recognizers,et.defaults.preset),new tt(e,t)}Ge.prototype={defaults:{},set:function(e){return u(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(g(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Xe(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return g(e,"dropRecognizeWith",this)?this:(e=Xe(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(g(e,"requireFailure",this))return this;var t=this.requireFail;return-1===C(t,e=Xe(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(g(e,"dropRequireFailure",this))return this;e=Xe(e,this);var t=C(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function i(n){t.manager.emit(n,e)}n<ze&&i(t.options.event+We(n)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),n>=ze&&i(t.options.event+We(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Ne)))return!1;e++}return!0},recognize:function(e){var t=u({},e);if(!k(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(Ue|Ve|32)&&(this.state=Ne),this.state=this.process(t),this.state&(De|Be|ze|Ve)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},w(qe,Ge,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(De|Be),r=this.attrTest(e);return i&&(n&G||!r)?t|Ve:i||r?n&V?t|ze:t&De?t|Be:De:32}}),w(Ye,qe,{defaults:{event:"pan",threshold:10,pointers:1,direction:K},getTouchAction:function(){var e=this.options.direction,t=[];return e&Z&&t.push(Fe),e&Q&&t.push(Me),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,a=e.deltaX,o=e.deltaY;return r&t.direction||(t.direction&Z?(r=0===a?W:a<0?H:X,n=a!=this.pX,i=Math.abs(e.deltaX)):(r=0===o?W:o<0?q:Y,n=o!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return qe.prototype.attrTest.call(this,e)&&(this.state&De||!(this.state&De)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=He(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),w(Ze,qe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Le]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&De)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),w(Qe,Ge,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ce]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(V|G)&&!r)this.reset();else if(e.eventType&z)this.reset(),this._timer=v(function(){this.state=Ue,this.tryEmit()},t.time,this);else if(e.eventType&V)return Ue;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Ue&&(e&&e.eventType&V?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),w(Ke,qe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Le]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&De)}}),w($e,qe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Z|Q,pointers:1},getTouchAction:function(){return Ye.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Z|Q)?t=e.overallVelocity:n&Z?t=e.overallVelocityX:n&Q&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&e.eventType&V},emit:function(e){var t=He(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),w(Je,Ge,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ae]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&z&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=V)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||oe(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&a?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=v(function(){this.state=Ue,this.tryEmit()},t.interval,this),De):Ue}return 32},failTimeout:function(){return this._timer=v(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ue&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),et.VERSION="2.0.7",et.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Ke,{enable:!1}],[Ze,{enable:!1},["rotate"]],[$e,{direction:Z}],[Ye,{direction:Z},["swipe"]],[Je],[Je,{event:"doubletap",taps:2},["tap"]],[Qe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function tt(e,t){var n;this.options=u({},et.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(N?ge:D?ke:R?Ee:fe))(n,te),this.touchAction=new Re(this,this.options.touchAction),nt(this,!0),m(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function nt(e,t){var n,i=e.element;i.style&&(m(e.options.cssProps,function(r,a){n=M(i.style,a),t?(e.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={}))}tt.prototype={set:function(e){return u(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&Ue)&&(r=t.curRecognizer=null);for(var a=0;a<i.length;)n=i[a],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(De|Be|ze)&&(r=t.curRecognizer=n),a++}},get:function(e){if(e instanceof Ge)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(g(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(g(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=C(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return m(j(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==s){var n=this.handlers;return m(j(e),function(e){t?n[e]&&n[e].splice(C(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=a.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&nt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(et,{INPUT_START:z,INPUT_MOVE:U,INPUT_END:V,INPUT_CANCEL:G,STATE_POSSIBLE:Ne,STATE_BEGAN:De,STATE_CHANGED:Be,STATE_ENDED:ze,STATE_RECOGNIZED:Ue,STATE_CANCELLED:Ve,STATE_FAILED:32,DIRECTION_NONE:W,DIRECTION_LEFT:H,DIRECTION_RIGHT:X,DIRECTION_UP:q,DIRECTION_DOWN:Y,DIRECTION_HORIZONTAL:Z,DIRECTION_VERTICAL:Q,DIRECTION_ALL:K,Manager:tt,Input:ee,TouchAction:Re,TouchInput:ke,MouseInput:fe,PointerEventInput:ge,TouchMouseInput:Ee,SingleTouchInput:_e,Recognizer:Ge,AttrRecognizer:qe,Tap:Je,Pan:Ye,Swipe:$e,Pinch:Ze,Rotate:Ke,Press:Qe,on:O,off:E,each:m,merge:_,extend:b,assign:u,inherit:w,bindFn:x,prefixed:M}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=et,(i=function(){return et}.call(t,n,t,e))===s||(e.exports=i)}(window,document)},function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),a=n(32),o=n(1),s=n(2),u=n(3);function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!==Object(u.a)(t)&&"function"!=typeof t?l(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g={LNGLAT:1,LNGLAT_DEPRECATED:5,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0},m={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},y=n(16),b=n(7),_=n(4),w=n(0),x=n(28),k="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",P=Object(x.a)();var O=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(o.a)(this,e),this.storage=function(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(e){return null}}(i),this.id=t,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return Object(s.a)(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}]),e}();function E(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,r=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>i&&(n=Math.min(n,i/e.width));var a=e.width*n,o=e.height*n,s=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(a,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}var T={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function S(e){return"string"==typeof e?T[e.toUpperCase()]||T.WHITE:e}function j(e,t){if(!e)throw new Error(t||"Assertion failed")}var C=n(10);function A(){var e;if(P&&C.b.performance)e=C.b.performance.now();else if(C.a.hrtime){var t=C.a.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}var L={debug:P&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},M={enabled:!1,priority:0};function F(){}var I={};var R=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;Object(o.a)(this,e),this.id=t,this.VERSION=k,this._startTs=A(),this._deltaTs=A(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new O("__probe-".concat(this.id,"__"),M),this.userData={},this.timeStamp("".concat(this.id," started")),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],n=Object.getPrototypeOf(e),i=Object.getOwnPropertyNames(n),r=!0,a=!1,o=void 0;try{for(var s,u=function(){var n=s.value;"function"==typeof e[n]&&(t.find(function(e){return n===e})||(e[n]=e[n].bind(e)))},l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)u()}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}(this),Object.seal(this)}return Object(s.a)(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getPriority",value:function(){return this._storage.config.priority}},{key:"getLevel",value:function(){return this._storage.config.priority}},{key:"getTotal",value:function(){return Number((A()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((A()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({priority:e}),this}},{key:"assert",value:function(e,t){j(e,t)}},{key:"warn",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this._getLogFunction({message:e,args:n,method:L.warn,once:!0})}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this._getLogFunction({message:e,args:n,method:L.error})}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this._getLogFunction({priority:e,message:t,args:i,method:L.log,time:!0,once:!0})}},{key:"log",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this._getLogFunction({priority:e,message:t,args:i,method:L.debug})}},{key:"info",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this._getLogFunction({priority:e,message:t,args:i,method:console.info})}},{key:"once",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this._getLogFunction({priority:e,message:t,args:i,method:L.debug||L.info,once:!0})}},{key:"table",value:function(e,t,n){if(t){var i=function(e){for(var t in e)for(var n in e[t])return n||"untitled";return"empty"}(t);return this._getLogFunction({priority:e,message:t,args:n&&[n],tag:i,method:console.table||F})}return F}},{key:"image",value:function(e){var t=e.priority,n=e.image,i=e.message,r=void 0===i?"":i,a=e.scale,o=void 0===a?1:a;return t>this.getPriority()?F:P?this._logImageInBrowser({image:n,message:r,scale:o}):this._logImageInNode({image:n,message:r,scale:o})}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,t){this._storage.updateConfiguration(Object(w.a)({},e,t))}},{key:"_logImageInNode",value:function(e){var t=e.image,i=(e.message,e.scale),r=void 0===i?1:i,a=null;try{a=n(56)}catch(e){}return a?function(){return a(t,{fit:"box",width:"".concat(Math.round(80*r),"%")}).then(function(e){return console.log(e)})}:F}},{key:"_logImageInBrowser",value:function(e){var t=e.image,n=e.message,i=void 0===n?"":n,r=e.scale,a=void 0===r?1:r;if("string"==typeof t){var o=new Image;return o.onload=function(){var e,t=E(o,i,a);(e=console).log.apply(e,Object(_.a)(t))},o.src=t,F}var s,u=t.nodeName||"";if("img"===u.toLowerCase())return(s=console).log.apply(s,Object(_.a)(E(t,i,a))),F;if("canvas"===u.toLowerCase()){var l=new Image;return l.onload=function(){var e;return(e=console).log.apply(e,Object(_.a)(E(l,i,a)))},l.src=t.toDataURL(),F}return F}},{key:"time",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeStamp||F})}},{key:"group",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},i=n=this._normalizeArguments({priority:e,message:t,opts:n}),r=i.collapsed;return this._getLogFunction({priority:e,message:t,opts:n,method:(r?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction({priority:e,message:"",method:console.groupEnd||F})}},{key:"withGroup",value:function(e,t,n){var i=this._normalizeArguments({priority:e,message:t});this.group(i);try{n()}finally{this.groupEnd(i.message)}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return 0===(e=this._normalizePriority(e))||this.isEnabled()&&this.getPriority()>=e}},{key:"_getElapsedTime",value:function(){var e=this.getTotal(),t=this.getDelta();return this._deltaTs=A(),{total:e,delta:t}}},{key:"_getLogFunction",value:function(e){if(this._shouldLog(e.priority)){var t=e.method;e=this._parseArguments(e),j(t);var n=e.message,i=e.tag||e.message;if(e.once){if(I[i])return F;I[i]=A()}return n=this._decorateMessage(n,e),t.bind.apply(t,[console,n].concat(Object(_.a)(e.args)))}return F}},{key:"_parseArguments",value:function(e){var t=this._normalizeArguments(e),n=this._getElapsedTime(),i=n.delta,r=n.total;return Object.assign(e,t,{delta:i,total:r})}},{key:"_normalizePriority",value:function(e){var t;switch(Object(u.a)(e)){case"number":t=e;break;case"object":t=e.priority||0;break;default:t=0}return j(Number.isFinite(t)&&t>=0),t}},{key:"_normalizeArguments",value:function(e){var t=e.priority,n=e.message,i=e.args,r=void 0===i?[]:i,a=e.opts,o={priority:this._normalizePriority(t),message:n,args:r};switch(Object(u.a)(t)){case"string":case"function":void 0!==n&&r.unshift(n),Object.assign(o,{message:t});break;case"object":Object.assign(o,t)}return"function"==typeof o.message&&(o.message=this._shouldLog(o.priority)?o.message():""),j("string"==typeof o.message||"object"===Object(u.a)(o.message)),Object.assign(o,a)}},{key:"_decorateMessage",value:function(e,t){if("string"==typeof e){var n="";if(t.time){var i=this._getElapsedTime().total;n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}((s=i)<10?"".concat(s.toFixed(2),"ms"):s<100?"".concat(s.toFixed(1),"ms"):s<1e3?"".concat(s.toFixed(0),"ms"):"".concat((s/1e3).toFixed(2),"s"))}e=t.time?"".concat(this.id,": ").concat(n,"  ").concat(e):"".concat(this.id,": ").concat(e),r=e,a=t.color,o=t.background,P||"string"!=typeof r||(a&&(a=S(a),r="[".concat(a,"m").concat(r,"[39m")),o&&(a=S(o),r="[".concat(o+10,"m").concat(r,"[49m"))),e=r}var r,a,o,s;return e}},{key:"priority",set:function(e){return this._storage.updateConfiguration({priority:e}),this},get:function(){return this._storage.config.priority}}]),e}();R.VERSION=k;var N=new R({id:"luma"}).enable(),D=function(){function e(t){Object(o.a)(this,e),this.name=t,this.reset()}return Object(s.a)(e,[{key:"incrementCount",value:function(){this.addCount(1)}},{key:"decrementCount",value:function(){this.subtractCount(1)}},{key:"addCount",value:function(e){this.count+=e}},{key:"subtractCount",value:function(e){this.count-=e}},{key:"addTime",value:function(e){this.time+=e,this.lastTiming=e,this.count++}},{key:"timeStart",value:function(){this._startTime=A(),this._timerPending=!0}},{key:"timeEnd",value:function(){this._timerPending&&(this.addTime(A()-this._startTime),this._timerPending=!1)}},{key:"getAverageTime",value:function(){return this.count>0?this.time/this.count:0}},{key:"getHz",value:function(){return this.time>0?this.count/(this.time/1e3):0}},{key:"reset",value:function(){this.time=0,this.count=0,this.lastTiming=0,this._startTime=0,this._timerPending=!1}}]),e}(),B=function(){function e(t){var n=t.id;Object(o.a)(this,e),this.id=n,this.stats={},Object.seal(this)}return Object(s.a)(e,[{key:"get",value:function(e){return this.stats[e]=this.stats[e]||new D(e),this.stats[e]}},{key:"reset",value:function(){for(var e in this.stats)this.stats[e].reset();return this}},{key:"forEach",value:function(e){for(var t in this.stats)e(this.stats[t])}},{key:"getTable",value:function(){var e={};return this.forEach(function(t){e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}}]),e}(),z=(n(26),new(function(){function e(){Object(o.a)(this,e),this.stats=new Map}return Object(s.a)(e,[{key:"get",value:function(e){return this.stats.has(e)||this.stats.set(e,new B({id:e})),this.stats.get(e)}}]),e}()));if(b.a.luma&&"7.1.0"!==b.a.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(b.a.luma.VERSION," vs ").concat("7.1.0"));b.a.luma||(y.a&&N.log(1,"luma.gl ".concat("7.1.0"," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),b.a.luma=b.a.luma||{VERSION:"7.1.0",version:"7.1.0",log:N,stats:z,globals:{modules:{},nodeIO:{}}});b.a.luma;var U=n(12);function V(e){return Array.isArray(e)||ArrayBuffer.isView(e)}var G={framebuffer:function(e,t){var n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:function(e,t){return t?e.enable(3042):e.disable(3042)},blendColor:function(e,t){return e.blendColor.apply(e,Object(_.a)(t))},blendEquation:function(e,t){t=V(t)?t:[t,t],e.blendEquationSeparate.apply(e,Object(_.a)(t))},blendFunc:function(e,t){t=V(t)&&2===t.length?[].concat(Object(_.a)(t),Object(_.a)(t)):t,e.blendFuncSeparate.apply(e,Object(_.a)(t))},clearColor:function(e,t){return e.clearColor.apply(e,Object(_.a)(t))},clearDepth:function(e,t){return e.clearDepth(t)},clearStencil:function(e,t){return e.clearStencil(t)},colorMask:function(e,t){return e.colorMask.apply(e,Object(_.a)(t))},cull:function(e,t){return t?e.enable(2884):e.disable(2884)},cullFace:function(e,t){return e.cullFace(t)},depthTest:function(e,t){return t?e.enable(2929):e.disable(2929)},depthFunc:function(e,t){return e.depthFunc(t)},depthMask:function(e,t){return e.depthMask(t)},depthRange:function(e,t){return e.depthRange.apply(e,Object(_.a)(t))},dither:function(e,t){return t?e.enable(3024):e.disable(3024)},derivativeHint:function(e,t){e.hint(35723,t)},frontFace:function(e,t){return e.frontFace(t)},mipmapHint:function(e,t){return e.hint(33170,t)},lineWidth:function(e,t){return e.lineWidth(t)},polygonOffsetFill:function(e,t){return t?e.enable(32823):e.disable(32823)},polygonOffset:function(e,t){return e.polygonOffset.apply(e,Object(_.a)(t))},sampleCoverage:function(e,t){return e.sampleCoverage.apply(e,Object(_.a)(t))},scissorTest:function(e,t){return t?e.enable(3089):e.disable(3089)},scissor:function(e,t){return e.scissor.apply(e,Object(_.a)(t))},stencilTest:function(e,t){return t?e.enable(2960):e.disable(2960)},stencilMask:function(e,t){var n=v(t=V(t)?t:[t,t],2),i=n[0],r=n[1];e.stencilMaskSeparate(1028,i),e.stencilMaskSeparate(1029,r)},stencilFunc:function(e,t){var n=v(t=V(t)&&3===t.length?[].concat(Object(_.a)(t),Object(_.a)(t)):t,6),i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],u=n[5];e.stencilFuncSeparate(1028,i,r,a),e.stencilFuncSeparate(1029,o,s,u)},stencilOp:function(e,t){var n=v(t=V(t)&&3===t.length?[].concat(Object(_.a)(t),Object(_.a)(t)):t,6),i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],u=n[5];e.stencilOpSeparate(1028,i,r,a),e.stencilOpSeparate(1029,o,s,u)},viewport:function(e,t){return e.viewport.apply(e,Object(_.a)(t))}};function W(e,t){for(var n in Object(U.c)(e,t),t){var i=G[n];i&&i(e,t[n],n)}}var H=n(13),X=n(11);function q(e,t,n){if(Object(X.b)(t))return n(e);var i,r=t.nocatch,a=void 0===r||r;if(Object(X.a)(!t.frameBuffer),Object(H.c)(e),W(e,t),a)i=n(e),Object(H.b)(e);else try{i=n(e)}finally{Object(H.b)(e)}return i}var Y=n(5);function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){Object(w.a)(e,t,n[t])})}return e}var Q="Failed to create WebGL context in Node.js, headless gl not available",K="Failed to create WebGL context in Node.js, headless gl returned null";function $(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}var J={};function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";J[e]=J[e]||1;var t=J[e]++;return"".concat(e,"-").concat(t)}function te(e){return $("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)}function ne(e){var t=!0;for(var n in e){t=!1;break}return t}function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isInteger,i=void 0!==n&&n;if(Array.isArray(e)||ArrayBuffer.isView(e))return function(e,t){for(var n=t.maxElts,i=void 0===n?16:n,r=t.size,a=void 0===r?1:r,o="[",s=0;s<e.length&&s<i;++s)s>0&&(o+=",".concat(s%a==0?" ":"")),o+=ie(e[s],t);var u=e.length>i?"...":"]";return"".concat(o).concat(u)}(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<1e-16)return i?"0":"0.";if(i)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var r=e.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function re(e,t,n,i){var r="See luma.gl ".concat(n," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),a=Object.getPrototypeOf(e);i.forEach(function(e){a.methodName||(a[e]=function(){throw N.removed("Calling removed method ".concat(t,".").concat(e,": "),r)(),new Error(e)})})}function ae(e,t,n){var i=n.removedProps,r=void 0===i?{}:i,a=n.deprecatedProps,o=void 0===a?{}:a,s=n.replacedProps,u=void 0===s?{}:s;for(var l in r)if(l in t){var c=r[l]?"".concat(e,".").concat(r[l]):"N/A";N.removed("".concat(e,".").concat(l),c)()}for(var f in o)if(f in t){var h=o[f];N.deprecated("".concat(e,".").concat(f),"".concat(e,".").concat(h))()}var d=null;for(var p in u)if(p in t){var v=u[p];N.deprecated("".concat(e,".").concat(p),"".concat(e,".").concat(v))(),(d=d||Object.assign({},t))[v]=t[p],delete d[p]}return d||t}var oe,se=y.a&&"undefined"!=typeof document,ue=se&&"complete"===document.readyState;function le(){return oe||(oe=se?new Promise(function(e,t){if(se&&"complete"===document.readyState)return ue=!0,void e(document);window.onload=function(){ue=!0,e(document)}}):Promise.resolve({})),oe}function ce(e){var t,n=e.canvas,i=e.width,r=e.height,a=e.onError,o=void 0===a?function(){}:a;return"string"==typeof n?(ue||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)):t=n||function(e){var t=e.width,n=void 0===t?800:t,i=e.height,r=void 0===i?600:i,a=e.id,o=void 0===a?"gl-canvas":a,s=e.insert,u=void 0===s||s,l=document.createElement("canvas");if(l.id=o,l.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",l.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",u){var c=document.body;c.insertBefore(l,c.firstChild)}return l}({id:"lumagl-canvas",width:i,height:r,onError:o}),t}function fe(e){var t=e.getParameter(7936),n=e.getParameter(7937),i=e.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&e.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:i&&e.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}var he="Invalid WebGLRenderingContext",de="Requires WebGL2";function pe(e){return Boolean(e&&Number.isFinite(e._version))}function ve(e){return Boolean(e&&2===e._version)}function ge(e){$(pe(e),he)}function me(e){$(ve(e),de)}function ye(e){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function be(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}var _e="Failed to deduce GL constant from typed array";function we(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(_e)}}function xe(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,n=void 0===t||t;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function ke(e){for(var t=e.data,n=e.width,i=e.height,r=Math.round(n/2),a=Math.round(i/2),o=new Uint8Array(r*a*4),s=0;s<a;s++)for(var u=0;u<r;u++)for(var l=0;l<4;l++)o[4*(s*r+u)+l]=t[4*(2*s*n+2*u)+l];return{data:o,width:r,height:a}}function Pe(e,t){if("string"!=typeof t)return t;var n=Number(t);if(!isNaN(n))return n;var i=e[t=t.replace(/^.*\./,"")];return $(void 0!==i,"Accessing undefined constant GL.".concat(t)),i}function Oe(e,t){for(var n in t=Number(t),e)if(e[n]===t)return"GL.".concat(n);return String(t)}var Ee="Resource subclass must define virtual methods",Te=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e),ge(t);var i=n.id,r=n.userData,a=void 0===r?{}:r;this.gl=t,this.id=i||ee(this.constructor.name),this.userData=a,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Object(s.a)(e,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteChildren,n=void 0!==t&&t,i=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,i&&n&&i.filter(Boolean).forEach(function(e){e.delete()}),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$(e=Pe(this.gl,e));var n=this.constructor.PARAMETERS||{},i=n[e];if(i){var r=ve(this.gl),a=(!("webgl2"in i)||r)&&(!("extension"in i)||this.gl.getExtension(i.extension));if(!a){var o=i.webgl1,s="webgl2"in i?i.webgl2:i.webgl1,u=r?s:o;return u}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=t.parameters,i=t.keys,r=this.constructor.PARAMETERS||{},a=ve(this.gl),o={},s=n||Object.keys(r),u=!0,l=!1,c=void 0;try{for(var f,h=s[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value,p=r[d],v=p&&(!("webgl2"in p)||a)&&(!("extension"in p)||this.gl.getExtension(p.extension));if(v){var g=i?Oe(this.gl,d):d;o[g]=this.getParameter(d,e),i&&"GLenum"===p.type&&(o[g]=Oe(this.gl,o[g]))}}}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}return o}},{key:"setParameter",value:function(e,t){$(e=Pe(this.gl,e));var n=(this.constructor.PARAMETERS||{})[e];if(n){var i=ve(this.gl);if(!((!("webgl2"in n)||i)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=Pe(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,n){return re(this,e,t,n)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(Ee)}},{key:"_deleteHandle",value:function(){throw new Error(Ee)}},{key:"_bindHandle",value:function(){throw new Error(Ee)}},{key:"_getOptsFromHandle",value:function(){throw new Error(Ee)}},{key:"_getParameter",value:function(e,t){throw new Error(Ee)}},{key:"_setParameter",value:function(e,t){throw new Error(Ee)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=z.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var e=this.constructor.name;z.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,n=z.get("Memory Usage");n.get("GPU Memory").addCount(e),n.get("".concat(t," Memory")).addCount(e),this.byteLength=e}},{key:"_trackDeallocatedMemory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,t=z.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),e}();function Se(e,t,n){return(Se=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&h(r,n.prototype),r}).apply(null,arguments)}var je,Ce,Ae,Le={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Me={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},Fe=function(){function e(){var t=this;Object(o.a)(this,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];i.forEach(function(e){return t._assign(e)}),Object.freeze(this)}return Object(s.a)(e,null,[{key:"getBytesPerElement",value:function(e){return xe(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){return $(e.size),xe(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Se(e,[Le].concat(n))}}]),Object(s.a)(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(e=ae("Accessor",e,Me)).type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"==typeof index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}}]),e}(),Ie={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Re={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Ie},Ne={removedProps:Ie},De=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),(n=c(this,f(t).call(this,e,i))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),n.target=i.target||(n.gl.webgl2?36662:34962),n.initialize(i),Object.seal(l(n)),n}return d(t,Te),Object(s.a)(t,[{key:"getElementCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Fe.getBytesPerElement(e))}},{key:"getVertexCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Fe.getBytesPerVertex(e))}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=ae("Buffer",e,Re),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data):this._setByteLength(e.byteLength||0),this}},{key:"setProps",value:function(e){return"accessor"in(e=ae("Buffer",e,Ne))&&this.setAccessor(e.accessor),this}},{key:"setAccessor",value:function(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new Fe(e),this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,n=t.data,i=t.offset,r=void 0===i?0:i,a=t.srcOffset,o=void 0===a?0:a,s=e.byteLength||e.length;$(n);var u=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(u,this.handle),0!==o||void 0!==s?(me(this.gl),this.gl.bufferSubData(this.target,r,n,o,s)):this.gl.bufferSubData(u,r,n),this.gl.bindBuffer(u,null),this.debugData=null,this._inferType(n),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,n=e.readOffset,i=void 0===n?0:n,r=e.writeOffset,a=void 0===r?0:r,o=e.size,s=this.gl;return me(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,i,a,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,n=void 0===t?null:t,i=e.srcByteOffset,r=void 0===i?0:i,a=e.dstOffset,o=void 0===a?0:a,s=e.length,u=void 0===s?0:s;me(this.gl);var l,c,f=xe(this.accessor.type||5126,{clamped:!1}),h=this._getAvailableElementCount(r),d=o;n?l=(c=n.length)-d:c=d+(l=Math.min(h,u||h));var p=Math.min(h,l);return $((u=u||p)<=p),n=n||new f(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,n,o,u),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,i=e.index,r=void 0===i?this.accessor&&this.accessor.index:i,a=e.offset,o=void 0===a?0:a,s=e.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,r,this.handle,o,s):($(0===o),this.gl.bindBufferBase(n,r,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,i=e.index,r=void 0===i?this.accessor&&this.accessor.index:i,a=35345===n||35982===n;return a?this.gl.bindBufferBase(n,r,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:10}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;$(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();var n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,e,t),this.gl.bindBuffer(n,null),this.usage=t,this.debugData=e.slice(0,10),this.bytesUsed=e.byteLength,this._trackAllocatedMemory(e.byteLength);var i=we(e);return $(i),this.setAccessor(new Fe(this.accessor,{type:i})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;$(e>=0),this._trackDeallocatedMemory();var n=e;0===e&&(n=new Float32Array(0));var i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,t),this.gl.bindBuffer(i,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=e/xe(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_inferType",value:function(e){this.accessor.type||this.setAccessor(new Fe(this.accessor,{type:we(e)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"setByteLength",value:function(e){return N.deprecated("setByteLength","reallocate")(),this.reallocate(e)}},{key:"updateAccessor",value:function(e){return N.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Fe(this.accessor,e),this}},{key:"type",get:function(){return N.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return N.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),t}(),Be=(je={},Object(w.a)(je,6407,{dataFormat:6407,types:[5121,33635]}),Object(w.a)(je,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(w.a)(je,6406,{dataFormat:6406,types:[5121]}),Object(w.a)(je,6409,{dataFormat:6409,types:[5121]}),Object(w.a)(je,6410,{dataFormat:6410,types:[5121]}),Object(w.a)(je,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(w.a)(je,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(w.a)(je,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(w.a)(je,34836,{dataFormat:6408,types:[5126],gl2:!0}),je),ze=(Ce={},Object(w.a)(Ce,6403,1),Object(w.a)(Ce,36244,1),Object(w.a)(Ce,33319,2),Object(w.a)(Ce,33320,2),Object(w.a)(Ce,6407,3),Object(w.a)(Ce,36248,3),Object(w.a)(Ce,6408,4),Object(w.a)(Ce,36249,4),Object(w.a)(Ce,6402,1),Object(w.a)(Ce,34041,1),Object(w.a)(Ce,6406,1),Object(w.a)(Ce,6409,1),Object(w.a)(Ce,6410,2),Ce),Ue=(Ae={},Object(w.a)(Ae,5126,4),Object(w.a)(Ae,5125,4),Object(w.a)(Ae,5124,4),Object(w.a)(Ae,5123,2),Object(w.a)(Ae,5122,2),Object(w.a)(Ae,5131,2),Object(w.a)(Ae,5120,1),Object(w.a)(Ae,5121,1),Ae);function Ve(e,t){var n=Be[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var i=ve(e)&&n.gl2||n.gl1;return"string"==typeof i?e.getExtension(i):i}function Ge(e,t){var n=Be[t];switch(n&&n.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}var We=[9729,9728],He=function(e){function t(e,n){var i;Object(o.a)(this,t);var r=n.id,a=void 0===r?ee("texture"):r,s=n.handle,u=n.target;return(i=c(this,f(t).call(this,e,{id:a,handle:s}))).target=u,i.hasFloatTexture=e.getExtension("OES_texture_float"),i.textureUnit=void 0,i.loaded=!1,i.width=void 0,i.height=void 0,i.depth=void 0,i.format=void 0,i.type=void 0,i.dataFormat=void 0,i.border=void 0,i.textureUnit=void 0,i.mipmaps=void 0,i}return d(t,Te),Object(s.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,i=t.linearFiltering,r=!0;return n&&(r=(r=r&&Ve(e,n))&&(!i||Ge(e,n))),r}}]),Object(s.a)(t,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data;if(n instanceof Promise)return n.then(function(n){return e.initialize(Object.assign({},t,{pixels:n,data:n}))}),this;var i=t.pixels,r=void 0===i?null:i,a=t.format,o=void 0===a?6408:a,s=t.type,u=void 0===s?5121:s,l=t.border,c=void 0===l?0:l,f=t.recreate,h=void 0!==f&&f,d=t.parameters,p=void 0===d?{}:d,v=t.pixelStore,g=void 0===v?{}:v,m=t.textureUnit,y=void 0===m?void 0:m,b=t.unpackFlipY,_=void 0===b||b,x=t.mipmaps,k=void 0===x||x;n||(n=r);var P=t.width,O=t.height,E=t.dataFormat,T=t.depth,S=void 0===T?0:T,j=this._deduceParameters({format:o,type:u,dataFormat:E,compressed:!1,data:n,width:P,height:O});P=j.width,O=j.height,E=j.dataFormat,this.width=P,this.height=O,this.depth=S,this.format=o,this.type=u,this.dataFormat=E,this.border=c,this.textureUnit=y,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var C=Object(w.a)({},37440,_),A=Object.assign({},C,g);return k&&this._isNPOT()&&(N.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),k=!1,this._updateForNPOT(p)),this.mipmaps=k,this.setImageData({data:n,width:P,height:O,depth:S,format:o,type:u,dataFormat:E,border:c,mipmaps:k,parameters:A}),k&&this.generateMipmap(),this.setParameters(p),h&&(this.data=n),this}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),q(this.gl,t,function(){e.gl.generateMipmap(e.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(e){this._trackDeallocatedMemory("Texture");var t=e.target,n=void 0===t?this.target:t,i=e.pixels,r=void 0===i?null:i,a=e.level,o=void 0===a?0:a,s=e.format,u=void 0===s?this.format:s,l=e.border,c=void 0===l?this.border:l,f=e.offset,h=void 0===f?0:f,d=e.parameters,p=void 0===d?{}:d,v=e.data,g=void 0===v?null:v,m=e.type,y=void 0===m?this.type:m,b=e.width,_=void 0===b?this.width:b,w=e.height,x=void 0===w?this.height:w,k=e.dataFormat,P=void 0===k?this.dataFormat:k,O=e.compressed,E=void 0!==O&&O;g||(g=r);var T=this._deduceParameters({format:u,type:y,dataFormat:P,compressed:E,data:g,width:_,height:x});y=T.type,P=T.dataFormat,E=T.compressed,_=T.width,x=T.height;var S=this.gl;S.bindTexture(this.target,this.handle);var j,C=this._getDataType({data:g,compressed:E});if(g=C.data,j=C.dataType,q(this.gl,p,function(){switch(j){case"null":S.texImage2D(n,o,u,_,x,c,P,y,g);break;case"typed-array":S.texImage2D(n,o,u,_,x,c,P,y,g,h);break;case"buffer":me(S),S.bindBuffer(35052,g.handle||g),S.texImage2D(n,o,u,_,x,c,P,y,h),S.bindBuffer(35052,null);break;case"browser-object":ve(S)?S.texImage2D(n,o,u,_,x,c,P,y,g):S.texImage2D(n,o,u,P,y,g);break;case"compressed":S.compressedTexImage2D(n,o,u,_,x,c,g);break;default:$(!1,"Unknown image data type")}}),g&&g.byteLength)this._trackAllocatedMemory(g.byteLength,"Texture");else{var A=ze[this.dataFormat]||4,L=Ue[this.type]||1;this._trackAllocatedMemory(this.width*this.height*A*L,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(e){var t=this,n=e.target,i=void 0===n?this.target:n,r=e.pixels,a=void 0===r?null:r,o=e.data,s=void 0===o?null:o,u=e.x,l=void 0===u?0:u,c=e.y,f=void 0===c?0:c,h=e.width,d=void 0===h?this.width:h,p=e.height,v=void 0===p?this.height:p,g=e.level,m=void 0===g?0:g,y=e.format,b=void 0===y?this.format:y,_=e.type,w=void 0===_?this.type:_,x=e.dataFormat,k=void 0===x?this.dataFormat:x,P=e.compressed,O=void 0!==P&&P,E=e.offset,T=void 0===E?0:E,S=e.border,j=(void 0===S&&this.border,e.parameters),C=void 0===j?{}:j,A=this._deduceParameters({format:b,type:w,dataFormat:k,compressed:O,data:s,width:d,height:v});if(w=A.type,k=A.dataFormat,O=A.compressed,d=A.width,v=A.height,$(0===this.depth,"texSubImage not supported for 3D textures"),s||(s=a),s&&s.data){var L=s;s=L.data,d=L.shape[0],v=L.shape[1]}s instanceof De&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),q(this.gl,C,function(){O?t.gl.compressedTexSubImage2D(i,m,l,f,d,v,b,s):null===s?t.gl.texSubImage2D(i,m,l,f,d,v,k,w,null):ArrayBuffer.isView(s)?t.gl.texSubImage2D(i,m,l,f,d,v,k,w,s,T):s instanceof Y.b?(me(t.gl),t.gl.bindBuffer(35052,s),t.gl.texSubImage2D(i,m,l,f,d,v,k,w,T),t.gl.bindBuffer(35052,null)):ve(t.gl)?t.gl.texSubImage2D(i,m,l,f,d,v,k,w,s):t.gl.texSubImage2D(i,m,l,f,k,w,s)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}},{key:"_getDataType",value:function(e){var t=e.data,n=e.compressed;return void 0!==n&&n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof De?{data:t.handle,dataType:"buffer"}:t instanceof Y.b?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(e){var t=e.format,n=e.data,i=e.width,r=e.height,a=e.dataFormat,o=e.type,s=e.compressed,u=Be[t];a=a||u&&u.dataFormat,o=o||u&&u.types[0],s=s||u&&u.compressed;var l=this._deduceImageSize(n,i,r);return{dataFormat:a,type:o,compressed:s,width:i=l.width,height:r=l.height,format:t,data:n}}},{key:"_deduceImageSize",value:function(e,t,n){var i;return $(i="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},"Could not deduced texture size"),$(void 0===t||i.width===t,"Deduced texture width does not match supplied width"),$(void 0===n||i.height===n,"Deduced texture height does not match supplied height"),i}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:$(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!ve(this.gl)&&(!(!this.width||!this.height)&&(!te(this.width)||!te(this.height)))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===We.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),t}(),Xe="";var qe=function(e){function t(e){var n,i,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),ge(e),(a instanceof Promise||"string"==typeof a)&&(a={data:a}),"string"==typeof a.data&&(a=Object.assign({},a,{data:(i=a.data,$("string"==typeof i),i=Xe+i,new Promise(function(e,t){try{var n=new Image;n.onload=function(){return e(n)},n.onerror=function(){return t(new Error("Could not load image ".concat(i,".")))},n.crossOrigin=r&&r.crossOrigin||"anonymous",n.src=i}catch(e){t(e)}}))})),(n=c(this,f(t).call(this,e,Object.assign({},a,{target:3553})))).initialize(a),Object.seal(l(n)),n}return d(t,He),Object(s.a)(t,null,[{key:"isSupported",value:function(e,t){return He.isSupported(e,t)}}]),t}(),Ye=n(21),Ze=n.n(Ye);function Qe(e,t,n,i,r,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(i,r)}function Ke(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function o(e){Qe(a,i,r,o,s,"next",e)}function s(e){Qe(a,i,r,o,s,"throw",e)}o(void 0)})}}var $e=[34069,34070,34071,34072,34073,34074],Je=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),ge(e),(n=c(this,f(t).call(this,e,Object.assign({},i,{target:34067})))).initialize(i),Object.seal(l(n)),n}var n;return d(t,He),Object(s.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mipmaps,i=void 0===n||n,r=t.parameters,a=void 0===r?{}:r;this.opts=t,this.setCubeMapImageData(t).then(function(){e.loaded=!0,i&&e.generateMipmap(t),e.setParameters(a)})}},{key:"subImage",value:function(e){var t=e.face,n=e.data,i=e.x,r=void 0===i?0:i,a=e.y,o=void 0===a?0:a,s=e.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:t,data:n,x:r,y:o,mipmapLevel:u})}},{key:"setCubeMapImageData",value:(n=Ke(Ze.a.mark(function e(t){var n,i,r,a,o,s,u,l,c,f,h,d,p,v=this;return Ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,r=t.pixels,a=t.data,o=t.border,s=void 0===o?0:o,u=t.format,l=void 0===u?6408:u,c=t.type,f=void 0===c?5121:c,h=this.gl,d=r||a,e.next=5,Promise.all($e.map(function(e){var t=d[e];return Promise.all(Array.isArray(t)?t:[t])}));case 5:p=e.sent,this.bind(),$e.forEach(function(e,t){p[t].length>1&&!1!==v.opts.mipmaps&&N.warn("".concat(v.id," has mipmap and multiple LODs."))(),p[t].forEach(function(t,r){n&&i?h.texImage2D(e,r,l,n,i,s,l,f,t):h.texImage2D(e,r,l,l,f,t)})}),this.unbind();case 9:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"setImageDataForFace",value:function(e){var t=this,n=e.face,i=e.width,r=e.height,a=e.pixels,o=e.data,s=e.border,u=void 0===s?0:s,l=e.format,c=void 0===l?6408:l,f=e.type,h=void 0===f?5121:f,d=this.gl,p=a||o;return this.bind(),p instanceof Promise?p.then(function(i){return t.setImageDataForFace(Object.assign({},e,{face:n,data:i,pixels:i}))}):this.width||this.height?d.texImage2D(n,0,c,i,r,u,c,h,p):d.texImage2D(n,0,c,c,h,p),this}}]),t}();Je.FACES=$e;var et,tt=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),me(e),i=Object.assign({depth:1},i,{target:32879,unpackFlipY:!1}),(n=c(this,f(t).call(this,e,i))).initialize(i),Object.seal(l(n)),n}return d(t,He),Object(s.a)(t,null,[{key:"isSupported",value:function(e){return ve(e)}}]),Object(s.a)(t,[{key:"setImageData",value:function(e){var t=this,n=e.level,i=void 0===n?0:n,r=e.dataFormat,a=void 0===r?6408:r,o=e.width,s=e.height,u=e.depth,l=void 0===u?1:u,c=e.border,f=void 0===c?0:c,h=e.format,d=e.type,p=void 0===d?5121:d,v=e.offset,g=void 0===v?0:v,m=e.data,y=e.parameters,b=void 0===y?{}:y;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),q(this.gl,b,function(){ArrayBuffer.isView(m)&&t.gl.texImage3D(t.target,i,a,o,s,l,f,h,p,m),m instanceof De&&(t.gl.bindBuffer(35052,m.handle),t.gl.texImage3D(t.target,i,a,o,s,l,f,h,p,g))}),m&&m.byteLength)this._trackAllocatedMemory(m.byteLength,"Texture");else{var _=ze[this.dataFormat]||4,w=Ue[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*_*w,"Texture")}return this.loaded=!0,this}}]),t}(),nt="EXT_color_buffer_float",it=(et={},Object(w.a)(et,33189,{bpp:2}),Object(w.a)(et,33190,{gl2:!0,bpp:3}),Object(w.a)(et,36012,{gl2:!0,bpp:4}),Object(w.a)(et,36168,{bpp:1}),Object(w.a)(et,34041,{bpp:4}),Object(w.a)(et,35056,{gl2:!0,bpp:4}),Object(w.a)(et,36013,{gl2:!0,bpp:5}),Object(w.a)(et,32854,{bpp:2}),Object(w.a)(et,36194,{bpp:2}),Object(w.a)(et,32855,{bpp:2}),Object(w.a)(et,33321,{gl2:!0,bpp:1}),Object(w.a)(et,33330,{gl2:!0,bpp:1}),Object(w.a)(et,33329,{gl2:!0,bpp:1}),Object(w.a)(et,33332,{gl2:!0,bpp:2}),Object(w.a)(et,33331,{gl2:!0,bpp:2}),Object(w.a)(et,33334,{gl2:!0,bpp:4}),Object(w.a)(et,33333,{gl2:!0,bpp:4}),Object(w.a)(et,33323,{gl2:!0,bpp:2}),Object(w.a)(et,33336,{gl2:!0,bpp:2}),Object(w.a)(et,33335,{gl2:!0,bpp:2}),Object(w.a)(et,33338,{gl2:!0,bpp:4}),Object(w.a)(et,33337,{gl2:!0,bpp:4}),Object(w.a)(et,33340,{gl2:!0,bpp:8}),Object(w.a)(et,33339,{gl2:!0,bpp:8}),Object(w.a)(et,32849,{gl2:!0,bpp:3}),Object(w.a)(et,32856,{gl2:!0,bpp:4}),Object(w.a)(et,32857,{gl2:!0,bpp:4}),Object(w.a)(et,36220,{gl2:!0,bpp:4}),Object(w.a)(et,36238,{gl2:!0,bpp:4}),Object(w.a)(et,36975,{gl2:!0,bpp:4}),Object(w.a)(et,36214,{gl2:!0,bpp:8}),Object(w.a)(et,36232,{gl2:!0,bpp:8}),Object(w.a)(et,36226,{gl2:!0,bpp:16}),Object(w.a)(et,36208,{gl2:!0,bpp:16}),Object(w.a)(et,33325,{gl2:nt,bpp:2}),Object(w.a)(et,33327,{gl2:nt,bpp:4}),Object(w.a)(et,34842,{gl2:nt,bpp:8}),Object(w.a)(et,33326,{gl2:nt,bpp:4}),Object(w.a)(et,33328,{gl2:nt,bpp:8}),Object(w.a)(et,34836,{gl2:nt,bpp:16}),Object(w.a)(et,35898,{gl2:nt,bpp:4}),et);function rt(e,t,n){var i=n[t];if(!i)return!1;var r=ve(e)&&i.gl2||i.gl1;return"string"==typeof r?e.getExtension(r):r}var at,ot=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),(n=c(this,f(t).call(this,e,i))).initialize(i),Object.seal(l(n)),n}return d(t,Te),Object(s.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format;return!n||rt(e,n,it)}},{key:"getSamplesForFormat",value:function(e,t){var n=t.format;return e.getInternalformatParameter(36161,n,32937)}}]),Object(s.a)(t,[{key:"initialize",value:function(e){var t=e.format,n=e.width,i=void 0===n?1:n,r=e.height,a=void 0===r?1:r,o=e.samples,s=void 0===o?0:o;return $(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&ve(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,i,a):this.gl.renderbufferStorage(36161,t,i,a),this.format=t,this.width=i,this.height=a,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*it[this.format].bpp),this}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),t}(),st=256,ut=1024,lt=16384,ct=6144,ft=6145,ht=6146,dt=34041,pt="clear: bad arguments";function vt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,i=void 0===n?null:n,r=t.color,a=void 0===r?null:r,o=t.depth,s=void 0===o?null:o,u=t.stencil,l=void 0===u?null:u,c={};i&&(c.framebuffer=i);var f=0;a&&(f|=lt,!0!==a&&(c.clearColor=a)),s&&(f|=st,!0!==s&&(c.clearDepth=s)),l&&(f|=ut,!0!==s&&(c.clearStencil=s)),$(0!==f,pt),q(e,c,function(){e.clear(f)})}function gt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,i=void 0===n?null:n,r=t.buffer,a=void 0===r?ct:r,o=t.drawBuffer,s=void 0===o?0:o,u=t.value,l=void 0===u?[0,0,0,0]:u;me(e),q(e,{framebuffer:i},function(){switch(a){case ct:switch(l.constructor){case Int32Array:e.clearBufferiv(a,s,l);break;case Uint32Array:e.clearBufferuiv(a,s,l);break;case Float32Array:default:e.clearBufferfv(a,s,l)}break;case ft:e.clearBufferfv(ft,0,[l]);break;case ht:e.clearBufferiv(ht,0,[l]);break;case dt:var t=v(l,2),n=t[0],i=t[1];e.clearBufferfi(dt,0,n,i);break;default:$(!1,pt)}})}function mt(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return $(!1),0}}function yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sourceX,i=void 0===n?0:n,r=t.sourceY,a=void 0===r?0:r,o=t.sourceFormat,s=void 0===o?6408:o,u=t.sourceAttachment,l=void 0===u?36064:u,c=t.target,f=void 0===c?null:c,h=t.sourceWidth,d=t.sourceHeight,p=t.sourceType,v=_t(e),g=v.framebuffer,m=v.deleteFramebuffer;$(g);var y=g.gl,b=g.handle,_=g.attachments;h=h||g.width,d=d||g.height,36064===l&&null===b&&(l=1028),$(_[l]),f=function(e,t,n,i,r){if(e)return e;var a=xe(t=t||5121,{clamped:!1}),o=mt(n);return new a(i*r*o)}(f,p=p||_[l].type,s,h,d),p=p||we(f);var w=y.bindFramebuffer(36160,b);return y.readPixels(i,a,h,d,s,p,f),y.bindFramebuffer(36160,w||null),m&&g.delete(),f}function bt(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sourceAttachment,i=void 0===n?36064:n,r=t.targetMaxHeight,a=void 0===r?Number.MAX_SAFE_INTEGER:r,o=yt(e,{sourceAttachment:i}),s=e.width,u=e.height;u>a;){var l=ke({data:o,width:s,height:u});o=l.data,s=l.width,u=l.height}!function(e){var t=e.data,n=e.width,i=e.height,r=e.bytesPerPixel,a=void 0===r?4:r,o=e.temp,s=n*a;o=o||new Uint8Array(s);for(var u=0;u<i/2;++u){var l=u*s,c=(i-u-1)*s;o.set(t.subarray(l,l+s)),t.copyWithin(l,c,c+s),t.set(o,c)}}({data:o,width:s,height:u});var c=document.createElement("canvas");c.width=s,c.height=u;var f=c.getContext("2d"),h=f.createImageData(s,u);return h.data.set(o),f.putImageData(h,0,0),c.toDataURL()}function _t(e){return e instanceof Tt?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:(t=e,i=t.gl,r=t.width,a=t.height,o=t.id,s=new Tt(i,Object.assign({},n,{id:"framebuffer-for-".concat(o),width:r,height:a,attachments:Object(w.a)({},36064,t)})),s),deleteFramebuffer:!0};var t,n,i,r,a,o,s}var wt;at={},Object(w.a)(at,33902,{gl1:new Float32Array([1,1])}),Object(w.a)(at,33901,{gl1:new Float32Array([1,1])}),Object(w.a)(at,3379,{gl1:64,gl2:2048}),Object(w.a)(at,34076,{gl1:16}),Object(w.a)(at,34930,{gl1:8}),Object(w.a)(at,35661,{gl1:8}),Object(w.a)(at,35660,{gl1:0}),Object(w.a)(at,34024,{gl1:1}),Object(w.a)(at,36348,{gl1:8}),Object(w.a)(at,34921,{gl1:8}),Object(w.a)(at,36347,{gl1:128}),Object(w.a)(at,36349,{gl1:16}),Object(w.a)(at,3386,{gl1:new Int32Array([0,0])}),Object(w.a)(at,32883,{gl1:0,gl2:256}),Object(w.a)(at,35071,{gl1:0,gl2:256}),Object(w.a)(at,37447,{gl1:0,gl2:0}),Object(w.a)(at,36063,{gl1:0,gl2:4}),Object(w.a)(at,35379,{gl1:0,gl2:0}),Object(w.a)(at,35374,{gl1:0,gl2:0}),Object(w.a)(at,35377,{gl1:0,gl2:0}),Object(w.a)(at,34852,{gl1:0,gl2:4}),Object(w.a)(at,36203,{gl1:0,gl2:0}),Object(w.a)(at,33001,{gl1:0,gl2:0}),Object(w.a)(at,33e3,{gl1:0,gl2:0}),Object(w.a)(at,37157,{gl1:0,gl2:0}),Object(w.a)(at,35373,{gl1:0,gl2:0}),Object(w.a)(at,35657,{gl1:0,gl2:0}),Object(w.a)(at,36183,{gl1:0,gl2:0}),Object(w.a)(at,37137,{gl1:0,gl2:0}),Object(w.a)(at,34045,{gl1:0,gl2:0}),Object(w.a)(at,35978,{gl1:0,gl2:0}),Object(w.a)(at,35979,{gl1:0,gl2:0}),Object(w.a)(at,35968,{gl1:0,gl2:0}),Object(w.a)(at,35376,{gl1:0,gl2:0}),Object(w.a)(at,35375,{gl1:0,gl2:0}),Object(w.a)(at,35659,{gl1:0,gl2:0}),Object(w.a)(at,37154,{gl1:0,gl2:0}),Object(w.a)(at,35371,{gl1:0,gl2:0}),Object(w.a)(at,35658,{gl1:0,gl2:0}),Object(w.a)(at,35076,{gl1:0,gl2:-8,negative:!0}),Object(w.a)(at,35077,{gl1:0,gl2:7}),Object(w.a)(at,35380,{gl1:0,gl2:0});var xt={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"},kt=(wt={},Object(w.a)(wt,xt.WEBGL2,[function(e){return ve(e)}]),Object(w.a)(wt,xt.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),Object(w.a)(wt,xt.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),Object(w.a)(wt,xt.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),Object(w.a)(wt,xt.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),Object(w.a)(wt,xt.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),Object(w.a)(wt,xt.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),Object(w.a)(wt,xt.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),Object(w.a)(wt,xt.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),Object(w.a)(wt,xt.TEXTURE_FLOAT,["OES_texture_float",!0]),Object(w.a)(wt,xt.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),Object(w.a)(wt,xt.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),Object(w.a)(wt,xt.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),Object(w.a)(wt,xt.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),Object(w.a)(wt,xt.COLOR_ATTACHMENT_RGBA32F,["WEBGL_color_buffer_float","EXT_color_buffer_float"]),Object(w.a)(wt,xt.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),Object(w.a)(wt,xt.COLOR_ATTACHMENT_HALF_FLOAT,[!1,"EXT_color_buffer_half_float"]),Object(w.a)(wt,xt.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),Object(w.a)(wt,xt.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),Object(w.a)(wt,xt.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),Object(w.a)(wt,xt.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),wt);function Pt(e,t){return Ot(e,t)}function Ot(e,t){return(t=Array.isArray(t)?t:[t]).every(function(t){return Et(e,t)})}function Et(e,t){var n=kt[t];$(n,t);var i,r=ve(e)&&n[1]||n[0];if("function"==typeof r)i=r(e);else if(Array.isArray(r)){i=!0;var a=!0,o=!1,s=void 0;try{for(var u,l=r[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;i=i&&Boolean(e.getExtension(c))}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}}else"string"==typeof r?i=Boolean(e.getExtension(r)):"boolean"==typeof r?i=r:$(!1);return i}var Tt=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),(n=c(this,f(t).call(this,e,i))).width=null,n.height=null,n.attachments={},n.readBuffer=36064,n.drawBuffers=[36064],n.initialize(i),Object.seal(l(n)),n}return d(t,Te),Object(s.a)(t,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colorBufferFloat,i=t.colorBufferHalfFloat;return n&&e.getExtension(ve(e)?"EXT_color_buffer_float":"WEBGL.color_buffer_float"),i&&e.getExtension(ve(e)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new t(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),Object(s.a)(t,[{key:"initialize",value:function(e){var t=e.width,n=void 0===t?1:t,i=e.height,r=void 0===i?1:i,a=e.attachments,o=void 0===a?null:a,s=e.color,u=void 0===s||s,l=e.depth,c=void 0===l||l,f=e.stencil,h=void 0!==f&&f,d=e.check,p=void 0===d||d,v=e.readBuffer,g=e.drawBuffers;if($(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,o)for(var m in o){var y=o[m];(Array.isArray(y)?y[0]:y).resize({width:n,height:r})}else o=this._createDefaultAttachments(u,c,h,n,r);this.update({clearAttachments:!0,attachments:o,readBuffer:v,drawBuffers:g}),o&&p&&this.checkStatus()}},{key:"update",value:function(e){var t=e.attachments,n=void 0===t?{}:t,i=e.readBuffer,r=e.drawBuffers,a=e.clearAttachments,o=void 0!==a&&a,s=e.resizeAttachments,u=void 0===s||s;this.attach(n,{clearAttachments:o,resizeAttachments:u});var l=this.gl,c=l.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),l.bindFramebuffer(36160,c||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;if(null===this.handle)return $(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var i in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&N.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(n))(),this.attachments)this.attachments[i].resize({width:t,height:n});return this.width=t,this.height=n,this}},{key:"attach",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.clearAttachments,r=void 0!==i&&i,a=n.resizeAttachments,o=void 0===a||a,s={};r&&Object.keys(this.attachments).forEach(function(e){s[e]=null}),Object.assign(s,e);var u=this.gl.bindFramebuffer(36160,this.handle);for(var l in s){$(void 0!==l,"Misspelled framebuffer binding point?");var c=Number(l),f=s[c],h=f;if(h)if(h instanceof ot)this._attachRenderbuffer({attachment:c,renderbuffer:h});else if(Array.isArray(f)){var d=v(f,3),p=d[0],g=d[1],m=void 0===g?0:g,y=d[2],b=void 0===y?0:y;h=p,this._attachTexture({attachment:c,texture:p,layer:m,level:b})}else this._attachTexture({attachment:c,texture:h,layer:0,level:0});else this._unattach(c);o&&h&&h.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,u||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(function(e){return!t.attachments[e]}).forEach(function(e){delete t.attachments[e]})}},{key:"checkStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);if(e.bindFramebuffer(36160,t||null),36053!==n)throw new Error(function(e){return(Tt.STATUS||{})[e]||"Framebuffer error ".concat(e)}(n));return this}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.depth,i=e.stencil,r=e.drawBuffers,a=void 0===r?[]:r,o=this.gl.bindFramebuffer(36160,this.handle);return(t||n||i)&&vt(this.gl,{color:t,depth:n,stencil:i}),a.forEach(function(e,t){gt({drawBuffer:t,value:e})}),this.gl.bindFramebuffer(36160,o||null),this}},{key:"readPixels",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(e){var t=e.attachments,n=void 0===t?[]:t,i=e.x,r=void 0===i?0:i,a=e.y,o=void 0===a?0:a,s=e.width,u=e.height,l=this.gl;me(l);var c=l.bindFramebuffer(36008,this.handle);return 0===r&&0===o&&void 0===s&&void 0===u?l.invalidateFramebuffer(36008,n):l.invalidateFramebuffer(36008,n,r,o,s,u),l.bindFramebuffer(36008,c),this}},{key:"getAttachmentParameter",value:function(e,t,n){var i=this._getAttachmentParameterFallback(t);return null===i&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=Oe(this.gl,i)),i}},{key:"getAttachmentParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],i={},r=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value,c=t?Oe(this.gl,l):l;i[c]=this.getAttachmentParameter(e,l,t)}}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return i}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),n={},i=0,r=t;i<r.length;i++){var a=r[i],o=Number(a),s=e?Oe(this.gl,o):o;n[s]=this.getAttachmentParameters(o,e)}return n}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(bt(this),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>N.priority||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);var n=bt(this,{maxHeight:100});return N.image({priority:e,message:t,image:n},t)(),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(e,t,n,i,r){var a,o=null;e&&((o=o||{})[36064]=new qe(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:r,mipmaps:!1,parameters:(a={},Object(w.a)(a,10241,9728),Object(w.a)(a,10240,9728),Object(w.a)(a,10242,33071),Object(w.a)(a,10243,33071),a)}));return t&&n?(o=o||{})[33306]=new ot(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}):t?(o=o||{})[36096]=new ot(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:r}):n&&$(!1),o}},{key:"_unattach",value:function(e){var t=this.attachments[e];t&&(t instanceof ot?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,n=void 0===t?36064:t,i=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}},{key:"_attachTexture",value:function(e){var t=e.attachment,n=void 0===t?36064:t,i=e.texture,r=e.layer,a=e.level,o=this.gl;switch(o.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:o.framebufferTextureLayer(36160,n,i.target,a,r);break;case 34067:var s=function(e){return e<34069?e+34069:e}(r);o.framebufferTexture2D(36160,n,s,i.handle,a);break;case 3553:o.framebufferTexture2D(36160,n,3553,i.handle,a);break;default:$(!1,"Illegal texture type")}o.bindTexture(i.target,null),this.attachments[n]=i}},{key:"_setReadBuffer",value:function(e){var t=this.gl;ve(t)?t.readBuffer(e):$(36064===e||1029===e,"Multiple render targets not supported"),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(e){var t=this.gl;if(ve(t))t.drawBuffers(e);else{var n=t.getExtension("WEBGL.draw_buffers");n?n.drawBuffersWEBGL(e):$(1===e.length&&(36064===e[0]||1029===e[0]),"Multiple render targets not supported")}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(e){var t=function(e){if(e.luma=e.luma||{},!e.luma.caps)for(var t in e.luma.caps={},e.luma.caps.webgl2=ve(e),kt)e.luma.caps[t]=Et(e,t);return e.luma.caps}(this.gl);switch(e){case 36052:return t.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.webgl2?null:8;case 33297:return t.webgl2?null:5125;case 33296:return t.webgl2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),t}();Tt.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];function St(e){return Boolean(e&&2===e._version)}var jt={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Ct(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t=Object.assign({},jt,t),i=n.width,r=n.height;function a(e){if(t.throwOnError)throw new Error(e);return null}y.a?e=function(e,t){var n=t.onError,i=void 0===n?function(e){return null}:n,r=function(e){return i("WebGL context: ".concat(e.statusMessage||"error"))};e.addEventListener("webglcontextcreationerror",r,!1);var a=t.webgl1,o=void 0===a||a,s=t.webgl2,u=void 0===s||s,l=null;return u&&(l=(l=l||e.getContext("webgl2",t))||e.getContext("experimental-webgl2",t)),o&&(l=(l=l||e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",r,!1),l||i("Failed to create ".concat(u&&!o?"WebGL2":"WebGL"," context"))}(ce({canvas:t.canvas,width:i,height:r,onError:a}),t):e=function(e){var t=e.width,n=e.height,i=e.webgl1,r=e.webgl2,a=e.onError;if(r&&!i)return a("headless-gl does not support WebGL2");if(!Y.c)return a(Q);var o=Object(Y.c)(t,n,e);return o||a(K)}(Z({},t,{width:i,height:r,onError:a}));return e?(function(e){var t=St(e)?"WebGL2":"WebGL1",n=fe(e),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",r=e.debug?" debug":"";N.once(1,"".concat(t).concat(r," context ").concat(i))()}(e=At(e,t)),e):null}function At(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e._instrumented)return e;e._version=e._version||function(e){if(void 0!==Y.a&&e instanceof Y.a)return 2;return 1}(e);var n=t=Object.assign({},jt,t),i=n.manageState,r=n.debug;return i&&Object(H.a)(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return N.log.apply(N,[1].concat(t))()}}),y.a&&r&&(b.a.makeDebugContext?(e=b.a.makeDebugContext(e,{debug:r}),N.priority=Math.max(N.priority,1)):N.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function Lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=e.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:t}var Mt=35632,Ft=35633;function It(e,t,n,i){for(var r=e.split(/\r?\n/),a={},o={},s=i||Lt(t)||"(unnamed)",u="".concat(function(e){switch(e){case Mt:return"fragment";case Ft:return"vertex";default:return"unknown type"}}(n)," shader ").concat(s),l=0;l<r.length;l++){var c=r[l];if(!(c.length<=1)){var f=c.split(":"),h=f[0],d=parseInt(f[2],10);if(isNaN(d))throw new Error("GLSL compilation error in ".concat(u,": ").concat(e));"WARNING"!==h?a[d]=c:o[d]=c}}var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",i=e.split(/\r?\n/),r=String(i.length+t-1).length;return i.map(function(e,i){var a=i+t,o=String(a).length,s=Nt(a,r-o);return s+n+e})}(t);return{shaderName:u,errors:Rt(a,p),warnings:Rt(o,p)}}function Rt(e,t){for(var n="",i=0;i<t.length;i++){var r=t[i];if((e[i+3]||e[i+2]||e[i+1])&&(n+="".concat(r,"\n"),e[i+1])){var a=e[i+1],o=a.split(":",3),s=o[0],u=parseInt(o[1],10)||0,l=a.substring(o.join(":").length+1).trim();n+=Nt("^^^ ".concat(s,": ").concat(l,"\n\n"),u)}}return n}function Nt(e,t){for(var n="",i=0;i<t;++i)n+=" ";return"".concat(n).concat(e)}function Dt(e){var t=100,n=e.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var i=parseInt(n[1],10);Number.isFinite(i)&&(t=i)}return t}var Bt,zt,Ut="Shader: GLSL source code must be a JavaScript string",Vt=function(e){function t(e,n){var i;Object(o.a)(this,t),ge(e),$("string"==typeof n.source,Ut);var r=Lt(n.source,null)||n.id||ee("unnamed ".concat(t.getTypeName(n.shaderType)));return(i=c(this,f(t).call(this,e,{id:r}))).shaderType=n.shaderType,i.source=n.source,i.initialize(n),i}return d(t,Te),Object(s.a)(t,null,[{key:"getTypeName",value:function(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return $(!1),"unknown"}}}]),Object(s.a)(t,[{key:"initialize",value:function(e){var t=e.source,n=Lt(t,null);n&&(this.id=ee(n)),this._compile(t)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(t.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return Lt(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL.debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var e=It(this.gl.getShaderInfoLog(this.handle),this.source,this.shaderType,this.id),t=e.shaderName,n=e.errors,i=e.warnings;throw N.error("GLSL compilation errors in ".concat(t,"\n").concat(n))(),N.warn("GLSL compilation warnings in ".concat(t,"\n").concat(i))(),new Error("GLSL compilation errors in ".concat(t))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),t}(),Gt=function(e){function t(e,n){return Object(o.a)(this,t),"string"==typeof n&&(n={source:n}),c(this,f(t).call(this,e,Object.assign({},n,{shaderType:35633})))}return d(t,Vt),Object(s.a)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),t}(),Wt=function(e){function t(e,n){return Object(o.a)(this,t),"string"==typeof n&&(n={source:n}),c(this,f(t).call(this,e,Object.assign({},n,{shaderType:35632})))}return d(t,Vt),Object(s.a)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),t}(),Ht=(Bt={},Object(w.a)(Bt,5126,function(e,t,n){return e.uniform1fv(t,Kt(n,1))}),Object(w.a)(Bt,35664,function(e,t,n){return e.uniform2fv(t,Kt(n,2))}),Object(w.a)(Bt,35665,function(e,t,n){return e.uniform3fv(t,Kt(n,3))}),Object(w.a)(Bt,35666,function(e,t,n){return e.uniform4fv(t,Kt(n,4))}),Object(w.a)(Bt,5124,function(e,t,n){return e.uniform1iv(t,$t(n,1))}),Object(w.a)(Bt,35667,function(e,t,n){return e.uniform2iv(t,$t(n,2))}),Object(w.a)(Bt,35668,function(e,t,n){return e.uniform3iv(t,$t(n,3))}),Object(w.a)(Bt,35669,function(e,t,n){return e.uniform4iv(t,$t(n,4))}),Object(w.a)(Bt,35670,function(e,t,n){return e.uniform1iv(t,$t(n,1))}),Object(w.a)(Bt,35671,function(e,t,n){return e.uniform2iv(t,$t(n,2))}),Object(w.a)(Bt,35672,function(e,t,n){return e.uniform3iv(t,$t(n,3))}),Object(w.a)(Bt,35673,function(e,t,n){return e.uniform4iv(t,$t(n,4))}),Object(w.a)(Bt,35674,function(e,t,n){return e.uniformMatrix2fv(t,!1,Kt(n,4))}),Object(w.a)(Bt,35675,function(e,t,n){return e.uniformMatrix3fv(t,!1,Kt(n,9))}),Object(w.a)(Bt,35676,function(e,t,n){return e.uniformMatrix4fv(t,!1,Kt(n,16))}),Object(w.a)(Bt,35678,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,35680,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,5125,function(e,t,n){return e.uniform1uiv(t,Jt(n,1))}),Object(w.a)(Bt,36294,function(e,t,n){return e.uniform2uiv(t,Jt(n,2))}),Object(w.a)(Bt,36295,function(e,t,n){return e.uniform3uiv(t,Jt(n,3))}),Object(w.a)(Bt,36296,function(e,t,n){return e.uniform4uiv(t,Jt(n,4))}),Object(w.a)(Bt,35685,function(e,t,n){return e.uniformMatrix2x3fv(t,!1,Kt(n,6))}),Object(w.a)(Bt,35686,function(e,t,n){return e.uniformMatrix2x4fv(t,!1,Kt(n,8))}),Object(w.a)(Bt,35687,function(e,t,n){return e.uniformMatrix3x2fv(t,!1,Kt(n,6))}),Object(w.a)(Bt,35688,function(e,t,n){return e.uniformMatrix3x4fv(t,!1,Kt(n,12))}),Object(w.a)(Bt,35689,function(e,t,n){return e.uniformMatrix4x2fv(t,!1,Kt(n,8))}),Object(w.a)(Bt,35690,function(e,t,n){return e.uniformMatrix4x3fv(t,!1,Kt(n,12))}),Object(w.a)(Bt,35679,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,35682,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,36289,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,36292,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,36293,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,36298,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,36299,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,36300,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,36303,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,36306,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,36307,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,36308,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(Bt,36311,function(e,t,n){return e.uniform1i(t,n)}),Bt),Xt={},qt={},Yt={},Zt=[0];function Qt(e,t,n,i){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(Zt[0]=e,e=Zt);var r=e.length;if(r%t&&N.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof n)return e;var a=i[r];a||(a=new n(r),i[r]=a);for(var o=0;o<r;o++)a[o]=e[o];return a}function Kt(e,t){return Qt(e,t,Float32Array,Xt)}function $t(e,t){return Qt(e,t,Int32Array,qt)}function Jt(e,t){return Qt(e,t,Uint32Array,Yt)}function en(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=e.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function tn(e,t,n){var i=Ht[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i.bind(null,e,t)}function nn(e,t,n){for(var i in e){var r=e[i];if((!n||Boolean(n[i]))&&!rn(r))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(i),r),new Error("".concat(t," Bad uniform ").concat(i))}return!0}function rn(e){return Array.isArray(e)||ArrayBuffer.isView(e)?function(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),n=0;n<t;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof He||(e instanceof ot||e instanceof Tt&&Boolean(e.texture))))}function an(e,t){if(Array.isArray(e)||ArrayBuffer.isView(e)){if(!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}return e===t}function on(e){return Array.isArray(e)||ArrayBuffer.isView(e)?e.slice():e}var sn=5120,un=5121,ln=5122,cn=5123,fn=0,hn=1,dn=2,pn=3,vn=4,gn=5,mn=6,yn=5126,bn=(zt={},Object(w.a)(zt,yn,[yn,1,"float"]),Object(w.a)(zt,35664,[yn,2,"vec2"]),Object(w.a)(zt,35665,[yn,3,"vec3"]),Object(w.a)(zt,35666,[yn,4,"vec4"]),Object(w.a)(zt,5124,[5124,1,"int"]),Object(w.a)(zt,35667,[5124,2,"ivec2"]),Object(w.a)(zt,35668,[5124,3,"ivec3"]),Object(w.a)(zt,35669,[5124,4,"ivec4"]),Object(w.a)(zt,5125,[5125,1,"uint"]),Object(w.a)(zt,36294,[5125,2,"uvec2"]),Object(w.a)(zt,36295,[5125,3,"uvec3"]),Object(w.a)(zt,36296,[5125,4,"uvec4"]),Object(w.a)(zt,35670,[yn,1,"bool"]),Object(w.a)(zt,35671,[yn,2,"bvec2"]),Object(w.a)(zt,35672,[yn,3,"bvec3"]),Object(w.a)(zt,35673,[yn,4,"bvec4"]),Object(w.a)(zt,35674,[yn,8,"mat2"]),Object(w.a)(zt,35685,[yn,8,"mat2x3"]),Object(w.a)(zt,35686,[yn,8,"mat2x4"]),Object(w.a)(zt,35675,[yn,12,"mat3"]),Object(w.a)(zt,35687,[yn,12,"mat3x2"]),Object(w.a)(zt,35688,[yn,12,"mat3x4"]),Object(w.a)(zt,35676,[yn,16,"mat4"]),Object(w.a)(zt,35689,[yn,16,"mat4x2"]),Object(w.a)(zt,35690,[yn,16,"mat4x3"]),zt);function _n(e){switch(e){case fn:return fn;case hn:case pn:case dn:return hn;case vn:case gn:case mn:return vn;default:return $(!1),0}}function wn(e){var t=bn[e];if(!t)return null;var n=v(t,2);return{type:n[0],components:n[1]}}function xn(e,t){switch(e){case sn:case un:case ln:case cn:e=yn}for(var n in bn){var i=v(bn[n],3),r=i[0],a=i[1],o=i[2];if(r===e&&a===t)return{glType:n,name:o}}return null}var kn=function(){function e(t){Object(o.a)(this,e),this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}return Object(s.a)(e,[{key:"getAttributeInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var t=e.gl,n=t.getProgramParameter(e.handle,35721),i=0;i<n;i++){var r=t.getActiveAttrib(e.handle,i),a=r.name,o=r.type,s=r.size,u=t.getAttribLocation(e.handle,a);u>=0&&this._addAttribute(u,a,o,s)}this.attributeInfos.sort(function(e,t){return e.location-t.location})}},{key:"_readVaryingsFromProgram",value:function(e){var t=e.gl;if(ve(t)){for(var n=t.getProgramParameter(e.handle,35971),i=0;i<n;i++){var r=t.getTransformFeedbackVarying(e.handle,i),a=r.name,o=r.type,s=r.size;this._addVarying(i,a,o,s)}this.varyingInfos.sort(function(e,t){return e.location-t.location})}}},{key:"_addAttribute",value:function(e,t,n,i){var r=wn(n),a={type:r.type,size:i*r.components};this._inferProperties(e,t,a);var o={location:e,name:t,accessor:new Fe(a)};this.attributeInfos.push(o),this.attributeInfosByLocation[e]=o,this.attributeInfosByName[o.name]=o}},{key:"_inferProperties",value:function(e,t,n){/instance/i.test(t)&&(n.divisor=1)}},{key:"_addVarying",value:function(e,t,n,i){var r=wn(n),a=r.type,o=r.components,s={location:e,name:t,accessor:new Fe({type:a,size:i*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),e}(),Pn=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],On=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),(n=c(this,f(t).call(this,e,i))).stubRemovedMethods("Program","v6.0",Pn),n._isCached=!1,n.initialize(i),Object.seal(l(n)),n._setId(i.id),n}return d(t,Te),Object(s.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vs,n=e.fs,i=e.varyings,r=e.bufferMode,a=void 0===r?35981:r;return this.vs="string"==typeof t?new Gt(this.gl,{id:"".concat(e.id,"-vs"),source:t}):t,this.fs="string"==typeof n?new Wt(this.gl,{id:"".concat(e.id,"-fs"),source:n}):n,$(this.vs instanceof Gt),$(this.fs instanceof Wt),this.uniforms={},i&&(me(this.gl),this.varyings=i,this.gl.transformFeedbackVaryings(this.handle,i,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new kn(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:p(f(t.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}},{key:"draw",value:function(e){var t=this,n=e.logPriority,i=e.drawMode,r=void 0===i?4:i,a=e.vertexCount,o=e.offset,s=void 0===o?0:o,u=e.start,l=e.end,c=e.isIndexed,f=void 0!==c&&c,h=e.indexType,d=void 0===h?5123:h,p=e.isInstanced,v=void 0!==p&&p,g=e.instanceCount,m=void 0===g?0:g,y=e.vertexArray,b=void 0===y?null:y,_=e.transformFeedback,w=e.framebuffer,x=e.parameters,k=void 0===x?{}:x,P=e.uniforms,O=e.samplers;if((P||O)&&(N.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(P||{})),void 0!==n){var E=w?w.id:"default",T="mode=".concat(Oe(this.gl,r)," verts=").concat(a," ")+"instances=".concat(m," indexType=").concat(Oe(this.gl,d)," ")+"isInstanced=".concat(v," isIndexed=").concat(f," ")+"Framebuffer=".concat(E);N.log(n,T)()}return $(b),this.gl.useProgram(this.handle),!!this._areTexturesRenderable()&&(b.bindForDraw(a,m,function(){if(void 0!==w&&(k=Object.assign({},k,{framebuffer:w})),_){var e=_n(r);_.begin(e)}t._bindTextures(),q(t.gl,k,function(){f&&v?t.gl.drawElementsInstanced(r,a,d,s,m):f&&ve(t.gl)&&!isNaN(u)&&!isNaN(l)?t.gl.drawRangeElements(r,u,l,a,d,s):f?t.gl.drawElements(r,a,d,s):v?t.gl.drawArraysInstanced(r,s,a,m):t.gl.drawArrays(r,s,a)}),_&&_.end()}),!0)}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=!1,i={};for(var r in e)an(this.uniforms[r],e[r])||(n=!0,i[r]=e[r],this.uniforms[r]=on(e[r]));return n&&(t(),nn(i,this.id,this._uniformSetters),this._setUniforms(i)),this}},{key:"reset",value:function(){}},{key:"_areTexturesRenderable",value:function(){var e=!0;for(var t in this.uniforms){var n=this._uniformSetters[t];if(n&&void 0!==n.textureIndex){var i=this.uniforms[t];if(i instanceof Tt)i=i.texture;if(i instanceof He)e=e&&i.loaded}}return e}},{key:"_bindTextures",value:function(){for(var e in this.uniforms){var t=this._uniformSetters[e];if(t&&void 0!==t.textureIndex){var n=this.uniforms[e];if(n instanceof Tt&&(n=n.texture),n instanceof He)n.bind(t.textureIndex)}}}},{key:"_setUniforms",value:function(e){for(var t in this.gl.useProgram(this.handle),e){var n=e[t],i=this._uniformSetters[t];if(i)if(n instanceof Tt&&(n=n.texture),n instanceof He){void 0===i.textureIndex&&(i.textureIndex=this._textureIndexCounter++);var r=n,a=i.textureIndex;r.bind(a),i(a)}else i(n)}return this}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),n={},i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new Gt({handle:u});break;case 35632:n.fs=new Wt({handle:u})}}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=ee(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function(){var e=this.gl;if((e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),N.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),N.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||N.priority>0)&&(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var n=this.gl.getActiveUniform(this.handle,t),i=en(n.name),r=i.name,a=(i.isArray,e.getUniformLocation(this.handle,r));this._uniformSetters[r]=tn(e,a,n)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),t}(),En=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),(n=c(this,f(t).call(this,e,i))).target=null,n._queryPending=!1,n._pollingPromise=null,Object.seal(l(n)),n}return d(t,Te),Object(s.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=ve(e),i=Ot(e,xt.TIMER_QUERY),r=n||i,a=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;switch(c){case"queries":r=r&&n;break;case"timers":r=r&&i;break;default:$(!1)}}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return r}}]),Object(s.a)(t,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.conservative,n=void 0!==t&&t;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"begin",value:function(e){return this._queryPending?this:(this.target=e,this.gl.beginQuery(this.target,this.handle),this)}},{key:"end",value:function(){return this._queryPending?this:(this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this)}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var e=this.gl.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}},{key:"isTimerDisjoint",value:function(){return this.gl.getParameter(36795)}},{key:"getResult",value:function(){return this.gl.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var n=0;return this._pollingPromise=new Promise(function(i,r){requestAnimationFrame(function a(){e.isResultAvailable()?(i(e.getResult()),e._pollingPromise=null):n++>t?(r("Timed out"),e._pollingPromise=null):requestAnimationFrame(a)})}),this._pollingPromise}},{key:"_createHandle",value:function(){return t.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl.deleteQuery(this.handle)}}]),t}(),Tn=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),me(e),(n=c(this,f(t).call(this,e,i))).initialize(i),n.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(l(n)),n}return d(t,Te),Object(s.a)(t,null,[{key:"isSupported",value:function(e){return ve(e)}}]),Object(s.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,ne(this.buffers)||this.bind(function(){return e._unbindBuffers()}),this.setProps(t),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(function(){for(var n in t)e.setBuffer(n,t[n])}),this}},{key:"setBuffer",value:function(e,t){var n=this,i=this._getVaryingIndex(e),r=this._getBufferParams(t),a=r.buffer,o=r.byteSize,s=r.byteOffset;return i<0?(this.unused[e]=a,N.warn(function(){return"".concat(n.id," unused varying buffer ").concat(e)})(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,a,s,o),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(e){var t,n,i;return e instanceof De==!1?(i=e.buffer,n=e.byteSize,t=e.byteOffset):i=e,void 0===t&&void 0===n||(t=t||0,n=n||i.byteLength-t),{buffer:i,byteOffset:t,byteSize:n}}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]),n=t.buffer,i=t.byteSize,r=t.byteOffset;this._bindBuffer(e,n,r,i)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,r=t&&t.handle;return r&&void 0!==i?this.gl.bindBufferRange(35982,e,r,n,i):this.gl.bindBufferBase(35982,e,r),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),t}(),Sn=null;function jn(e,t){var n;return new e((n=e.BYTES_PER_ELEMENT*t,(!Sn||Sn.byteLength<n)&&(Sn=new ArrayBuffer(n)),Sn),0,t)}var Cn=n(29);function An(e){if(!e&&!Object(x.a)())return"Node";if(Object(Cn.a)(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r?"IE":C.b.chrome?"Chrome":C.b.safari?"Safari":C.b.mozInnerScreenX?"Firefox":"Unknown"}var Ln="elements must be GL.ELEMENT_ARRAY_BUFFER",Mn=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,t);var r=i.id||i.program&&i.program.id;return(n=c(this,f(t).call(this,e,Object.assign({},i,{id:r})))).hasVertexArrays=t.isSupported(e),n.buffer=null,n.bufferValue=null,n.initialize(i),Object.seal(l(n)),n}return d(t,Te),Object(s.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.constantAttributeZero?ve(e)||"Chrome"===An():ve(e)||e.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new t(e,{handle:null})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return t.MAX_ATTRIBUTES=t.MAX_ATTRIBUTES||e.getParameter(34921),t.MAX_ATTRIBUTES}},{key:"setConstant",value:function(e,n,i){switch(i.constructor){case Float32Array:t._setConstantFloatArray(e,n,i);break;case Int32Array:t._setConstantIntArray(e,n,i);break;case Uint32Array:t._setConstantUintArray(e,n,i);break;default:$(!1)}}}]),Object(s.a)(t,[{key:"delete",value:function(){p(f(t.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return $(!t||34963===t.target,Ln),this.bind(function(){e.gl.bindBuffer(34963,t?t.handle:null)}),this}},{key:"setBuffer",value:function(e,t,n){if(34963===t.target)return this.setElementBuffer(t,n);var i=n.size,r=n.type,a=n.stride,o=n.offset,s=n.normalized,u=n.integer,l=n.divisor,c=this.gl;return e=Number(e),this.bind(function(){c.bindBuffer(34962,t.handle),u?($(ve(c)),c.vertexAttribIPointer(e,i,r,a,o)):c.vertexAttribPointer(e,i,r,s,a,o),c.enableVertexAttribArray(e),c.vertexAttribDivisor(e,l||0)}),this}},{key:"enable",value:function(e){var n=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!i&&0===e&&!t.isSupported(this.gl,{constantAttributeZero:!0});return r||(e=Number(e),this.bind(function(){return i?n.gl.enableVertexAttribArray(e):n.gl.disableVertexAttribArray(e)})),this}},{key:"getConstantBuffer",value:function(e,t,n){var i=this._normalizeConstantArrayValue(t,n),r=i.byteLength*e,a=i.length*e,o=!this.buffer;if(this.buffer=this.buffer||new De(this.gl,r),o=(o=o||this.buffer.reallocate(r))||!this._compareConstantArrayValues(i,this.bufferValue)){var s=jn(t.constructor,a);!function(e){for(var t=e.target,n=e.source,i=e.start,r=void 0===i?0:i,a=e.count,o=void 0===a?1:a,s=n.length,u=o*s,l=0,c=r;l<s;l++)t[c++]=n[l];for(;l<u;)l<u-l?(t.copyWithin(r+l,r,r+l),l*=2):(t.copyWithin(r+l,r,r+u-l),l=u)}({target:s,source:i,start:0,count:a}),this.buffer.subData(s),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.hasVertexArrays=t.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function(e){return this.hasVertexArrays&&this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.hasVertexArrays&&this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var n=this,i=t.location;return $(Number.isFinite(i)),this.bind(function(){switch(e){case 34373:return n.gl.getVertexAttribOffset(i,e);default:return n.gl.getVertexAttrib(i,e)}})}},{key:"MAX_ATTRIBUTES",get:function(){return t.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,n){switch(n.length){case 1:e.vertexAttrib1fv(t,n);break;case 2:e.vertexAttrib2fv(t,n);break;case 3:e.vertexAttrib3fv(t,n);break;case 4:e.vertexAttrib4fv(t,n);break;default:$(!1)}}},{key:"_setConstantIntArray",value:function(e,t,n){switch($(ve(e)),n.length){case 1:e.vertexAttribI1iv(t,n);break;case 2:e.vertexAttribI2iv(t,n);break;case 3:e.vertexAttribI3iv(t,n);break;case 4:e.vertexAttribI4iv(t,n);break;default:$(!1)}}},{key:"_setConstantUintArray",value:function(e,t,n){switch($(ve(e)),n.length){case 1:e.vertexAttribI1uiv(t,n);break;case 2:e.vertexAttribI2uiv(t,n);break;case 3:e.vertexAttribI3uiv(t,n);break;case 4:e.vertexAttribI4uiv(t,n);break;default:$(!1)}}}]),t}(),Fn=/^(.+)__LOCATION_([0-9]+)$/,In=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],Rn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e);var i=n.id||n.program&&n.program.id;this.id=i,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.vertexArrayObject=Mn.isSupported(t)?new Mn(t):Mn.getDefaultArray(t),re(this,"VertexArray","v6.0",In),this.initialize(n),Object.seal(this)}return Object(s.a)(e,[{key:"delete",value:function(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(e){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,e)}},{key:"setAttributes",value:function(e){var t=this;return this.vertexArrayObject.bind(function(){for(var n in e){var i=e[n];t._setAttribute(n,i)}t.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,n);var i=this._resolveLocationAndAccessor(e,t,t.accessor,n),r=i.location,a=i.accessor;return r>=0&&(this.values[r]=t,this.accessors[r]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(r,t,a)),this}},{key:"setConstant",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},n)),r=i.location,a=i.accessor;return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,a),this.values[r]=t,this.accessors[r]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(r,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(null),e.buffer=e.buffer||new De(e.gl,{accessor:{size:4}});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof De&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var n=e.values[t];n instanceof De&&e.setBuffer(t,n)}}),this}},{key:"bindForDraw",value:function(e,t,n){var i,r=this;return this.vertexArrayObject.bind(function(){r._setConstantAttributes(e,t),r.vertexArrayObject.hasVertexArrays||r.bindBuffers(),i=n(),r.vertexArrayObject.hasVertexArrays||r.unbindBuffers()}),i}},{key:"_resolveLocationAndAccessor",value:function(e,t,n,i){var r=this,a=this._getAttributeIndex(e),o=a.location,s=a.name;if(!Number.isFinite(o)||o<0)return this.unused[e]=t,N.once(3,function(){return"unused value ".concat(e," in ").concat(r.id)})(),this;var u=this._getAttributeInfo(s||o);if(!u)return{location:-1,accessor:null};var l=Fe.resolve(u.accessor,n,i),c=l.size,f=l.type;return $(Number.isFinite(c)&&Number.isFinite(f)),{location:o,accessor:l}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){var t=Number(e);if(Number.isFinite(t))return{location:t};var n=Fn.exec(e),i=n?n[1]:e,r=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+r,name:i}:{location:-1}}},{key:"_setAttribute",value:function(e,t){if(t instanceof De)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof De){var n=t[0],i=t[1];this.setBuffer(e,n,i)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){var r=t;this.setConstant(e,r)}else{if(!(t.buffer instanceof De))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var a=t;this.setBuffer(e,a.buffer,a)}}},{key:"_setConstantAttributes",value:function(e,t){var n=Math.max(0|e,0|t),i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(var r=1;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)i=this.values[r],ArrayBuffer.isView(i)&&this._setConstantAttribute(r,i)}},{key:"_setConstantAttributeZero",value:function(e,t){if(Mn.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var n=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){Mn.setConstant(this.gl,e,t),this.vertexArrayObject.isDefault&&this.vertexArrayObject.enable(e,!1)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var n=this.values[t],i=this.accessors[t];if(n){var r=i.divisor>0;if(e.isInstanced=e.isInstanced||r,n instanceof De){var a=n;if(r){var o=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,o)}else{var s=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,s)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}]),e}(),Nn=5126,Dn=5124,Bn=5125;!function(){function e(t){var n;for(var i in Object(o.a)(this,e),this.layout={},this.size=0,t)this._addUniform(i,t[i]);this.size+=(4-this.size%4)%4;var r=new Float32Array(this.size);this.typedArray=(n={},Object(w.a)(n,Nn,r),Object(w.a)(n,Dn,new Int32Array(r.buffer)),Object(w.a)(n,Bn,new Uint32Array(r.buffer)),n)}Object(s.a)(e,[{key:"getBytes",value:function(){return 4*this.size}},{key:"getData",value:function(){return this.typedArray[Nn]}},{key:"getSubData",value:function(e){var t,n;if(void 0===e)t=this.data,n=0;else{var i=this.offsets[e],r=i+this.sizes[e];t=this.data.subarray(i,r),n=4*i}return{data:t,offset:n}}},{key:"setUniforms",value:function(e){for(var t in e)this._setValue(t,e[t]);return this}},{key:"_setValue",value:function(e,t){var n=this.layout[e];$(n,"UniformLayoutStd140 illegal argument");var i=this.typedArray[n.type];1===n.size?i[n.offset]=t:i.set(t,n.offset)}},{key:"_addUniform",value:function(e,t){var n=wn(t);$(n,"UniformBufferLayout illegal argument");var i=n.type,r=n.components;this.size=this._alignTo(this.size,r);var a=this.size;this.size+=r,this.layout[e]={type:i,size:r,offset:a}}},{key:"_alignTo",value:function(e,t){switch(t){case 1:return e;case 2:return e+e%2;default:return e+(4-e%4)%4}}}])}();function zn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,n=void 0===t?"Uniforms":t,i=e.program,r=e.uniforms,a=e.undefinedOnly,o=void 0!==a&&a;$(i);var s=i._uniformSetters,u={},l=Object.keys(s).sort(),c=0,f=!0,h=!1,d=void 0;try{for(var p,v=l[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;g.match(".*_.*")||g.match(".*Matrix")||Un({table:u,header:n,uniforms:r,uniformName:g,undefinedOnly:o})&&c++}}catch(e){h=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}var m=!0,y=!1,b=void 0;try{for(var _,x=l[Symbol.iterator]();!(m=(_=x.next()).done);m=!0){var k=_.value;k.match(".*Matrix")&&Un({table:u,header:n,uniforms:r,uniformName:k,undefinedOnly:o})&&c++}}catch(e){y=!0,b=e}finally{try{m||null==x.return||x.return()}finally{if(y)throw b}}var P=!0,O=!1,E=void 0;try{for(var T,S=l[Symbol.iterator]();!(P=(T=S.next()).done);P=!0){var j=T.value;u[j]||Un({table:u,header:n,uniforms:r,uniformName:j,undefinedOnly:o})&&c++}}catch(e){O=!0,E=e}finally{try{P||null==S.return||S.return()}finally{if(O)throw E}}var C=0,A={};if(!o)for(var L in r){var M=r[L];u[L]||(C++,A[L]=Object(w.a)({Type:"NOT USED: ".concat(M)},n,ie(M)))}return{table:u,count:c,unusedTable:A,unusedCount:C}}function Un(e){var t,n=e.table,i=e.header,r=e.uniforms,a=e.uniformName,o=e.undefinedOnly,s=r[a],u=function(e){return null!=e}(s);return(!o||!u)&&(n[a]=(t={},Object(w.a)(t,i,u?ie(s):"N/A"),Object(w.a)(t,"Uniform Type",u?s:"NOT PROVIDED"),t),!0)}function Vn(e,t,n,i){var r,a,o,s,u=e.gl,l="NOT PROVIDED",c="N/A",f="N/A",h="N/A";if(n&&(l=n.type,c=n.size,a=-1!==(l=String(l).replace("Array","")).indexOf("nt")),t instanceof De){var d,p,v=t,g=v.getDebugData(),m=g.data;if(o=g.modified?"*":"",s=m,f=(h=v.byteLength)/m.BYTES_PER_ELEMENT/c,n){var y=n.divisor>0;p="".concat(y?"I ":"P "," ").concat(f," (x").concat(c,"=").concat(h," bytes ").concat(Oe(u,l),")")}else a=!0,p="".concat(h," bytes");return d={},Object(w.a)(d,i,"".concat(o).concat(ie(s,{size:c,isInteger:a}))),Object(w.a)(d,"Format ",p),d}return s=t,c=t.length,a=-1!==(l=String(t.constructor.name).replace("Array","")).indexOf("nt"),r={},Object(w.a)(r,i,"".concat(ie(s,{size:c,isInteger:a})," (constant)")),Object(w.a)(r,"Format ","".concat(c,"x").concat(l," (constant)")),r}function Gn(e,t){var n=xn(t.type,t.size);return n?"".concat(e," (").concat(n.name,")"):e}function Wn(e){var t=e.accessor,n=xn(t.type,t.size);return n?"".concat(n.name," ").concat(e.name):e.name}var Hn={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Xn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e);var n=t.id,i=void 0===n?ee("geometry"):n,r=t.drawMode,a=void 0===r?Hn.TRIANGLES:r,s=t.mode,u=t.attributes,l=void 0===u?{}:u,c=t.indices,f=void 0===c?null:c,h=t.vertexCount,d=void 0===h?null:h;this.id=i,this.drawMode=0|a||0|s,this.attributes={},this.userData={},this._setAttributes(l,f),this.vertexCount=d||this._calculateVertexCount(this.attributes,this.indices)}return Object(s.a)(e,null,[{key:"DRAW_MODE",get:function(){return Hn}}]),Object(s.a)(e,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?Z({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}},{key:"_setAttributes",value:function(e,t){for(var n in t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t),e){var i=e[n];i=ArrayBuffer.isView(i)?{value:i}:i,$(ArrayBuffer.isView(i.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"indices"===n?($(!this.indices),this.indices=i,void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed)):this.attributes[n]=i}return this}},{key:"_calculateVertexCount",value:function(e,t){if(t)return t.value.length;var n=1/0;for(var i in e){var r=e[i],a=r.value,o=r.size;!r.constant&&a&&o>=1&&(n=Math.min(n,a.length/o))}if(!Number.isFinite(n)){var s=e.POSITION||e.positions;s&&(n=s.value&&s.value.length/(s.size||3))}return $(Number.isFinite(n)),n}},{key:"mode",get:function(){return this.drawMode}}]),e}(),qn=function e(){Object(o.a)(this,e)};function Yn(e){var t="function"==typeof Map?new Map:void 0;return(Yn=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return Se(e,arguments,f(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),h(i,e)})(e)}var Zn={};function Qn(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Kn(e){return Math.round(e/Zn.EPSILON)*Zn.EPSILON}function $n(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,n=void 0===t?Zn.precision||4:t;return e=Kn(e),parseFloat(e.toPrecision(n))}function Jn(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&void 0!==e.length}function ei(e,t){if(Jn(e)){for(var n=(r=e).clone?r.clone():new Array(r),i=0;i<n.length;++i)n[i]=t(n[i],i,n);return n}var r;return t(e)}function ti(e){return ei(e,function(e){return e/180*Math.PI})}function ni(e){return ei(e,function(e){return 180*e/Math.PI})}function ii(e,t,n){return ei(e,function(e){return Math.max(t,Math.min(n,e))})}function ri(e,t,n){return Jn(e)?e.map(function(e,i){return ri(e,t[i],n)}):n*t+(1-n)*e}function ai(e,t){if(Jn(e)&&Jn(t)){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!ai(e[n],t[n]))return!1;return!0}return Math.abs(e-t)<=Zn.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}Zn.EPSILON=1e-12,Zn.debug=!0,Zn.precision=4,Zn.printTypes=!1,Zn.printDegrees=!1,Zn.printRowMajor=!0;var oi=function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}return d(t,Yn(Array)),Object(s.a)(t,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e[t];return this.check()}},{key:"set",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=(e<0||arguments.length<=e?void 0:arguments[e])||0;return this.check()}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}},{key:"toString",value:function(){return this.formatString(Zn)}},{key:"formatString",value:function(e){for(var t="",n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+$n(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!ai(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"inverse",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=1/this[e];return this.check()}},{key:"lerp",value:function(e,t,n){void 0===n&&(n=t,t=e,e=this);for(var i=0;i<this.ELEMENTS;++i){var r=e[i];this[i]=r+n*(t[i]-r)}return this.check()}},{key:"min",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}},{key:"max",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}},{key:"clamp",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}},{key:"validate",value:function(){for(var e=this.length===this.ELEMENTS,t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}},{key:"check",value:function(){if(Zn.debug&&!this.validate(this))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(e){return this.subtract(e)}},{key:"setScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}},{key:"addScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}},{key:"subScalar",value:function(e){return this.addScalar(-e)}},{key:"multiplyScalar",value:function(e){return this.scale(e)}},{key:"divideScalar",value:function(e){return this.scale(1/e)}},{key:"clampScalar",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}}]),t}(),si=function(e,t){if(!e)throw new Error(t)},ui=function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}return d(t,oi),Object(s.a)(t,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n){var i=this[n]-e[n];t+=i*i}return Qn(t)}},{key:"dot",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Qn(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++)for(var r=t[i],a=0;a<this.ELEMENTS;++a)this[a]+=r[a];return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++)for(var r=t[i],a=0;a<this.ELEMENTS;++a)this[a]-=r[a];return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++)for(var r=t[i],a=0;a<this.ELEMENTS;++a)this[a]*=r[a];return this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++)for(var r=t[i],a=0;a<this.ELEMENTS;++a)this[a]/=r[a];return this.check()}},{key:"scale",value:function(e){if(Array.isArray(e))return this.multiply(e);for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"scaleAndAdd",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=this[n]*t+e[n];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(e){return this.distance(e)}},{key:"distanceToSquared",value:function(e){return this.distanceSquared(e)}},{key:"getComponent",value:function(e){return si(e>=0&&e<this.ELEMENTS,"index is out of range"),Qn(this[e])}},{key:"setComponent",value:function(e,t){return si(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Qn(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Qn(e)}}]),t}(),li=1e-6,ci="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function fi(e){var t=e[0],n=e[1],i=e[2];return Math.sqrt(t*t+n*n+i*i)}function hi(e,t,n){var i=new ci(3);return i[0]=e,i[1]=t,i[2]=n,i}function di(e,t){var n=t[0],i=t[1],r=t[2],a=n*n+i*i+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}var pi,vi,gi=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},mi=(pi=new ci(3),ci!=Float32Array&&(pi[0]=0,pi[1]=0,pi[2]=0),vi=pi,[0,0,0]),yi=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(o.a)(this,t),e=c(this,f(t).call(this,3)),Array.isArray(n)&&1===arguments.length?e.copy(n):e.set(n,i,r),e}return d(t,ui),Object(s.a)(t,[{key:"angle",value:function(e){return function(e,t){var n=hi(e[0],e[1],e[2]),i=hi(t[0],t[1],t[2]);di(n,n),di(i,i);var r=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}(n,i);return r>1?0:r<-1?Math.PI:Math.acos(r)}(this,e)}},{key:"cross",value:function(e){return function(e,t,n){var i=t[0],r=t[1],a=t[2],o=n[0],s=n[1],u=n[2];e[0]=r*u-a*s,e[1]=a*o-i*u,e[2]=i*s-r*o}(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,n=e.origin;return function(e,t,n,i){var r=[],a=[];r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],a[0]=r[0],a[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),a[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2]}(this,this,void 0===n?mi:n,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,n=e.origin;return function(e,t,n,i){var r=[],a=[];r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],a[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),a[1]=r[1],a[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2]}(this,this,void 0===n?mi:n,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,n=e.origin;return function(e,t,n,i){var r=[],a=[];r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],a[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),a[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),a[2]=r[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2]}(this,this,void 0===n?mi:n,t),this.check()}},{key:"operation",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Qn(e)}}]),t}(),bi=[255,255,255],_i=[0,0,1],wi=[0,0,-1],xi=[0,0,1],ki=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),this.id=t.id||ee("light");var n=t.color,i=void 0===n?bi:n;this.color=i;var r=t.intensity,a=void 0===r?1:r;this.intensity=a},Pi=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)(this,t),(e=c(this,f(t).call(this,n))).type="ambient",e}return d(t,ki),t}(),Oi=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,t),(e=c(this,f(t).call(this,n))).type="directional";var i=n.direction,r=void 0===i?wi:i;return e.direction=new yi(r).normalize().toArray(),e}return d(t,ki),t}(),Ei=(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,t),(e=c(this,f(t).call(this,n))).type="point";var i=n.position,r=void 0===i?xi:i;return e.position=r,e.attenuation=e._getAttenuation(n),e}d(t,ki),Object(s.a)(t,[{key:"_getAttenuation",value:function(e){return"attenuation"in e?e.attenuation:"intensity"in e?[0,0,e.intensity]:_i}}])}(),0),Ti=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e);var n=t.onCreateContext,i=void 0===n?function(e){return Ct(e)}:n,r=t.onAddHTML,a=void 0===r?null:r,s=t.onInitialize,u=void 0===s?function(){}:s,l=t.onRender,c=void 0===l?function(){}:l,f=t.onFinalize,h=void 0===f?function(){}:f,d=t.gl,p=void 0===d?null:d,v=t.glOptions,g=void 0===v?{}:v,m=t.debug,y=void 0!==m&&m,b=t.createFramebuffer,_=void 0!==b&&b,w=t.autoResizeViewport,x=void 0===w||w,k=t.autoResizeDrawingBuffer,P=void 0===k||k,O=t.stats,E=void 0===O?z.get("animation-loop-".concat(Ei++)):O,T=t.useDevicePixels,S=void 0===T||T;"useDevicePixelRatio"in t&&(N.deprecated("useDevicePixelRatio","useDevicePixels")(),S=t.useDevicePixelRatio),this.props={onCreateContext:i,onAddHTML:a,onInitialize:u,onRender:c,onFinalize:h,gl:p,glOptions:g,debug:y,createFramebuffer:_},this.gl=p,this.needsRedraw=null,this.timeline=null,this.stats=E,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:x,autoResizeDrawingBuffer:P,useDevicePixels:S}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}var t;return Object(s.a)(e,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(e){return $("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running?this:(this._running=!0,le().then(function(){return!e._running||e._initialized?null:(e._createWebGLContext(t),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e._gpuTimeQuery=En.isSupported(e.gl,["timers"])?new En(e.gl):null,e._initialized=!0,e.onInitialize(e.animationProps))}).then(function(t){e._running&&(e._addCallbackData(t||{}),!1!==t&&e._startLoop())}),this)}},{key:"redraw",value:function(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),be(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(e){return this.timeline=e,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var e=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(function(t){e._resolveNextFrame=t})),this._nextFramePromise}},{key:"toDataURL",value:(t=Ke(Ze.a.mark(function e(){return Ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setNeedsRedraw("toDataURL"),e.next=3,this.waitForRender();case 3:return e.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"onCreateContext",value:function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(e);return n?Number(n.value):t}},{key:"setViewParameters",value:function(){return N.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var e=this;be(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(function t(){e._running&&(e.redraw(),e._animationFrameId=e._requestAnimationFrame(t))})}},{key:"_setDisplay",value:function(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}},{key:"_requestAnimationFrame",value:function(e){this.display&&this.display.requestAnimationFrame(e)||ye(e)}},{key:"_renderFrame",value:function(){var e;this.display?(e=this.display)._renderFrame.apply(e,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var e=this._getSizeAndAspect(),t=e.width,n=e.height,i=e.aspect;t===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(e){"object"===Object(u.a)(e)&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}},{key:"_createWebGLContext",value:function(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?At(this.props.gl,e):this.onCreateContext(e),!pe(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Object(U.b)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);var n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight,n=1,i=this.gl.canvas,r=i.clientWidth,a=i.clientHeight;return r>0&&a>0?n=r/a:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var n=t.useDevicePixels&&window.devicePixelRatio||1,i="width"in t?t.width:e.canvas.clientWidth,r="height"in t?t.height:e.canvas.clientHeight;return e.canvas.width=i*n,void(e.canvas.height=r*n)}var a=e.getExtension("STACKGL_resize_drawingbuffer");a&&"width"in t&&"height"in t&&a.resize(t.width,t.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new Tt(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){this.gl.canvas.addEventListener("mousemove",this._onMousemove),this.gl.canvas.addEventListener("mouseleave",this._onMouseleave)}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),e}();new Uint8Array([0,0,0]);var Si={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function ji(e,t){var n=(t||{}).attributeMap,i=void 0===n?Si:n;return i&&i[e]||e}function Ci(e,t){var n;switch(e){case"indices":n=n||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break;case"indices":t.size=t.size||1,t.isIndexed=void 0===t.isIndexed||t.isIndexed,$(t.value instanceof Uint16Array||t.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}$(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}var Ai="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n",Li="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n",Mi="vs",Fi="fs";function Ii(e,t,n){switch(t){case 300:return n?function(e){return e.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(e):function(e){return e.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(e);case 100:return n?function(e){return e.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e):function(e){return e.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e);default:throw new Error("unknown GLSL version ".concat(t))}}function Ri(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}var Ni=function(){function e(t){var n=t.name,i=t.vs,r=t.fs,a=t.dependencies,s=void 0===a?[]:a,u=t.getUniforms,l=void 0===u?function(){return{}}:u,c=t.deprecations,f=void 0===c?[]:c,h=t.defines,d=void 0===h?{}:h,p=t.vertexShader,v=t.fragmentShader;Object(o.a)(this,e),Ri("string"==typeof n),this.name=n,this.vs=i||p,this.fs=r||v,this.getModuleUniforms=l,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(f),this.defines=d}return Object(s.a)(e,[{key:"getModuleSource",value:function(e,t){var n;switch(e){case"vs":n=Ii(this.vs||"",t,!0);break;case"fs":n=Ii(this.fs||"",t,!1);break;default:Ri(!1)}return"string"!=typeof n?"":"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms(e,t)}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach(function(n){n.regex.test(e)&&(n.deprecated&&t?t.deprecated(n.old,n.new)():t&&t.removed(n.old,n.new)())})}},{key:"_parseDeprecationDefinitions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach(function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}}),e}}]),e}(),Di=new(function(){function e(){Object(o.a)(this,e),this.shaderModules={},this.defaultShaderModules=[]}return Object(s.a)(e,[{key:"setDefaultShaderModules",value:function(e){this.defaultShaderModules=this.resolveModules(e)}},{key:"registerShaderModules",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ignoreMultipleRegistrations,i=void 0!==n&&n,r=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;this._registerShaderModule(l,i)}}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}}},{key:"getShaderModule",value:function(e){if(e instanceof Ni)return e;if("string"!=typeof e)return this._registerShaderModule(e,!0);var t=this.shaderModules[e];return t||Ri(!1,"Unknown shader module ".concat(e)),t}},{key:"resolveModules",value:function(e){var t=this;return e.map(function(e){return t.getShaderModule(e)})}},{key:"_registerShaderModule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof Ni)return e;if(Ri(e.name,"shader module has no name"),this.shaderModules[e.name]&&!t)throw new Error("shader module ".concat(e.name," already registered"));return(e=new Ni(e)).dependencies=this.resolveModules(e.dependencies),this.shaderModules[e.name]=e,this.shaderModules[e.name]}}]),e}());function Bi(e){var t={},n={};return zi({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort(function(e,t){return n[t]-n[e]}).map(function(e){return t[e]})}function zi(e){var t=e.modules,n=e.level,i=e.moduleMap,r=e.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var a=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;i[c.name]=c,(void 0===r[c.name]||r[c.name]<n)&&(r[c.name]=n)}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}var f=!0,h=!1,d=void 0;try{for(var p,v=t[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;g.dependencies&&zi({modules:g.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}}catch(e){h=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}}var Ui=7936,Vi=7937,Gi=7938,Wi=35724,Hi={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Xi={};Object.keys(Hi).forEach(function(e){Xi[e]=e});var qi={};function Yi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Hi[t];if(Ri(i,t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!=typeof window&&window.navigator||{},n=e.userAgent||t.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(t in qi)return qi[t];var r=i[0],a=n.behavior||"enable",o="#extension GL_".concat(r," : ").concat(a,"\nvoid main(void) {}"),s=e.createShader(35633);e.shaderSource(s,o),e.compileShader(s);var u=e.getShaderParameter(s,35713);return e.deleteShader(s),qi[t]=u,u}function Zi(e,t){var n=Hi[t];Ri(n,t);var i=function(e){return Boolean(e&&2===e._version)}(e)&&n[1]||n[0],r="string"==typeof i?Boolean(e.getExtension(i)):i;return Ri(!1===r||!0===r),r}function Qi(e,t){return(t=Array.isArray(t)?t:[t]).every(function(t){return Zi(e,t)})}function Ki(e){switch(function(e){var t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||Ui),i=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||Vi);return{gpuVendor:function(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,i),vendor:n,renderer:i,version:e.getParameter(Gi),shadingLanguageVersion:e.getParameter(Wi)}}(e).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}var $i,Ji,er,tr=($i={},Object(w.a)($i,Mi,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(w.a)($i,Fi,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),$i),nr=/void main\s*\([^)]*\)\s*\{\n?/,ir=/}\n?[^{}]*$/,rr=[];function ar(e){var t={};return Ri(Array.isArray(e)&&e.length>1),e.forEach(function(e){for(var n in e)t[n]=t[n]?"".concat(t[n],"\n").concat(e[n]):e[n]}),t}var or=(Ji={},Object(w.a)(Ji,Mi,"vertex"),Object(w.a)(Ji,Fi,"fragment"),Ji),sr=(er={},Object(w.a)(er,Mi,{}),Object(w.a)(er,Fi,{}),er),ur={},lr="precision highp float;\n\n";function cr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.vs,i=t.fs,r=function(e){return e=e.concat(Di.defaultShaderModules),Bi(e=Di.resolveModules(e))}(t.modules||[]);return{gl:e,vs:fr(e,Object.assign({},t,{source:n,type:Mi,modules:r})),fs:fr(e,Object.assign({},t,{source:i,type:Fi,modules:r})),getUniforms:hr(r),modules:dr(r)}}function fr(e,t){var n=t.id,i=t.source,r=t.type,a=t.modules,o=void 0===a?[]:a,s=t.defines,u=void 0===s?{}:s,l=t.inject,c=void 0===l?{}:l,f=t.prologue,h=void 0===f||f,d=t.log;Ri("string"==typeof i,"shader source must be a string");var p=r===Mi,v=i.split("\n"),g=100,m="",y=i;0===v[0].indexOf("#version ")&&(g=300,m=v[0],y=v.slice(1).join("\n"));var b={};o.forEach(function(e){Object.assign(b,e.getDefines())}),Object.assign(b,u);var _=h?"".concat(m,"\n").concat(function(e){var t=e.id,n=e.source,i=e.type;return t&&"string"==typeof t&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(t,"_").concat(or[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function(e){var t=e.type;return"\n#define SHADER_TYPE_".concat(or[t].toUpperCase(),"\n")}({type:r}),"\n").concat(Ki(e),"\n").concat(function(e,t,n){var i="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return Qi(e,Xi.GLSL_FRAG_DEPTH)&&(i+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),Qi(e,Xi.GLSL_DERIVATIVES)&&Yi(e,Xi.GLSL_DERIVATIVES)&&(i+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),Qi(e,Xi.GLSL_FRAG_DATA)&&Yi(e,Xi.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),Qi(e,Xi.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),i}(e),"\n").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(var i in e){0===t&&(n+="\n// APPLICATION DEFINES\n"),t++;var r=e[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(e[i],"\n"))}0===t&&(n+="\n");return n}(b),"\n").concat(p?"":lr,"\n"):"".concat(m,"\n"),w=!1,x={},k={};for(var P in c){var O="string"==typeof c[P]?{injection:c[P],order:0}:c[P];P.match(/^(v|f)s:/)?"#"===P[3]?k[P]=[O]:x[P]=[O]:k[P]=[O]}var E=!0,T=!1,S=void 0;try{for(var j,C=o[Symbol.iterator]();!(E=(j=C.next()).done);E=!0){var A=j.value;switch(A.name){case"inject":w=!0;break;default:if(A.checkDeprecations(y,d),_+=A.getModuleSource(r,g),ur[A.name]){var L=ur[A.name][r];for(var M in L)M.match(/^(v|f)s:#/)?(k[M]=k[M]||[],k[M].push(L[M])):(x[M]=x[M]||[],x[M].push(L[M]))}}}}catch(e){T=!0,S=e}finally{try{E||null==C.return||C.return()}finally{if(T)throw S}}return _+=function(e,t){var n="",i=sr[e];for(var r in i){var a=i[r];if(n+="void ".concat(a.signature," {\n"),a.header&&(n+="  ".concat(a.header)),t[r]){var o=t[r];o.sort(function(e,t){return e.order-t.order});var s=!0,u=!1,l=void 0;try{for(var c,f=o[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value;n+="  ".concat(h.injection,"\n")}}catch(e){u=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}a.footer&&(n+="  ".concat(a.footer)),n+="}\n"}return n}(r,x),_=function(e,t,n,i){var r=t===Mi,a=function(t){var i=n[t];i.sort(function(e,t){return e.order-t.order}),rr.length=i.length;for(var a=0,o=i.length;a<o;++a)rr[a]=i[a].injection;var s="".concat(rr.join("\n"),"\n");switch(t){case"vs:#decl":r&&(e=e.replace(nr,function(e){return"".concat(s,"\n").concat(e)}));break;case"vs:#main-start":r&&(e=e.replace(nr,function(e){return e+s}));break;case"vs:#main-end":r&&(e=e.replace(ir,function(e){return s+e}));break;case"fs:#decl":r||(e=e.replace(nr,function(e){return"".concat(s,"\n").concat(e)}));break;case"fs:#main-start":r||(e=e.replace(nr,function(e){return e+s}));break;case"fs:#main-end":r||(e=e.replace(ir,function(e){return s+e}));break;default:e=e.replace(t,function(e){return e+s})}};for(var o in n)a(o);return i&&(e=e.replace("}s*$",function(e){return e+tr[t]})),e}(_+=y,r,k,w)}function hr(e){return function(t){var n={},i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value.getUniforms(t,n);Object.assign(n,u)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}function dr(e){var t,n={},i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value,l=(t=u,Di.getShaderModule(t));n[u]=l}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}var pr=n(6),vr=n.n(pr),gr={},mr=function(e){gr[e.id]||(gr[e.id]=e,vr.a.listItem("luma.gl",e.id))},yr=function e(t,n,i){t&&(n.length>1?e(t[n[0]],n.slice(1),i):t[n[0]]=i)},br=new Map,_r=function(e,t){if(b.b.__SEER_INITIALIZED__&&e){var n=br.get(e);n&&n.forEach(function(e,n){yr(t,n,e)})}};vr.a.listenFor("luma.gl",function(e){var t=gr[e.itemKey];if(t&&"edit"===e.type&&"uniforms"===e.valuePath[0]){var n=e.valuePath.slice(1);!function(e,t,n){b.b.__SEER_INITIALIZED__&&(br.has(e)||br.set(e,new Map),br.get(e).set(t,n))}(e.itemKey,n,e.value);var i=t.getUniforms();yr(i,n,e.value),t.setUniforms(i)}});var wr=["renderPickingBuffer","pickingEnabled"],xr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e),$(pe(t));var i=n.id,r=void 0===i?ee("base-model"):i;this.id=r,this.gl=t,this.id=n.id||ee("Model"),this.lastLogTime=0,this.initialize(n),this._setBaseModelProps(n)}return Object(s.a)(e,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={},this.program=this._createProgram(e),this.vertexArray=new Rn(this.gl,{program:this.program}),this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this._setBaseModelProps(e),this.setUniforms(Object.assign({},this.getModuleUniforms(),this.getModuleUniforms(e.moduleSettings)))}},{key:"setProps",value:function(e){this._setBaseModelProps(e)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();var t;this.program.delete(),this.vertexArray.delete(),t=this.id,delete gr[t],vr.a.deleteItem("luma.gl",t)}},{key:"destroy",value:function(){this.delete()}},{key:"isAnimated",value:function(){return this.animated}},{key:"getProgram",value:function(){return this.program}},{key:"getUniforms",value:function(){return this.program.getUniforms()}},{key:"setUniforms",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({},t),_r(this.id,t),t=this._extractAnimatedUniforms(t),this.program.setUniforms(t,function(){e._checkForDeprecatedUniforms(t)}),this}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function(e){return vt(this.program.gl,e),this}},{key:"drawGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleSettings,n=void 0===t?null:t,i=e.framebuffer,r=e.uniforms,a=void 0===r?{}:r,o=e.attributes,s=void 0===o?{}:o,u=e.transformFeedback,l=void 0===u?this.transformFeedback:u,c=e.parameters,f=void 0===c?{}:c,h=e.vertexArray,d=void 0===h?this.vertexArray:h,p=e.animationProps;mr(this),this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(a),this._refreshAnimationProps(p);var v=this._logDrawCallStart(2),g=this.vertexArray.getDrawParams(this.props);g.isInstanced&&!this.isInstanced&&N.warn("Found instanced attributes on non-instanced model",this.id)();var m=g.isIndexed,y=g.indexType,b=g.indexOffset,_=this.isInstanced,w=this.instanceCount,x=function(){},k=this.props,P=k.onBeforeRender,O=void 0===P?x:P,E=k.onAfterRender,T=void 0===E?x:E;O(),this._timerQueryStart();var S=this.program.draw(Object.assign({},e,{logPriority:v,uniforms:null,framebuffer:i,parameters:f,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:d,transformFeedback:l,isIndexed:m,indexType:y,isInstanced:_,instanceCount:w,offset:m?b:0}));return this._timerQueryEnd(),T(),this._logDrawCallEnd(v,d,i),S}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,n=void 0===t||t,i=e.feedbackBuffers,r=e.unbindModels,a=void 0===r?[]:r,o=e.parameters;i&&this._setFeedbackBuffers(i),n&&(o=Object.assign({},o,Object(w.a)({},35977,n))),a.forEach(function(e){return e.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},e,{parameters:o}))}finally{a.forEach(function(e){return e.vertexArray.bindBuffers()})}return this}},{key:"_setBaseModelProps",value:function(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"timerQueryEnabled"in e&&(this.timerQueryEnabled=e.timerQueryEnabled&&En.isSupported(this.gl,["timers"]),e.timerQueryEnabled&&!this.timerQueryEnabled&&N.warn("GPU timer not supported")()),"_animationProps"in e&&this._setAnimationProps(e._animationProps),"_animationLoop"in e&&(this.animationLoop=e._animationLoop)}},{key:"_createProgram",value:function(e){var t=e.vs,n=void 0===t?null:t,i=e.fs,r=void 0===i?null:i,a=e.modules,o=void 0===a?null:a,s=e.defines,u=void 0===s?{}:s,l=e.inject,c=void 0===l?{}:l,f=e.shaderCache,h=void 0===f?null:f,d=e.varyings,p=void 0===d?null:d,v=e.bufferMode,g=void 0===v?35981:v,m=e.program,y=void 0===m?null:m;this.getModuleUniforms=function(e){};var b=this.id;if(!y){n=n||Ai,r=r||Li;var _=cr(this.gl,{vs:n,fs:r,modules:o,inject:c,defines:u,log:N});n=_.vs,r=_.fs,y=h?h.getProgram(this.gl,{id:b,vs:n,fs:r}):new On(this.gl,{id:b,vs:n,fs:r,varyings:p,bufferMode:g}),this.getModuleUniforms=_.getUniforms||function(e){}}return $(y instanceof On,"Model needs a program"),y}},{key:"_checkForDeprecatedUniforms",value:function(e){wr.forEach(function(t){t in e&&N.deprecated(t,"use picking shader module and Model class updateModuleSettings()")()})}},{key:"_refreshAnimationProps",value:function(e){(e=e||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(e)}},{key:"_evaluateAnimateUniforms",value:function(e){if(!this.animated)return{};var t={};for(var n in this.animatedUniforms){var i=this.animatedUniforms[n];t[n]=i(e)}return t}},{key:"_extractAnimatedUniforms",value:function(e){var t=!1;for(var n in e){var i=e[n];"function"==typeof i?(this.animatedUniforms[n]=i,t=!0):delete this.animatedUniforms[n]}if(this.animated=!ne(this.animatedUniforms),!t)return e;var r={};for(var a in e)this.animatedUniforms[a]||(r[a]=e[a]);return r}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new En(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getTimerMilliseconds();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,N.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_logDrawCallStart",value:function(e){var t=e>3?0:1e4;if(!(N.priority<e||Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),N.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:N.priority<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,t,n,i){if(void 0!==e){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,n=e.header,i=void 0===n?"Attributes":n;if(!t.configuration)return{};var r={};t.elements&&(r.ELEMENT_ARRAY_BUFFER=Vn(t,t.elements,null,i));var a=t.values;for(var o in a){var s=t._getAttributeInfo(o);if(s){var u="".concat(o,": ").concat(s.name),l=t.accessors[s.location];l&&(u="".concat(o,": ").concat(Gn(s.name,l))),r[u]=Vn(t,a[o],l,i)}}return r}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),a=zn({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),o=a.table,s=a.unusedTable,u=a.unusedCount,l=zn({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),c=l.table;l.count>0&&N.log("MISSING UNIFORMS",Object.keys(c))(),u>0&&N.log("UNUSED UNIFORMS",Object.keys(s))();var f=function(e){var t={},n="Accessors for ".concat(e.id),i=!0,r=!1,a=void 0;try{for(var o,s=e.attributeInfos[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value;if(u){var l=Wn(u);t["in ".concat(l)]=Object(w.a)({},n,JSON.stringify(u.accessor))}}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}var c=!0,f=!1,h=void 0;try{for(var d,p=e.varyingInfos[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var v=d.value;if(v){var g=Wn(v);t["out ".concat(g)]=Object(w.a)({},n,JSON.stringify(v.accessor))}}}catch(e){f=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}return t}(this.vertexArray.configuration);N.table(e,r)(),N.table(e,o)(),N.table(e+1,f)(),function(e,t){if(vr.a.isReady()&&!vr.a.throttle("luma.gl:".concat(e.id),1e3)){var n=e.geometry?Object.assign({},e.geometry.attributes,e.attributes):e.attributes,i=Object.assign({},e.uniforms,t);vr.a.multiUpdate("luma.gl",e.id,[{path:"objects.uniforms",data:i},{path:"objects.attributes",data:n}])}}(this,n),i&&i.log({priority:2,message:"Rendered to ".concat(i.id)}),N.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),e}(),kr=function(e){function t(e,n){Object(o.a)(this,t);var i=n.id,r=void 0===i?ee("model"):i;return c(this,f(t).call(this,e,Z({},n,{id:r})))}return d(t,xr),Object(s.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(f(t.prototype),"initialize",this).call(this,e),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced,this._setModelProps(e),this.geometry={},$(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(e){p(f(t.prototype),"setProps",this).call(this,e),this._setModelProps(e)}},{key:"delete",value:function(){p(f(t.prototype),"delete",this).call(this),this._deleteGeometryBuffers()}},{key:"destroy",value:function(){this.delete()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setDrawMode",value:function(e){return this.drawMode=e,this}},{key:"setVertexCount",value:function(e){return $(Number.isFinite(e)),this.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return $(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(e,t,n){var i={};for(var r in t.attributes){var a=t.attributes[r],o=ji(r,n);if(a.constant)i[o]=a.value;else{var s=a.value,u=Z({},a);delete u.value,i[o]=[new De(e,s),u],Ci(r,u)}}return t.indices&&(i.indices=new De(e,{data:t.indices.value||t.indices,target:34963})),i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ne(e))return this;var t={};for(var n in e){var i=e[n];t[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(t),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.drawGeometry(e)}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,n=void 0===t||t,i=e.feedbackBuffers,r=e.unbindModels,a=void 0===r?[]:r,o=e.parameters;i&&this._setFeedbackBuffers(i),n&&(o=Object.assign({},o,Object(w.a)({},35977,n))),a.forEach(function(e){return e.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},e,{parameters:o}))}finally{a.forEach(function(e){return e.vertexArray.bindBuffers()})}return this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return N.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}},{key:"_setModelProps",value:function(e){"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}},{key:"_deleteGeometryBuffers",value:function(){for(var e in this.geometryBuffers){var t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof De&&t.delete()}}},{key:"_setAnimationProps",value:function(e){var t=this;if(this.animated){$(e,"Model.draw(): animated uniforms but no animationProps");var n=this._evaluateAnimateUniforms(e);this.program.setUniforms(n,function(){t._checkForDeprecatedUniforms(n)})}}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ne(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new Tn(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new En(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getTimerMilliseconds();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,N.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}}]),t}(),Pr="void main() {gl_FragColor = vec4(0);}",Or="#version 300 es\nout vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}";function Er(e,t){t=Array.isArray(t)?t:[t];var n=v(e.replace(/^\s+/,"").split(/\s+/),3),i=n[0],r=n[1],a=n[2];return t.includes(i)&&r&&a?{qualifier:i,type:r,name:a.split(";")[0]}:null}function Tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.version,n=void 0===t?100:t,i=e.input,r=e.inputType,a=e.output;if(!i)return 300===n?Or:Pr;var o=function(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return Ri(!1),null}}(i,r);return 300===n?"#version 300 es\nin ".concat(r," ").concat(i,";\nout vec4 ").concat(a,";\nvoid main() {\n  ").concat(a," = ").concat(o,";\n}"):"varying ".concat(r," ").concat(i,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}function Sr(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ri(!1),null}}var jr,Cr={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},Ar="transform_uSampler_",Lr="transform_uSize_",Mr="transform_position";function Fr(e){var t=e.vs,n=e.sourceTextureMap,i=e.targetTextureVarying,r=e.targetTexture,a=Object.keys(n).length,o=null,s={},u=t,l={};if(a>0||i){var c=u.split("\n"),f=c.slice();if(c.forEach(function(e,t,r){if(a>0){var u=function(e,t){var n={},i=function(e){return Er(e,["attribute","in"])}(e);if(!i)return null;var r=i.type,a=i.name;if(a&&t[a]){var o="// ".concat(e," => Replaced by Transform with a sampler"),s=function(e){var t="".concat(Ar).concat(e),n="".concat(Lr).concat(e),i="  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(n,";");return{samplerName:t,sizeName:n,uniformDeclerations:i}}(a),u=s.samplerName,l=s.sizeName,c=s.uniformDeclerations,f=function(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ri(!1),null}}(r),h="  ".concat(r," ").concat(a," = transform_getInput(").concat(u,", ").concat(l,").").concat(f,";\n");n[u]=a;var d={"vs:#decl":c,"vs:#main-start":h};return{updatedLine:o,inject:d,samplerTextureMap:n}}return null}(e,n);if(u){var c=u.updatedLine,h=u.inject;f[t]=c,l=ar([l,h]),Object.assign(s,u.samplerTextureMap),a--}}i&&!o&&(o=function(e,t){var n=Er(e,["varying","out"]);if(!n)return null;return n.name===t?n.type:null}(e,i))}),i){$(r);var h="".concat(Lr).concat(i),d="uniform vec2 ".concat(h,";\n"),p="     vec2 ".concat(Mr," = transform_getPos(").concat(h,");\n     gl_Position = vec4(").concat(Mr,", 0, 1.);\n");l=ar([l,{"vs:#decl":d,"vs:#main-start":p}])}u=f.join("\n")}return{vs:u,targetTextureType:o,inject:l,samplerTextureMap:s}}var Ir=(jr={},Object(w.a)(jr,10241,9728),Object(w.a)(jr,10240,9728),Object(w.a)(jr,10242,33071),Object(w.a)(jr,10243,33071),jr),Rr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e),$(ve(t)),this.gl=t,this.model=null,this.elementCount=0,this.currentIndex=0,this.sourceBuffers=new Array(2),this.sourceTextures=new Array(2),this.feedbackBuffers=new Array(2),this.targetTextures=new Array(2),this.transformFeedbacks=new Array(2),this.framebuffers=new Array(2),this._createdBuffers={},this.elementIDBuffer=null,this._targetRefTexName=null,this._initialize(n),Object.seal(this)}return Object(s.a)(e,null,[{key:"isSupported",value:function(e){return ve(e)}}]),Object(s.a)(e,[{key:"delete",value:function(){for(var e in this._createdBuffers)this._createdBuffers[e].delete();this.model.delete()}},{key:"getBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?this.feedbackBuffers[this.currentIndex][e]:null;return t?t instanceof De?t:t.buffer:null}},{key:"_getTargetTexture",value:function(){return this.framebuffers[this.currentIndex]?this.framebuffers[this.currentIndex].attachments[36064]:null}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.varyingName,n=void 0===t?null:t,i=e.packed,r=void 0!==i&&i,a=this.getBuffer(n);if(a)return a.getData();$(!n||n===this.targetTextureVarying);var o=yt(this.framebuffers[this.currentIndex]);if(!r)return o;for(var s=o.constructor,u=Sr(this.targetTextureType),l=new s(o.length*u/4),c=0,f=0;f<o.length;f+=4)for(var h=0;h<u;h++)l[c++]=o[f+h];return l}},{key:"getFramebuffer",value:function(){return this.framebuffers[this.currentIndex]}},{key:"_getInputs",value:function(){var e={},t=this.currentIndex,n=Object.assign({},this.sourceBuffers[t]);if(this.hasSourceTextures||this.targetTextureVarying){for(var i in n.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var r=this.samplerTextureMap[i];e[i]=this.sourceTextures[t][r]}this._setSourceTextureParameters();var a=function(e){var t,n,i=e.sourceTextureMap,r=e.targetTextureVarying,a=e.targetTexture,o={};for(var s in r&&(t=a.width,n=a.height,o["".concat(Lr).concat(r)]=[t,n]),i){var u=i[s];t=u.width,n=u.height,o["".concat(Lr).concat(s)]=[t,n]}return o}({sourceTextureMap:this.sourceTextures[t],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[t]});Object.assign(e,a)}return{attributes:n,uniforms:e}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getInputs(),n=t.attributes,i=t.uniforms;Object.assign(i,e.uniforms);var r=Object.assign({},e.parameters),a=e.clearRenderTarget,o=void 0===a||a,s=null,u=!0;this.renderingToTexture&&(u=!1,$(s=this.framebuffers[this.currentIndex]),r.viewport=[0,0,s.width,s.height],o&&this.gl.clear(this.gl.COLOR_BUFFER_BIT)),this.model.setAttributes(n),this.model.transform(Object.assign({},e,{transformFeedback:this.transformFeedbacks[this.currentIndex],uniforms:i,discard:u,framebuffer:s,parameters:r}))}},{key:"swapBuffers",value:function(){N.deprecated("swapBuffers()","swap()")(),this.swap()}},{key:"swap",value:function(){$(this.feedbackMap||this._swapTexture),this.currentIndex=(this.currentIndex+1)%2}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.elementCount&&this._setElementCount(e.elementCount);var t=e.sourceBuffers,n=void 0===t?null:t,i=e.feedbackBuffers,r=void 0===i?null:i,a=this.currentIndex;if(n||r){for(var o in r)$(r[o]instanceof De||r[o].buffer instanceof De);Object.assign(this.sourceBuffers[a],n),Object.assign(this.feedbackBuffers[a],r),this._createFeedbackBuffers({feedbackBuffers:r}),this.transformFeedbacks[a]&&this.transformFeedbacks[a].setBuffers(this.feedbackBuffers[a]),this._setupSwapBuffers()}var s=e._sourceTextures,u=e._targetTexture;(s||u)&&(Object.assign(this.sourceTextures[a],s),this._updateTargetTexture(u||this._targetRefTexName,a),this._setupSwapTextures())}},{key:"_setSourceTextureParameters",value:function(){var e=this.currentIndex;for(var t in this.sourceTextures[e])this.sourceTextures[e][t].setParameters(Ir)}},{key:"_setElementCount",value:function(e){this.elementCount!==e&&(this.elementCount<e&&this._updateElementIDBuffer(e),this.model.setVertexCount(e),this.elementCount=e)}},{key:"_updateTargetTexture",value:function(e,t){var n=this._buildTargetTexture(e);n&&(this.targetTextures[t]=n,this.framebuffers[t]&&(this.framebuffers[t].update({attachments:Object(w.a)({},36064,this.targetTextures[t]),resizeAttachments:!1}),this.framebuffers[t].resize({width:n.width,height:n.height})))}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._validateProps(e),n=t.feedbackBuffers,i=t.feedbackMap,r=e.sourceBuffers,a=e.varyings,o=e._targetTexture,s=e._targetTextureVarying,u=e._swapTexture,l=a;i&&!Array.isArray(a)&&(l=Object.values(i)),this.varyingsArray=l,this.feedbackMap=i,this._swapTexture=u,o&&(this.targetTextureVarying=s,this.renderingToTexture=!0,$(this.targetTextureVarying)),this._setupBuffers({sourceBuffers:r,feedbackBuffers:n}),this._setupTextures(e),this._setupSwapBuffers(),this._setupSwapTextures(),this._buildModel(Object.assign({},e,{id:e.id||"transform-model",drawMode:e.drawMode||0,varyings:l}))}},{key:"_validateProps",value:function(e){var t=e.feedbackBuffers,n=e.feedbackMap,i=e.destinationBuffers,r=e.sourceDestinationMap;i&&(N.deprecated("destinationBuffers","feedbackBuffers")(),t=t||i),r&&(N.deprecated("sourceDestinationMap","feedbackMap")(),n=n||r);var a=e.vs,o=e.elementCount,s=e.varyings,u=e._sourceTextures,l=e._targetTexture,c=e._targetTextureVarying,f=e._swapTexture;for(var h in $(a&&(s||n||l)&&o),t||{})$(t[h]instanceof De||t[h].buffer instanceof De);for(var d in u||{})$(u[d]instanceof qe);return $(!l||c),$(!f||u[f]),{feedbackBuffers:t,feedbackMap:n}}},{key:"_setupBuffers",value:function(e){var t=e.sourceBuffers,n=void 0===t?null:t,i=e.feedbackBuffers,r=void 0===i?null:i;this.sourceBuffers[0]=Object.assign({},n),this.feedbackBuffers[0]=Object.assign({},r),this._createFeedbackBuffers({feedbackBuffers:r}),this.sourceBuffers[1]={},this.feedbackBuffers[1]={}}},{key:"_setupTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._sourceTextures,n=e._targetTexture;if(this.sourceTextures[0]=Object.assign({},t),this.sourceTextures[1]={},this.hasSourceTextures=Object.keys(this.sourceTextures[0]).length>0,this.targetTextureVarying){var i=this._buildTargetTexture(n);$(i),this.targetTextures[0]=i,this.targetTextures[1]=null}}},{key:"_buildTargetTexture",value:function(e){var t;if(e instanceof qe)return e;var n=this.sourceTextures[0][e];return n?(this._targetRefTexName=e,function(e,t){$(e instanceof qe||e instanceof Je||e instanceof tt);var n=e.constructor,i=e.gl,r=e.width,a=e.height,o=e.format,s=e.type,u=e.dataFormat,l=e.border,c=e.mipmaps;return new n(i,Object.assign({width:r,height:a,format:o,type:s,dataFormat:u,border:l,mipmaps:c},t))}(n,{parameters:(t={},Object(w.a)(t,10241,9728),Object(w.a)(t,10240,9728),Object(w.a)(t,10242,33071),Object(w.a)(t,10243,33071),t),pixelStore:Object(w.a)({},37440,!1)})):null}},{key:"_createFeedbackBuffers",value:function(e){var t=e.feedbackBuffers;if(this.feedbackMap){var n=this.currentIndex;for(var i in this.feedbackMap){var r=this.feedbackMap[i];if(!(r===this.targetTextureVarying||t&&t[r])){var a=this.sourceBuffers[n][i],o=a.byteLength,s=a.usage,u=a.accessor,l=new De(this.gl,{byteLength:o,usage:s,accessor:u});this._createdBuffers[r]&&this._createdBuffers[r].delete(),this._createdBuffers[r]=l,this.feedbackBuffers[n][r]=l}}}}},{key:"_createNewBuffer",value:function(e,t){var n=new De(this.gl,t);return this._createdBuffers[e]&&(this._createdBuffers[e].delete(),this._createdBuffers[e]=n),n}},{key:"_setupSwapBuffers",value:function(){if(this.feedbackMap){var e=this.currentIndex,t=(e+1)%2;for(var n in Object.assign(this.sourceBuffers[t],this.sourceBuffers[e]),Object.assign(this.feedbackBuffers[t],this.feedbackBuffers[e]),this.feedbackMap){var i=this.feedbackMap[n];i!==this.targetTextureVarying&&(this.sourceBuffers[t][n]=this.feedbackBuffers[e][i],this.feedbackBuffers[t][i]=this.sourceBuffers[e][n],$(this.feedbackBuffers[t][i]instanceof De))}this.transformFeedbacks[t]&&this.transformFeedbacks[t].setBuffers(this.feedbackBuffers[t])}}},{key:"_setupSwapTextures",value:function(){if(this._swapTexture&&this.targetTextureVarying){var e=this.currentIndex,t=(e+1)%2;Object.assign(this.sourceTextures[t],this.sourceTextures[e]),this.sourceTextures[t][this._swapTexture]=this.targetTextures[e],this._updateTargetTexture(this.sourceTextures[e][this._swapTexture],t)}}},{key:"_buildModel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getShaders(e),n=t.vs,i=t.fs,r=t.modules,a=t.uniforms,o=t.inject,s=t.samplerTextureMap;this.model=new kr(this.gl,Object.assign({},e,{vs:n,fs:i,vertexCount:e.elementCount,modules:r,uniforms:a,inject:o})),this.samplerTextureMap=s,this._setupTransformFeedback(),this._setupFramebuffers(),this._setElementCount(e.elementCount)}},{key:"_setupTransformFeedback",value:function(){ne(this.feedbackBuffers[0])||(this.transformFeedbacks[0]=new Tn(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[0]}),this.feedbackMap&&(this.transformFeedbacks[1]=new Tn(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[1]})))}},{key:"_setupFramebuffers",value:function(){if(this.renderingToTexture){var e=this.targetTextures[0],t=e.width,n=e.height;if(this.framebuffers[0]=new Tt(this.gl,{id:"".concat(this.id||"transform","-framebuffer-0"),width:t,height:n,attachments:Object(w.a)({},36064,this.targetTextures[0])}),this._swapTexture){var i=this.targetTextures[1];t=i.width,n=i.height,this.framebuffers[1]=new Tt(this.gl,{id:"".concat(this.id||"transform","-framebuffer-1"),width:t,height:n,attachments:Object(w.a)({},36064,this.targetTextures[1])})}}}},{key:"_updateElementIDBuffer",value:function(e){if(this.hasSourceTextures||this.targetTextureVarying){var t=new Float32Array(e);t.forEach(function(e,t,n){n[t]=t}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new De(this.gl,{data:t,accessor:{size:1}})}}},{key:"_getShaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._processVertexShader(e.vs),n=t.vs,i=t.uniforms,r=t.targetTextureType,a=t.inject,o=t.samplerTextureMap,s=ar([e.inject||{},a]);this.targetTextureType=r;var u=Tr({version:Dt(n),input:this.targetTextureVarying,inputType:r,output:"transform_output"}),l=this.hasSourceTextures||this.targetTextureVarying?[Cr].concat(e.modules||[]):e.modules;return{vs:n,fs:u,modules:l,uniforms:i,inject:s,samplerTextureMap:o}}},{key:"_processVertexShader",value:function(e){return Fr({vs:e,sourceTextureMap:this.sourceTextures[this.currentIndex],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[this.currentIndex]})}}]),e}(),Nr="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",Dr=[-1,-1,1,-1,-1,1,1,1],Br=function(e){function t(e,n){var i;Object(o.a)(this,t);var r=Dr.map(function(e){return-1===e?0:e});return(i=c(this,f(t).call(this,e,Object.assign({},n,{vs:Nr,geometry:new Xn({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(Dr)},aTexCoord:{size:2,value:new Float32Array(r)},aCoordinate:{size:2,value:new Float32Array(r)}}})})))).setVertexCount(4),i}return d(t,kr),t}(),zr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.gl,i=t._cachePrograms,r=void 0!==i&&i;Object(o.a)(this,e),$(n),this.gl=n,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=r}return Object(s.a)(e,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(e,t){$("string"==typeof t),$(this._compareContexts(e,this.gl));var n=this.vertexShaders[t];return n||(n=new Gt(e,t),this.vertexShaders[t]=n),n}},{key:"getFragmentShader",value:function(e,t){$("string"==typeof t),$(this._compareContexts(e,this.gl));var n=this.fragmentShaders[t];return n||(n=new Wt(e,t),this.fragmentShaders[t]=n),n}},{key:"getProgram",value:function(e,t){$(this._compareContexts(e,this.gl)),$("string"==typeof t.vs),$("string"==typeof t.fs),$("string"==typeof t.id);var n=this._getProgramKey(t),i=this.programs[n];return i?(this._resetProgram(i),i):(i=this._createNewProgram(e,t),this._cachePrograms&&this._checkProgramProp(i)&&(i._isCached=!0,this.programs[n]=i),i)}},{key:"_getProgramKey",value:function(e){return"".concat(e.id,"-").concat(e.vs,"-").concat(e.fs)}},{key:"_checkProgramProp",value:function(e){return!e.varyings}},{key:"_createNewProgram",value:function(e,t){var n=t.vs,i=t.fs,r=this.getVertexShader(e,n),a=this.getFragmentShader(e,i);return new On(this.gl,Object.assign({},t,{vs:r,fs:a}))}},{key:"_resetProgram",value:function(e,t){e.reset()}},{key:"_compareContexts",value:function(e,t){return(e.gl||e)===(t.gl||t)}}]),e}(),Ur=(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e);var i=n.onInitialize,r=void 0===i?function(){}:i,a=n.onFinalize,s=void 0===a?function(){}:a,u=n.useDevicePixels,l=void 0===u||u,c=n.autoResizeDrawingBuffer,f=void 0===c||c;this.props={onInitialize:r,onFinalize:s},this.setProps({autoResizeDrawingBuffer:f,useDevicePixels:l}),$(t instanceof Worker),this.worker=t,this.canvas=null,this.width=null,this.height=null,this._running=!1,this._animationFrameId=null,this._resolveNextFrame=null,this._nextFramePromise=null,this._onMessage=this._onMessage.bind(this),this._onEvent=this._onEvent.bind(this),this._updateFrame=this._updateFrame.bind(this)}Object(s.a)(e,null,[{key:"createWorker",value:function(e){return function(t){e.setProps({useDevicePixels:!1,autoResizeDrawingBuffer:!1}),t.canvas=null,t.addEventListener("message",function(n){switch(n.data.command){case"start":i=n.data.opts.canvas,r=new Map,i.addEventListener=function(e,n){t.postMessage({command:"addEventListener",type:e}),r.has(e)||r.set(e,[]),r.get(e).push(n)},i.removeEventListener=function(e,n){t.postMessage({command:"removeEventListener",type:e});var i=r.get(e);i&&i.splice(i.indexOf(n),1)},i.dispatchEvent=function(e,t){var n=r.get(e);n&&n.forEach(function(e){return e(t)})},t.canvas=i,e.start(n.data.opts);break;case"stop":e.stop();break;case"resize":t.canvas.width=n.data.width,t.canvas.height=n.data.height;break;case"event":t.canvas.dispatchEvent(n.data.type,n.data.event)}var i,r})}}}]),Object(s.a)(e,[{key:"setProps",value:function(e){return"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running?this:(this._running=!0,this.worker.onmessage=this._onMessage,le().then(function(){return e._running?(e._createAndTransferCanvas(t),e.props.onInitialize(e)):null}).then(function(){e._running&&(e._animationFrameId=ye(e._updateFrame))}),this)}},{key:"stop",value:function(){return this._running&&(be(this._animationFrameId),this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1,this.props.onFinalize(this)),this.worker.postMessage({command:"stop"}),this}},{key:"waitForRender",value:function(){var e=this;return this._nextFramePromise||(this._nextFramePromise=new Promise(function(t){e._resolveNextFrame=t})),this._nextFramePromise}},{key:"_onMessage",value:function(e){switch(e.data.command){case"addEventListener":this.canvas.addEventListener(e.data.type,this._onEvent);break;case"removeEventListener":this.canvas.removeEventListener(e.data.type,this._onEvent)}}},{key:"_onEvent",value:function(e){var t=this.useDevicePixels&&window.devicePixelRatio||1,n=e.type,i={};for(var r in e){var a=e[r],o=Object(u.a)(a);"offsetX"!==r&&"offsetY"!==r||(a*=t),"number"!==o&&"boolean"!==o&&"string"!==o||(i[r]=a)}this.worker.postMessage({command:"event",type:n,event:i})}},{key:"_updateFrame",value:function(){this._resizeCanvasDrawingBuffer(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._animationFrameId=ye(this._updateFrame)}},{key:"_createAndTransferCanvas",value:function(e){var t=ce(e);t.transferControlToOffscreen||N.error("OffscreenCanvas is not available in your browser.")();var n=t.transferControlToOffscreen();this.worker.postMessage({command:"start",opts:Object.assign({},e,{canvas:n})},[n]),this.canvas=t}},{key:"_resizeCanvasDrawingBuffer",value:function(){if(this.autoResizeDrawingBuffer){var e=this.useDevicePixels&&window.devicePixelRatio||1,t=this.canvas.clientWidth*e,n=this.canvas.clientHeight*e;this.width===t&&this.height===n||(this.width=t,this.height=n,this.worker.postMessage({command:"resize",width:t,height:n}))}}}])}(),function(){function e(t,n){Object(o.a)(this,e);var i=n.id,r=void 0===i?"pass":i;this.id=r,this.gl=t,this.props={enabled:!0,screen:!1,swap:!1},Object.assign(this.props,n)}return Object(s.a)(e,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(e,t){var n=this;if(this.props.enabled){var i=this.gl,r={gl:i,outputBuffer:e.writeBuffer,inputBuffer:e.readBuffer,animationProps:t,swapBuffers:function(){return e._swapFramebuffers()}};this.props.screen?(r.inputBuffer=r.outputBuffer,r.outputBuffer=Tt.getDefaultFramebuffer(i)):this.props.swap&&(r.inputBuffer=e.writeBuffer,r.outputBuffer=e.readBuffer),q(i,{framebuffer:r.outputBuffer},function(){return n._renderPass(r)}),this.props.debug&&r.outputBuffer.log(1,this.id),this.props.swap&&e._swapFramebuffers()}}},{key:"_renderPass",value:function(e){e.gl,e.inputBuffer,e.outputBuffer,e.animationProps}}]),e}()),Vr=function(e){function t(e,n){return Object(o.a)(this,t),n=Array.isArray(n)?{passes:n}:n,c(this,f(t).call(this,e,Object.assign({id:"composite-pass"},n)))}return d(t,Ur),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.passes,t=void 0===e?[]:e,n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.render.apply(s,arguments)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}}]),t}(),Gr=function(){function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(o.a)(this,e),this.gl=t,this.framebuffer1=new Tt(t,{id:"multi-pass-1",stencil:!0}),this.framebuffer2=new Tt(t,{id:"multi-pass-2",stencil:!0}),this.reset()}return Object(s.a)(e,[{key:"reset",value:function(){this.framebuffer1.resize(),this.framebuffer2.resize(),this.writeBuffer=this.framebuffer1,this.readBuffer=this.framebuffer2,this.maskActive=!1}},{key:"_swapFramebuffers",value:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}}]),e}(),Wr=(function(e){function t(e,n){var i;return Object(o.a)(this,t),n=Array.isArray(n)?{passes:n}:n,(i=c(this,f(t).call(this,e,Object.assign({id:"multi-pass"},n)))).renderState=new Gr(e,n),i}d(t,Vr),Object(s.a)(t,[{key:"render",value:function(e){this.renderState.reset();var t=this.props.passes,n=void 0===t?[]:t,i=!0,r=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){o.value.render(this.renderState,e)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return this}}])}(),function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),c(this,f(t).call(this,e,Object.assign({id:"clear-pass"},n)))}d(t,Ur),Object(s.a)(t,[{key:"_renderPass",value:function(e){var t=e.gl,n=this.props.clearBits,i=void 0===n?16640:n;t.clear(i)}}])}(),function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),c(this,f(t).call(this,e,Object.assign({id:"render-pass"},n)))}d(t,Ur),Object(s.a)(t,[{key:"_renderPass",value:function(e){var t=e.animationProps,n=this.props,i=n.models,r=void 0===i?[]:i,a=n.drawParams,o=!0,s=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){l.value.draw(Object.assign({},a,{animationProps:t}))}}catch(e){s=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}}}])}(),"uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\n\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n"),Hr=(function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),(n=c(this,f(t).call(this,e,Object.assign({id:"copy-pass",swap:!0},i)))).clipspace=new Br(e,{id:"copy-pass",fs:Wr}),n}d(t,Ur),Object(s.a)(t,[{key:"_renderPass",value:function(e){var t=e.inputBuffer,n=this.props.opacity,i=void 0===n?1:n;this.clipspace.draw({uniforms:{uDiffuseSampler:t,uOpacity:i},parameters:{depthWrite:!1,depthTest:!1}})}}])}(),"uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n"),Xr=(function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,t),n=c(this,f(t).call(this,e,Object.assign({id:"texture-pass"},i)));var r=i.texture,a=i.opacity,s=void 0===a?1:a;return n.clipspace=new Br(e,{id:"texture-pass",fs:Hr,uniforms:{uDiffuseSampler:r,uOpacity:s}}),n}d(t,Ur),Object(s.a)(t,[{key:"_renderPass",value:function(){this.clipspace.draw({parameters:{depthWrite:!1,depthTest:!1}})}}])}(),{boolean:{validate:function(e,t){return!0}},number:{validateType:function(e,t){return"value"in t&&(!("max"in t)||Number.isFinite(t.max))&&(!("min"in t)||Number.isFinite(t.min))},validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}}});function qr(e,t){switch(Yr(t)){case"object":return function(e){var t=e.type;(Xr[t]||{}).typeValidator;return e}(t=function(e,t){if(!("type"in t))return"value"in t?Object.assign({name:e,type:Yr(t.value)},t):{name:e,type:"object",value:t};return Object.assign({name:e},t)}(e,t));case"array":return function(e,t){if(/color/i.test(e)&&(3===t.length||4===t.length))return{name:e,type:"color",value:t};return{name:e,type:"array",value:t}}(e,t);case"boolean":return{name:e,type:"boolean",value:t};case"number":return function(e,t){var n=/radius|scale|width|height|pixel|size|miter/i.test(e)&&/^((?!scale).)*$/.test(e)?100:1;return{name:e,type:"number",max:Math.max(t,n),min:Math.min(t,0),value:t}}(e,t);case"function":return{name:e,type:"function",value:t};default:return{name:e,type:"unknown",value:t}}}function Yr(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":null===e?"null":Object(u.a)(e)}function Zr(e){if(!e.normalized){if(e.normalized=!0,e.uniforms){var t=function(e){for(var t={},n={},i=0,r=Object.entries(e);i<r.length;i++){var a=v(r[i],2),o=a[0],s=qr(o,a[1]);t[o]=s,n[o]=s.value}return{propTypes:t,defaultProps:n}}(e.uniforms).propTypes;e.uniforms=t}e.uniforms&&!e.getUniforms&&(e.getUniforms=function(e,t){var n={};if(void 0===t){for(var i in e.uniforms)n[i]=e.uniforms[i].value;return n}for(var r in t)n[r]=t[r];return n}.bind(null,e))}return e}var Qr=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),c(this,f(t).call(this,e,Object.assign({swap:!0},n)))}return d(t,Ur),Object(s.a)(t,[{key:"_renderPass",value:function(e){var t=e.inputBuffer;e.swapBuffers;this.props.model.setUniforms(this.props),this.props.model.draw({uniforms:{texture:t,texSize:[t.width,t.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),t}();!function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,t);var a="".concat(n.name,"-pass");Zr(n);var s=function(e,t,n,i){if(t.filter||t.sampler){var r=ea(t),a=new Qr(e,{id:n,model:Kr(e,t,r,n,i),uniforms:null});return[a]}var o=t.passes||[];return o.map(function(r){var a=ea(t,r),s="".concat(n,"-").concat(o.length+1);return new Qr(e,Object.assign({id:s,model:Kr(e,t,a,s,i),uniforms:r.uniforms},i))})}(e,n,a,r);return(i=c(this,f(t).call(this,e,Object.assign({id:a,passes:s},r)))).module=n,i}d(t,Vr),Object(s.a)(t,[{key:"_renderPass",value:function(e){var t=e.inputBuffer,n=e.swapBuffers,i=!0,r=!0,a=!1,o=void 0;try{for(var s,u=this.module.passes[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;i||n(),i=!1,l.uniforms&&l.model.setUniforms(l.uniforms),l.model.draw({uniforms:{texture:t,texSize:[t.width,t.height]},parameters:{depthWrite:!1,depthTest:!1}})}}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}}}])}();function Kr(e,t,n,i,r){var a=new Br(e,{id:i,fs:n,modules:[t]}),o=Object.assign(t.getUniforms(),t.getUniforms(r));return a.setUniforms(o),a}var $r=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(e,"(gl_FragColor, texSize, texCoord);\n}\n")},Jr=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(e,"(texture, texSize, texCoord);\n}\n")};function ea(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t.filter){var n="string"==typeof t.filter?t.filter:"".concat(e.name,"_filterColor");return $r(n)}if(t.sampler){var i="string"==typeof t.sampler?t.sampler:"".concat(e.name,"_sampleColor");return Jr(i)}return null}var ta={x:[2,0,1],y:[0,1,2],z:[1,2,0]},na=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,t);var n=e.id,i=void 0===n?ee("truncated-code-geometry"):n,r=function(e){for(var t=e.bottomRadius,n=void 0===t?0:t,i=e.topRadius,r=void 0===i?0:i,a=e.height,o=void 0===a?1:a,s=e.nradial,u=void 0===s?10:s,l=e.nvertical,c=void 0===l?10:l,f=e.verticalAxis,h=void 0===f?"y":f,d=e.topCap,p=void 0!==d&&d,v=e.bottomCap,g=void 0!==v&&v,m=(p?2:0)+(g?2:0),y=(u+1)*(c+1+m),b=Math.atan2(n-r,o),_=Math.sin,w=Math.cos,x=Math.PI,k=w(b),P=_(b),O=p?-2:0,E=c+(g?2:0),T=u+1,S=new Uint16Array(u*(c+m)*6),j=ta[h],C=new Float32Array(3*y),A=new Float32Array(3*y),L=new Float32Array(2*y),M=0,F=0,I=O;I<=E;I++){var R=I/c,N=o*R,D=void 0;I<0?(N=0,R=1,D=n):I>c?(N=o,R=1,D=r):D=n+I/c*(r-n),-2!==I&&I!==c+2||(D=0,R=0),N-=o/2;for(var B=0;B<T;B++){var z=_(B*x*2/u),U=w(B*x*2/u);C[M+j[0]]=z*D,C[M+j[1]]=N,C[M+j[2]]=U*D,A[M+j[0]]=I<0||I>c?0:z*k,A[M+j[1]]=I<0?-1:I>c?1:P,A[M+j[2]]=I<0||I>c?0:U*k,L[F+0]=B/u,L[F+1]=R,F+=2,M+=3}}for(var V=0;V<c+m;V++)for(var G=0;G<u;G++){var W=6*(V*u+G);S[W+0]=T*(V+0)+0+G,S[W+1]=T*(V+0)+1+G,S[W+2]=T*(V+1)+1+G,S[W+3]=T*(V+0)+0+G,S[W+4]=T*(V+1)+1+G,S[W+5]=T*(V+1)+0+G}return{indices:S,attributes:{POSITION:{size:3,value:C},NORMAL:{size:3,value:A},TEXCOORD_0:{size:2,value:L}}}}(e),a=r.indices,s=r.attributes;return c(this,f(t).call(this,Z({},e,{id:i,indices:a,attributes:Z({},s,e.attributes)})))}return d(t,Xn),t}();!function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,t);var n=e.id,i=void 0===n?ee("cone-geometry"):n,r=e.radius,a=void 0===r?1:r,s=e.cap,u=void 0===s||s;return c(this,f(t).call(this,Z({},e,{id:i,topRadius:0,topCap:Boolean(u),bottomCap:Boolean(u),bottomRadius:a})))}d(t,na)}();var ia=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),ra=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),aa=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),oa=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),sa={POSITION:{size:3,value:new Float32Array(ra)},NORMAL:{size:3,value:new Float32Array(aa)},TEXCOORD_0:{size:2,value:new Float32Array(oa)}},ua=(function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,t);var n=e.id,i=void 0===n?ee("cube-geometry"):n;return c(this,f(t).call(this,Z({},e,{id:i,indices:{size:1,value:new Uint16Array(ia)},attributes:Z({},sa,e.attributes)})))}d(t,Xn)}(),function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,t);var n=e.id,i=void 0===n?ee("cylinder-geometry"):n,r=e.radius,a=void 0===r?1:r;return c(this,f(t).call(this,Z({},e,{id:i,bottomRadius:a,topRadius:a})))}d(t,na)}(),[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0]),la=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1];!function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,t);var n=e.id,i=void 0===n?ee("ico-sphere-geometry"):n,r=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).iterations,t=void 0===e?0:e,n=Math.PI,i=2*n,r=[].concat(ua),a=[].concat(la);r.push(),a.push();for(var o=function(){var e={};return function(t,n){var i=(t*=3)<(n*=3)?t:n,a=t>n?t:n,o="".concat(i,"|").concat(a);if(o in e)return e[o];var s=r[t],u=r[t+1],l=r[t+2],c=r[n],f=r[n+1],h=r[n+2],d=(s+c)/2,p=(u+f)/2,v=(l+h)/2,g=Math.sqrt(d*d+p*p+v*v);return d/=g,p/=g,v/=g,r.push(d,p,v),e[o]=r.length/3-1}}(),s=0;s<t;s++){for(var u=[],l=0;l<a.length;l+=3){var c=o(a[l+0],a[l+1]),f=o(a[l+1],a[l+2]),h=o(a[l+2],a[l+0]);u.push(h,a[l+0],c,c,a[l+1],f,f,a[l+2],h,c,f,h)}a=u}for(var d=new Array(3*a.length),p=new Array(2*a.length),v=a.length-3;v>=0;v-=3){var g=a[v+0],m=a[v+1],y=a[v+2],b=3*g,_=3*m,w=3*y,x=2*g,k=2*m,P=2*y,O=r[b+0],E=r[b+1],T=r[b+2],S=Math.acos(T/Math.sqrt(O*O+E*E+T*T)),j=Math.atan2(E,O)+n,C=S/n,A=1-j/i,L=r[_+0],M=r[_+1],F=r[_+2],I=Math.acos(F/Math.sqrt(L*L+M*M+F*F)),R=Math.atan2(M,L)+n,N=I/n,D=1-R/i,B=r[w+0],z=r[w+1],U=r[w+2],V=Math.acos(U/Math.sqrt(B*B+z*z+U*U)),G=Math.atan2(z,B)+n,W=V/n,H=1-G/i,X=[B-L,z-M,U-F],q=[O-L,E-M,T-F],Y=new yi(X).cross(q).normalize(),Z=void 0;(0===A||0===D||0===H)&&(0===A||A>.5)&&(0===D||D>.5)&&(0===H||H>.5)&&(r.push(r[b+0],r[b+1],r[b+2]),Z=r.length/3-1,a.push(Z),p[2*Z+0]=1,p[2*Z+1]=C,d[3*Z+0]=Y.x,d[3*Z+1]=Y.y,d[3*Z+2]=Y.z,r.push(r[_+0],r[_+1],r[_+2]),Z=r.length/3-1,a.push(Z),p[2*Z+0]=1,p[2*Z+1]=N,d[3*Z+0]=Y.x,d[3*Z+1]=Y.y,d[3*Z+2]=Y.z,r.push(r[w+0],r[w+1],r[w+2]),Z=r.length/3-1,a.push(Z),p[2*Z+0]=1,p[2*Z+1]=W,d[3*Z+0]=Y.x,d[3*Z+1]=Y.y,d[3*Z+2]=Y.z),d[b+0]=d[_+0]=d[w+0]=Y.x,d[b+1]=d[_+1]=d[w+1]=Y.y,d[b+2]=d[_+2]=d[w+2]=Y.z,p[x+0]=A,p[x+1]=C,p[k+0]=D,p[k+1]=N,p[P+0]=H,p[P+1]=W}return{indices:{size:1,value:new Uint16Array(a)},attributes:{POSITION:{size:3,value:new Float32Array(r)},NORMAL:{size:3,value:new Float32Array(d)},TEXCOORD_0:{size:2,value:new Float32Array(p)}}}}(e),a=r.indices,s=r.attributes;return c(this,f(t).call(this,Z({},e,{id:i,indices:a,attributes:Z({},s,e.attributes)})))}d(t,Xn)}();!function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,t);var n=e.id,i=void 0===n?ee("plane-geometry"):n,r=function(e){var t=e.type,n=void 0===t?"x,y":t,i=e.offset,r=void 0===i?0:i,a=e.flipCull,o=void 0!==a&&a,s=e.unpack,u=void 0!==s&&s,l=n.split(","),c=e["".concat(l[0],"len")],f=e["".concat(l[1],"len")],h=e["n".concat(l[0])]||1,d=e["n".concat(l[1])]||1,p=(h+1)*(d+1),v=new Float32Array(3*p),g=new Float32Array(3*p),m=new Float32Array(2*p);o&&(c=-c);for(var y=0,b=0,_=0;_<=d;_++)for(var w=0;w<=h;w++){var x=w/h,k=_/d;switch(m[y+0]=o?1-x:x,m[y+1]=k,n){case"x,y":v[b+0]=c*x-.5*c,v[b+1]=f*k-.5*f,v[b+2]=r,g[b+0]=0,g[b+1]=0,g[b+2]=o?1:-1;break;case"x,z":v[b+0]=c*x-.5*c,v[b+1]=r,v[b+2]=f*k-.5*f,g[b+0]=0,g[b+1]=o?1:-1,g[b+2]=0;break;case"y,z":v[b+0]=r,v[b+1]=c*x-.5*c,v[b+2]=f*k-.5*f,g[b+0]=o?1:-1,g[b+1]=0,g[b+2]=0}y+=2,b+=3}for(var P=h+1,O=new Uint16Array(h*d*6),E=0;E<d;E++)for(var T=0;T<h;T++){var S=6*(E*h+T);O[S+0]=(E+0)*P+T,O[S+1]=(E+1)*P+T,O[S+2]=(E+0)*P+T+1,O[S+3]=(E+1)*P+T,O[S+4]=(E+1)*P+T+1,O[S+5]=(E+0)*P+T+1}var j={indices:{size:1,value:O},attributes:{POSITION:{size:3,value:v},NORMAL:{size:3,value:g},TEXCOORD_0:{size:2,value:m}}};return u?function(e){var t=e.indices,n=e.attributes;if(!t)return e;for(var i=n.POSITION,r=n.NORMAL,a=n.TEXCOORD_0,o=new Float32Array(3*t.length),s=new Float32Array(3*t.length),u=new Float32Array(2*t.length),l=0;l<t.length;++l){var c=t[l];o[3*l+0]=i[3*c+0],o[3*l+1]=i[3*c+1],o[3*l+2]=i[3*c+2],s[3*l+0]=r[3*c+0],s[3*l+1]=r[3*c+1],s[3*l+2]=r[3*c+2],u[2*l+0]=a[2*c+0],u[2*l+1]=a[2*c+1]}return{attributes:{POSITION:o,NORMAL:s,TEXCOORD_0:u}}}(j):j}(e),a=r.indices,s=r.attributes;return c(this,f(t).call(this,Z({},e,{id:i,indices:a,attributes:Z({},s,e.attributes)})))}d(t,Xn)}();!function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,t);var n=e.id,i=void 0===n?ee("sphere-geometry"):n,r=function(e){var t=e.nlat,n=void 0===t?10:t,i=e.nlong,r=void 0===i?10:i,a=e.radius,o=void 0===a?1:a,s=Math.PI-0,u=2*Math.PI-0,l=(n+1)*(r+1);if("number"==typeof o){var c=o;o=function(e,t,n,i,r){return c}}for(var f=new Float32Array(3*l),h=new Float32Array(3*l),d=new Float32Array(2*l),p=new Uint16Array(n*r*6),v=0;v<=n;v++)for(var g=0;g<=r;g++){var m=g/r,y=v/n,b=g+v*(r+1),_=2*b,w=3*b,x=u*m,k=s*y,P=Math.sin(x),O=Math.cos(x),E=Math.sin(k),T=Math.cos(k),S=O*E,j=T,C=P*E,A=o(S,j,C,m,y);f[w+0]=A*S,f[w+1]=A*j,f[w+2]=A*C,h[w+0]=S,h[w+1]=j,h[w+2]=C,d[_+0]=m,d[_+1]=1-y}for(var L=n+1,M=0;M<n;M++)for(var F=0;F<r;F++){var I=6*(M*r+F);p[I+0]=F*L+M,p[I+1]=F*L+M+1,p[I+2]=(F+1)*L+M,p[I+3]=(F+1)*L+M,p[I+4]=F*L+M+1,p[I+5]=(F+1)*L+M+1}return{indices:{size:1,value:p},attributes:{POSITION:{size:3,value:f},NORMAL:{size:3,value:h},TEXCOORD_0:{size:2,value:d}}}}(e),a=r.indices,s=r.attributes;return c(this,f(t).call(this,Z({},e,{id:i,indices:a,attributes:Z({},s,e.attributes)})))}d(t,Xn)}();var ca={ambient:.35,diffuse:.6,shininess:32,specularColor:[30,30,30]},fa=function(e){function t(e){var n;return Object(o.a)(this,t),n=c(this,f(t).call(this,e)),e=Object.assign({},ca,e),Object.assign(l(n),e),n}return d(t,qn),t}();!function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}d(t,qn)}();function ha(e,t){return e.length===t&&e.every(Number.isFinite)}function da(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function pa(e,t){return e[0]=-t[0],e[1]=-t[1],e}!function(){var e=function(){var e=new ci(2);return ci!=Float32Array&&(e[0]=0,e[1]=0),e}()}();var va=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(o.a)(this,t),e=c(this,f(t).call(this,2)),Array.isArray(n)&&1===arguments.length?e.copy(n):e.set(n,i),e}return d(t,ui),Object(s.a)(t,[{key:"cross",value:function(e){return function(e,t,n){var i=t[0]*n[1]-t[1]*n[0];e[0]=e[1]=0,e[2]=i}(this,this,e),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),t}(),ga=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(o.a)(this,t),e=c(this,f(t).call(this,4)),Array.isArray(n)&&1===arguments.length?e.copy(n):e.set(n,i,r,a),e}return d(t,ui),Object(s.a)(t,[{key:"applyMatrix4",value:function(e){return e.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Qn(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=Qn(e)}}]),t}();function ma(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],y=n*s-i*o,b=n*u-r*o,_=n*l-a*o,w=i*u-r*s,x=i*l-a*s,k=r*l-a*u,P=c*v-f*p,O=c*g-h*p,E=c*m-d*p,T=f*g-h*v,S=f*m-d*v,j=h*m-d*g,C=y*j-b*S+_*T+w*E-x*O+k*P;return C?(C=1/C,e[0]=(s*j-u*S+l*T)*C,e[1]=(r*S-i*j-a*T)*C,e[2]=(v*k-g*x+m*w)*C,e[3]=(h*x-f*k-d*w)*C,e[4]=(u*E-o*j-l*O)*C,e[5]=(n*j-r*E+a*O)*C,e[6]=(g*_-p*k-m*b)*C,e[7]=(c*k-h*_+d*b)*C,e[8]=(o*S-s*E+l*P)*C,e[9]=(i*E-n*S-a*P)*C,e[10]=(p*x-v*_+m*y)*C,e[11]=(f*_-c*x-d*y)*C,e[12]=(s*O-o*T-u*P)*C,e[13]=(n*T-i*O+r*P)*C,e[14]=(v*b-p*w-g*y)*C,e[15]=(c*w-f*b+h*y)*C,e):null}function ya(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],g=t[13],m=t[14],y=t[15],b=n[0],_=n[1],w=n[2],x=n[3];return e[0]=b*i+_*s+w*f+x*v,e[1]=b*r+_*u+w*h+x*g,e[2]=b*a+_*l+w*d+x*m,e[3]=b*o+_*c+w*p+x*y,b=n[4],_=n[5],w=n[6],x=n[7],e[4]=b*i+_*s+w*f+x*v,e[5]=b*r+_*u+w*h+x*g,e[6]=b*a+_*l+w*d+x*m,e[7]=b*o+_*c+w*p+x*y,b=n[8],_=n[9],w=n[10],x=n[11],e[8]=b*i+_*s+w*f+x*v,e[9]=b*r+_*u+w*h+x*g,e[10]=b*a+_*l+w*d+x*m,e[11]=b*o+_*c+w*p+x*y,b=n[12],_=n[13],w=n[14],x=n[15],e[12]=b*i+_*s+w*f+x*v,e[13]=b*r+_*u+w*h+x*g,e[14]=b*a+_*l+w*d+x*m,e[15]=b*o+_*c+w*p+x*y,e}function ba(e,t,n){var i,r,a,o,s,u,l,c,f,h,d,p,v=n[0],g=n[1],m=n[2];return t===e?(e[12]=t[0]*v+t[4]*g+t[8]*m+t[12],e[13]=t[1]*v+t[5]*g+t[9]*m+t[13],e[14]=t[2]*v+t[6]*g+t[10]*m+t[14],e[15]=t[3]*v+t[7]*g+t[11]*m+t[15]):(i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],e[0]=i,e[1]=r,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=h,e[10]=d,e[11]=p,e[12]=i*v+s*g+f*m+t[12],e[13]=r*v+u*g+h*m+t[13],e[14]=a*v+l*g+d*m+t[14],e[15]=o*v+c*g+p*m+t[15]),e}function _a(e,t,n){var i=n[0],r=n[1],a=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function wa(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*r+l*i,e[5]=o*r+c*i,e[6]=s*r+f*i,e[7]=u*r+h*i,e[8]=l*r-a*i,e[9]=c*r-o*i,e[10]=f*r-s*i,e[11]=h*r-u*i,e}function xa(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r+l*i,e[1]=o*r+c*i,e[2]=s*r+f*i,e[3]=u*r+h*i,e[4]=l*r-a*i,e[5]=c*r-o*i,e[6]=f*r-s*i,e[7]=h*r-u*i,e}function ka(e,t,n,i,r){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(a=1/(i-r),e[10]=(r+i)*a,e[14]=2*r*i*a):(e[10]=-1,e[14]=-2*i),e}function Pa(e,t){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],y=t[0],b=t[1],_=t[2],w=t[3],x=t[4],k=t[5],P=t[6],O=t[7],E=t[8],T=t[9],S=t[10],j=t[11],C=t[12],A=t[13],L=t[14],M=t[15];return Math.abs(n-y)<=li*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-b)<=li*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(r-_)<=li*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(a-w)<=li*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-x)<=li*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-k)<=li*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(u-P)<=li*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(l-O)<=li*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(c-E)<=li*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(f-T)<=li*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(h-S)<=li*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(d-j)<=li*Math.max(1,Math.abs(d),Math.abs(j))&&Math.abs(p-C)<=li*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(v-A)<=li*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(g-L)<=li*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(m-M)<=li*Math.max(1,Math.abs(m),Math.abs(M))}function Oa(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*a+n[12]*o,e[1]=n[1]*i+n[5]*r+n[9]*a+n[13]*o,e[2]=n[2]*i+n[6]*r+n[10]*a+n[14]*o,e[3]=n[3]*i+n[7]*r+n[11]*a+n[15]*o,e}!function(){var e=function(){var e=new ci(4);return ci!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();var Ea=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var Ta=function(e){function t(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return Object(o.a)(this,t),e=c(this,f(t).call(this,16)),Array.isArray(i[0])&&1===arguments.length?e.copy(i[0]):e.identity(),e}return d(t,oi),Object(s.a)(t,[{key:"setRowMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,p=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=e,this[1]=r,this[2]=u,this[3]=h,this[4]=t,this[5]=a,this[6]=l,this[7]=d,this[8]=n,this[9]=o,this[10]=c,this[11]=p,this[12]=i,this[13]=s,this[14]=f,this[15]=v,this.check()}},{key:"setColumnMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,p=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=e,this[1]=t,this[2]=n,this[3]=i,this[4]=r,this[5]=a,this[6]=o,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=f,this[12]=h,this[13]=d,this[14]=p,this[15]=v,this.check()}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?this[e][t]:this[t][e]}},{key:"setElement",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i?this[e][t]=Qn(n):this[t][e]=Qn(n),this}},{key:"determinant",value:function(){return t=(e=this)[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],g=e[15],(t*o-n*a)*(f*g-h*v)-(t*s-i*a)*(c*g-h*p)+(t*u-r*a)*(c*v-f*p)+(n*s-i*o)*(l*g-h*d)-(n*u-r*o)*(l*v-f*d)+(i*u-r*s)*(l*p-c*d);var e,t,n,i,r,a,o,s,u,l,c,f,h,d,p,v,g}},{key:"identity",value:function(){return this.copy(Ea)}},{key:"fromQuaternion",value:function(e){return function(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=n+n,s=i+i,u=r+r,l=n*o,c=i*o,f=i*s,h=r*o,d=r*s,p=r*u,v=a*o,g=a*s,m=a*u;e[0]=1-f-p,e[1]=c+m,e[2]=h-g,e[3]=0,e[4]=c-m,e[5]=1-l-p,e[6]=d+v,e[7]=0,e[8]=h+g,e[9]=d-v,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this.check()}},{key:"frustum",value:function(e){return function(e,t,n,i,r,a,o){var s=1/(n-t),u=1/(r-i),l=1/(a-o);e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(r+i)*u,e[10]=(o+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*l,e[15]=0}(this,e.left,e.right,e.bottom,e.top,e.near,e.far),this.check()}},{key:"lookAt",value:function(e){var t=e.eye,n=e.center,i=void 0===n?[0,0,0]:n,r=e.up;return function(e,t,n,i){var r,a,o,s,u,l,c,f,h,d,p=t[0],v=t[1],g=t[2],m=i[0],y=i[1],b=i[2],_=n[0],w=n[1],x=n[2];Math.abs(p-_)<li&&Math.abs(v-w)<li&&Math.abs(g-x)<li?function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e):(c=p-_,f=v-w,h=g-x,r=y*(h*=d=1/Math.sqrt(c*c+f*f+h*h))-b*(f*=d),a=b*(c*=d)-m*h,o=m*f-y*c,(d=Math.sqrt(r*r+a*a+o*o))?(r*=d=1/d,a*=d,o*=d):(r=0,a=0,o=0),s=f*o-h*a,u=h*r-c*o,l=c*a-f*r,(d=Math.sqrt(s*s+u*u+l*l))?(s*=d=1/d,u*=d,l*=d):(s=0,u=0,l=0),e[0]=r,e[1]=s,e[2]=c,e[3]=0,e[4]=a,e[5]=u,e[6]=f,e[7]=0,e[8]=o,e[9]=l,e[10]=h,e[11]=0,e[12]=-(r*p+a*v+o*g),e[13]=-(s*p+u*v+l*g),e[14]=-(c*p+f*v+h*g),e[15]=1)}(this,t,i,void 0===r?[0,1,0]:r),this.check()}},{key:"ortho",value:function(e){var t=e.left,n=e.right,i=e.bottom,r=e.top,a=e.near,o=void 0===a?.1:a,s=e.far;return function(e,t,n,i,r,a,o){var s=1/(t-n),u=1/(i-r),l=1/(a-o);e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*u,e[14]=(o+a)*l,e[15]=1}(this,t,n,i,r,o,void 0===s?500:s),this.check()}},{key:"orthographic",value:function(e){var n=e.fovy,i=void 0===n?45*Math.PI/180:n,r=e.aspect,a=void 0===r?1:r,o=e.focalDistance,s=void 0===o?1:o,u=e.near,l=void 0===u?.1:u,c=e.far,f=void 0===c?500:c;if(i>2*Math.PI)throw Error("radians");var h=i/2,d=s*Math.tan(h),p=d*a;return(new t).ortho({left:-p,right:p,bottom:-d,top:d,near:l,far:f})}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fovy,n=e.fov,i=void 0===n?45*Math.PI/180:n,r=e.aspect,a=void 0===r?1:r,o=e.near,s=void 0===o?.1:o,u=e.far,l=void 0===u?500:u;if((t=t||i)>2*Math.PI)throw Error("radians");return ka(this,t,a,s,l),this.check()}},{key:"transpose",value:function(){return function(e,t){if(e===t){var n=t[1],i=t[2],r=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=a,e[11]=t[14],e[12]=r,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]}(this,this),this.check()}},{key:"invert",value:function(){return ma(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return ya(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return ya(this,this,e),this.check()}},{key:"rotateX",value:function(e){return wa(this,this,e),this.check()}},{key:"rotateY",value:function(e){return function(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[8],c=t[9],f=t[10],h=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r-l*i,e[1]=o*r-c*i,e[2]=s*r-f*i,e[3]=u*r-h*i,e[8]=a*i+l*r,e[9]=o*i+c*r,e[10]=s*i+f*r,e[11]=u*i+h*r}(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return xa(this,this,e),this.check()}},{key:"rotateXYZ",value:function(e){var t=v(e,3),n=t[0],i=t[1],r=t[2];return this.rotateX(n).rotateY(i).rotateZ(r)}},{key:"rotateAxis",value:function(e,t){return function(e,t,n,i){var r,a,o,s,u,l,c,f,h,d,p,v,g,m,y,b,_,w,x,k,P,O,E,T,S=i[0],j=i[1],C=i[2],A=Math.sqrt(S*S+j*j+C*C);A<li||(S*=A=1/A,j*=A,C*=A,r=Math.sin(n),o=1-(a=Math.cos(n)),s=t[0],u=t[1],l=t[2],c=t[3],f=t[4],h=t[5],d=t[6],p=t[7],v=t[8],g=t[9],m=t[10],y=t[11],b=S*S*o+a,_=j*S*o+C*r,w=C*S*o-j*r,x=S*j*o-C*r,k=j*j*o+a,P=C*j*o+S*r,O=S*C*o+j*r,E=j*C*o-S*r,T=C*C*o+a,e[0]=s*b+f*_+v*w,e[1]=u*b+h*_+g*w,e[2]=l*b+d*_+m*w,e[3]=c*b+p*_+y*w,e[4]=s*x+f*k+v*P,e[5]=u*x+h*k+g*P,e[6]=l*x+d*k+m*P,e[7]=c*x+p*k+y*P,e[8]=s*O+f*E+v*T,e[9]=u*O+h*E+g*T,e[10]=l*O+d*E+m*T,e[11]=c*O+p*E+y*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,this,e,t),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?_a(this,this,e):_a(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return ba(this,this,e),this.check()}},{key:"transformVector2",value:function(e,t){return function(e,t,n){var i=t[0],r=t[1];e[0]=n[0]*i+n[4]*r+n[12],e[1]=n[1]*i+n[5]*r+n[13]}(t=t||new va,e,this),ha(t,2),t}},{key:"transformVector3",value:function(e,t){return function(e,t,n){var i=t[0],r=t[1],a=t[2],o=n[3]*i+n[7]*r+n[11]*a+n[15];o=o||1,e[0]=(n[0]*i+n[4]*r+n[8]*a+n[12])/o,e[1]=(n[1]*i+n[5]*r+n[9]*a+n[13])/o,e[2]=(n[2]*i+n[6]*r+n[10]*a+n[14])/o}(t=t||new yi,e,this),ha(t,3),t}},{key:"transformVector4",value:function(e,t){return Oa(t=t||new ga,e,this),ha(t,4),t.check()}},{key:"transformVector",value:function(e,t){switch(e.length){case 2:return this.transformVector2(e,t);case 3:return this.transformVector3(e,t);case 4:return this.transformVector4(e,t);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(e,t){return this._transformVector(e,t,0)}},{key:"transformPoint",value:function(e,t){return this._transformVector(e,t,1)}},{key:"_transformVector",value:function(e,t,n){switch(e.length){case 2:Oa(t=t||new va,[e[0],e[1],0,n],this),t.length=2,ha(t,2);break;case 3:Oa(t=t||new yi,[e[0],e[1],e[2],n],this),t.length=3,ha(t,3);break;case 4:if(Boolean(n)!==Boolean(e[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");Oa(t=t||new ga,e,this),ha(t,4);break;default:throw new Error("Illegal vector")}return t}},{key:"makeRotationX",value:function(e){return this.identity().rotateX(e)}},{key:"makeTranslation",value:function(e,t,n){return this.identity().translate([e,t,n])}},{key:"ELEMENTS",get:function(){return 16}}]),t}(),Sa=function(){function e(t){Object(o.a)(this,e);var n=t.id;this.id=n||ee(this.constructor.name),this.display=!0,this.position=new yi,this.rotation=new yi,this.scale=new yi(1,1,1),this.matrix=new Ta,this.userData={},this.props={},this._setScenegraphNodeProps(t)}return Object(s.a)(e,[{key:"delete",value:function(){}},{key:"setProps",value:function(e){return this._setScenegraphNodeProps(e),this}},{key:"toString",value:function(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}},{key:"setPosition",value:function(e){return $(3===e.length,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function(e){return $(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function(e){return $(3===e.length,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrix",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?this.matrix.copy(e):this.matrix=e}},{key:"setMatrixComponents",value:function(e){var t=e.position,n=e.rotation,i=e.scale,r=e.update,a=void 0===r||r;return t&&this.setPosition(t),n&&this.setRotation(n),i&&this.setScale(i),a&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var e=this.position,t=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(n),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,n=e.rotation,i=e.scale;return t&&this.setPosition(t),n&&this.setRotation(n),i&&this.setScale(i),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(e,t){$(e),t=t||this.matrix;var n=new Ta(e).multiplyRight(t),i=n.invert(),r=i.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:n,worldInverseMatrix:i,worldInverseTransposeMatrix:r}}},{key:"transform",value:function(){if(this.parent){var e=this.parent;this.endPosition.set(this.position.add(e.endPosition)),this.endRotation.set(this.rotation.add(e.endRotation)),this.endScale.set(this.scale.add(e.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var t=this.children,n=0;n<t.length;++n)t[n].transform();return this}},{key:"_setScenegraphNodeProps",value:function(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setPosition(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}]),e}(),ja=(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,t);var i=(n=Array.isArray(n)?{children:n}:n).children,r=void 0===i?[]:i;return r.every(function(e){return $(e instanceof Sa)}),(e=c(this,f(t).call(this,n))).children=r,e}d(t,Sa),Object(s.a)(t,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,r=t;i<r.length;i++){var a=r[i];Array.isArray(a)?this.add.apply(this,Object(_.a)(a)):this.children.push(a)}return this}},{key:"remove",value:function(e){var t=this.children,n=t.indexOf(e);return n>-1&&t.splice(n,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"delete",value:function(){this.children.forEach(function(e){return e.delete()}),this.removeAll(),p(f(t.prototype),"delete",this).call(this)}},{key:"traverse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.worldMatrix,r=void 0===i?new Ta:i,a=new Ta(r).multiplyRight(this.matrix),o=!0,s=!1,u=void 0;try{for(var l,c=this.children[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value;f instanceof t?f.traverse(e,{worldMatrix:a}):e(f,{worldMatrix:a})}}catch(e){s=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}}},{key:"traverseReverse",value:function(e,t){return N.warn("traverseReverse is not reverse")(),this.traverse(e,t)}}])}(),function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),(n=c(this,f(t).call(this,i))).onBeforeRender=null,n.AfterRender=null,e instanceof kr?(n.model=e,n._setModelNodeProps(i)):n.model=new kr(e,i),n.managedResources=i.managedResources||[],n}d(t,Sa),Object(s.a)(t,[{key:"setProps",value:function(e){return p(f(t.prototype),"setProps",this).call(this,e),this._setModelNodeProps(e),this}},{key:"delete",value:function(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(function(e){return e.delete()}),this.managedResources=[]}},{key:"draw",value:function(){var e;return(e=this.model).draw.apply(e,arguments)}},{key:"setUniforms",value:function(){var e;return(e=this.model).setUniforms.apply(e,arguments),this}},{key:"setAttributes",value:function(){var e;return(e=this.model).setAttributes.apply(e,arguments),this}},{key:"updateModuleSettings",value:function(){var e;return(e=this.model).updateModuleSettings.apply(e,arguments),this}},{key:"_setModelNodeProps",value:function(e){this.model.setProps(e)}}])}(),function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)(this,t),(e=c(this,f(t).call(this,n))).projectionMatrix=n.projectionMatrix,e}d(t,Sa)}(),{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null});function Ca(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Math.fround(e),r=e-i;return t[n]=i,t[n+1]=r,t}var Aa="uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",La="".concat(Aa,"\n").concat("const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"),Ma={ONE:1};var Fa={name:"fp64",vs:La,fs:null,fp64ify:Ca,fp64LowPart:function(e){return e-Math.fround(e)},fp64ifyMatrix4:function(e){for(var t=new Float32Array(32),n=0;n<4;++n)for(var i=0;i<4;++i){var r=4*n+i;Ca(e[4*i+n],t,2*r)}return t},getUniforms:function(){return Object.assign({},Ma)}},Ia=("".concat(Aa),{pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingThreshold:1,pickingActive:!1});var Ra={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n\n  if (selected) {\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia,t={};if(void 0!==e.pickingSelectedColor)if(null===e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{var n=[e.pickingSelectedColor[0],e.pickingSelectedColor[1],e.pickingSelectedColor[2]];t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}return void 0!==e.pickingHighlightColor&&(t.picking_uHighlightColor=e.pickingHighlightColor),void 0!==e.pickingThreshold&&(t.picking_uThreshold=e.pickingThreshold),void 0!==e.pickingActive&&(t.picking_uActive=e.pickingActive?1:0),t}},Na="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Da={name:"lights",vs:Na,fs:Na,getUniforms:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba;if("lightSources"in t){var n=t.lightSources||{},i=n.ambientLight,r=n.pointLights,a=n.directionalLights,o=i||r&&r.length>0||a&&a.length>0;return o?Object.assign({},function(e){var t=e.ambientLight,n=e.pointLights,i=void 0===n?[]:n,r=e.directionalLights,a=void 0===r?[]:r,o={};o["lighting_uAmbientLight.color"]=t?za(t):[0,0,0];return i.forEach(function(e,t){o["lighting_uPointLight[".concat(t,"].color")]=za(e),o["lighting_uPointLight[".concat(t,"].position")]=e.position,o["lighting_uPointLight[".concat(t,"].attenuation")]=e.attenuation}),o.lighting_uPointLightCount=i.length,a.forEach(function(e,t){o["lighting_uDirectionalLight[".concat(t,"].color")]=za(e),o["lighting_uDirectionalLight[".concat(t,"].direction")]=e.direction}),o.lighting_uDirectionalLightCount=a.length,o}({ambientLight:i,pointLights:r,directionalLights:a}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){var s={pointLights:[],directionalLights:[]},u=!0,l=!1,c=void 0;try{for(var f,h=(t.lights||[])[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;switch(d.type){case"ambient":s.ambientLight=d;break;case"directional":s.directionalLights.push(d);break;case"point":s.pointLights.push(d)}}}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}return e({lightSources:s})}return{}},defines:{MAX_LIGHTS:3}},Ba={};function za(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=void 0===t?[0,0,0]:t,i=e.intensity,r=void 0===i?1:i;return n.map(function(e){return e*r/255})}var Ua="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",Va={name:"gouraud-lighting",dependencies:[Da],vs:Ua,defines:{LIGHTING_VERTEX:1},getUniforms:Ha},Ga={name:"phong-lighting",dependencies:[Da],fs:Ua,defines:{LIGHTING_FRAGMENT:1},getUniforms:Ha},Wa={};function Ha(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wa;if(!("material"in e))return{};var t=e.material;return t?function(e){var t={};return t.lighting_uAmbient=e.ambient,t.lighting_uDiffuse=e.diffuse,t.lighting_uShininess=e.shininess,t.lighting_uSpecularColor=e.specularColor,t}(t):{lighting_uEnabled:!1}}function Xa(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}var qa=[],Ya=[];function Za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,i=qa,r={index:-1,data:e,target:[]};return e?"function"==typeof e[Symbol.iterator]?i=e:e.length>0&&(Ya.length=e.length,i=Ya):i=qa,(t>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(t,n),r.index=t-1),{iterable:i,objectInfo:r}}function Qa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.filter,i=void 0===n?function(){return!0}:n,r=t.map,a=void 0===r?function(e){return e}:r,o=t.result,s=void 0===o?[]:o;return Array.isArray(e)?function e(t,n,i,r){var a=-1;for(;++a<t.length;){var o=t[a];Array.isArray(o)?e(o,n,i,r):n(o)&&r.push(i(o))}return r}(e,i,a,s):i(e)?[a(e)]:[]}function Ka(e){for(var t=e.target,n=e.source,i=e.start,r=void 0===i?0:i,a=e.count,o=void 0===a?1:a,s=n.length,u=o*s,l=0,c=r;l<s;l++)t[c++]=n[l];for(;l<u;)l<u-l?(t.copyWithin(r+l,r,r+l),l*=2):(t.copyWithin(r+l,r,r+u-l),l=u);return t}var $a=[],Ja=[[0,1/0]];function eo(e,t){if(e===Ja)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;for(var n=[],i=e.length,r=0,a=0;a<i;a++){var o=e[a];o[1]<t[0]?(n.push(o),r=a+1):o[0]>t[1]?n.push(o):t=[Math.min(o[0],t[0]),Math.max(o[1],t[1])]}return n.splice(r,0,t),n}var to=new R({id:"deck"}).enable(),no=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e);var i=n.id,r=void 0===i?ee("attribute"):i,a=n.type,s=n.isIndexed,u=void 0!==s&&s;this.gl=t,this.id=r,this.isIndexed=u,this.target=u?34963:34962,this.type=a,u&&!a&&(this.type=t&&Pt(t,xt.ELEMENT_INDEX_UINT32)?5125:5123),this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(n),this._validateAttributeDefinition()}return Object(s.a)(e,[{key:"delete",value:function(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function(e){var t=e.value,n=e.buffer,i=e.constant,r=void 0===i?this.constant||!1:i;if(this.constant=r,n)this.externalBuffer=n,this.constant=!1,this.type=e.type||n.accessor.type,void 0!==n.accessor.divisor&&(this.divisor=n.accessor.divisor),void 0!==e.divisor&&(this.divisor=e.divisor);else if(t){this.externalBuffer=null;var a=this.size||e.size||0;if(r&&t.length!==a){this.value=new Float32Array(a);for(var o=this.offset/4,s=0;s<this.size;++s)this.value[s]=t[o+s]}else this.value=t;!r&&this.gl&&(this.buffer=this.buffer||this._createBuffer(e),this.buffer.setData({data:t}),this.type=this.buffer.accessor.type)}this._setAccessor(e)}},{key:"getBuffer",value:function(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function(){if(this.constant)return this.value;var e=this.externalBuffer||this.buffer;return e?[e,this]:null}},{key:"_createBuffer",value:function(e){var t=Object.assign({},e,{id:this.id,target:this.target,accessor:{type:this.type}});return Number.isFinite(t.divisor)&&(t.accessor.divisor=t.divisor),delete t.divisor,Number.isFinite(t.size)&&(t.accessor.size=t.size),delete t.size,new De(this.gl,t)}},{key:"_setAccessor",value:function(e){var t=e.size,n=void 0===t?this.size:t,i=e.offset,r=void 0===i?this.offset||0:i,a=e.stride,o=void 0===a?this.stride||0:a,s=e.normalized,u=void 0===s?this.normalized||!1:s,l=e.integer,c=void 0===l?this.integer||!1:l,f=e.divisor,h=void 0===f?this.divisor||0:f,d=e.instanced,p=e.isInstanced;this.size=n,this.offset=r,this.stride=o,this.normalized=u,this.integer=c,this.divisor=h,void 0!==p&&(N.deprecated("Attribute.isInstanced")(),this.divisor=p?1:0),void 0!==d&&(N.deprecated("Attribute.instanced")(),this.divisor=d?1:0)}},{key:"_validateAttributeDefinition",value:function(){}}]),e}(),io={isExternalBuffer:!1,needsUpdate:!0,needsRedraw:!1,updateRanges:Ja,allocedInstances:-1},ro=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,t),n=c(this,f(t).call(this,e,i));var r=i.transition,a=void 0!==r&&r,s=i.noAlloc,u=void 0!==s&&s,l=i.update,h=void 0===l?null:l,d=i.accessor,p=void 0===d?null:d,v=i.bufferLayout,g=void 0===v?null:v,m=i.defaultValue,y=void 0===m?[0,0,0,0]:m;if(y=Array.isArray(y)?y:[y],n.shaderAttributes={},n.hasShaderAttributes=!1,i.shaderAttributes){var b=i.shaderAttributes;for(var _ in b){var w=b[_];n.shaderAttributes[_]=new t(n.gl,Object.assign({},w,{id:_,constant:w.constant||!1,isIndexed:w.isIndexed||w.elements,size:(w.elements?1:w.size)||n.size,value:w.value||null,divisor:w.instanced||w.divisor||n.divisor,buffer:n.getBuffer(),noAlloc:!0})),n.hasShaderAttributes=!0}}return Object.assign(n.userData,io,i,{transition:a,noAlloc:u,update:h||p&&n._standardAccessor,accessor:p,defaultValue:y,bufferLayout:g}),Object.seal(n.userData),n._validateAttributeUpdaters(),n}return d(t,no),Object(s.a)(t,[{key:"needsUpdate",value:function(){return this.userData.needsUpdate}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearChangedFlags,n=void 0!==t&&t,i=this.userData.needsRedraw;return this.userData.needsRedraw=this.userData.needsRedraw&&!n,i}},{key:"getInstanceCount",value:function(){return null!==this.value?this.value.length/this.size:0}},{key:"getUpdateTriggers",value:function(){var e=this.userData.accessor;return[this.id].concat("function"!=typeof e&&e||[])}},{key:"getAccessor",value:function(){return this.userData.accessor}},{key:"getShaderAttributes",value:function(){var e={};return this.hasShaderAttributes?Object.assign(e,this.shaderAttributes):e[this.id]=this,e}},{key:"supportsTransition",value:function(){return this.userData.transition}},{key:"getTransitionSetting",value:function(e){var t=this.userData,n=t.transition,i=t.accessor;if(!n)return null;var r=Array.isArray(i)?e[i.find(function(t){return e[t]})]:e[i];return Number.isFinite(r)&&(r={duration:r}),r&&r.duration>0?Object.assign({},n,r):null}},{key:"setNeedsUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1?arguments[1]:void 0;if(this.userData.needsUpdate=this.userData.needsUpdate||e,t){var n=t.startRow,i=void 0===n?0:n,r=t.endRow,a=void 0===r?1/0:r;this.userData.updateRanges=eo(this.userData.updateRanges,[i,a])}else this.userData.updateRanges=Ja}},{key:"clearNeedsUpdate",value:function(){this.userData.needsUpdate=!1,this.userData.updateRanges=$a}},{key:"setNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsRedraw=this.userData.needsRedraw||e}},{key:"allocate",value:function(e){var t=this.userData;if(t.isExternalBuffer||t.noAlloc)return!1;var n=this.getInstanceCount();if((0===n||n<e)&&(t.update||t.accessor)){Xa(Number.isFinite(e));var i=Math.max(e,1),r=ao(this.type||5126),a=this.value;return this.constant=!1,this.value=new r(this.size*i),this.buffer&&this.buffer.byteLength<this.value.byteLength&&this.buffer.reallocate(this.value.byteLength),t.updateRanges!==Ja&&(this.value.set(a),this.buffer.subData(a)),this.setNeedsUpdate(!0,{startRow:n}),t.allocedInstances=i,!0}return!1}},{key:"updateBuffer",value:function(e){var t=e.numInstances,n=e.bufferLayout,i=e.data,r=e.props,a=e.context;if(!this.needsUpdate())return!1;var o=this.userData,s=o.update,u=o.updateRanges,l=o.noAlloc,c=!0;if(s){var f=!0,h=!1,d=void 0;try{for(var p,g=u[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var m=v(p.value,2),y=m[0],b=m[1];s.call(a,this,{data:i,startRow:y,endRow:b,props:r,numInstances:t,bufferLayout:n})}}catch(e){h=!0,d=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw d}}if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength)this.update({value:this.value,constant:this.constant});else{var _=!0,w=!1,x=void 0;try{for(var k,P=u[Symbol.iterator]();!(_=(k=P.next()).done);_=!0){var O=v(k.value,2),E=(y=O[0],b=O[1],Number.isFinite(y)?this._getVertexOffset(y,this.bufferLayout):0),T=Number.isFinite(b)?this._getVertexOffset(b,this.bufferLayout):l||!Number.isFinite(t)?this.value.length:t*this.size;this.buffer.subData({data:this.value.subarray(E,T),offset:E*this.value.BYTES_PER_ELEMENT})}}catch(e){w=!0,x=e}finally{try{_||null==P.return||P.return()}finally{if(w)throw x}}}this._checkAttributeArray()}else c=!1;return this._updateShaderAttributes(),this.clearNeedsUpdate(),o.needsRedraw=!0,c}},{key:"update",value:function(e){p(f(t.prototype),"update",this).call(this,e),this._updateShaderAttributes()}},{key:"setGenericValue",value:function(e){var t=this.userData;if(void 0===e||"function"==typeof e)return t.isExternalBuffer=!1,!1;e=this._normalizeValue(e);var n=!this.constant||!this._areValuesEqual(e,this.value);return n&&this.update({constant:!0,value:e}),t.needsRedraw=t.needsUpdate||n,this.clearNeedsUpdate(),t.isExternalBuffer=!0,this._updateShaderAttributes(),!0}},{key:"setExternalBuffer",value:function(e,t){var n=this.userData;if(e){if(n.isExternalBuffer=!0,this.clearNeedsUpdate(),e instanceof De)this.externalBuffer!==e&&(this.update({constant:!1,buffer:e}),n.needsRedraw=!0);else if(this.value!==e){if(!ArrayBuffer.isView(e))throw new Error("Attribute prop must be typed array");if(n.auto&&e.length<=t*this.size)throw new Error("Attribute prop array must match length and size");var i=ao(this.type||5126);e instanceof i?this.update({constant:!1,value:e}):(to.warn("Attribute prop ".concat(this.id," is casted to ").concat(i.name))(),this.update({constant:!1,value:new i(e)})),this.value=e,n.needsRedraw=!0}return this._updateShaderAttributes(),!0}return n.isExternalBuffer=!1,!1}},{key:"_getVertexOffset",value:function(e,t){if(t){var n=0,i=0,r=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;if(i>=e)break;n+=l*this.size,i++}}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}return e*this.size}},{key:"_normalizeValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.userData.defaultValue;if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return t[n]=Number.isFinite(e)?e:i[0],t;switch(this.size){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:i[0]}return t}},{key:"_areValuesEqual",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.size,i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}},{key:"_standardAccessor",value:function(e,t){var n=t.data,i=t.startRow,r=t.endRow,a=t.props,o=(t.numInstances,t.bufferLayout),s=e.userData.accessor,u=e.value,l=e.size,c="function"==typeof s?s:a[s];Xa("function"==typeof c,'accessor "'.concat(s,'" is not a function'));var f=e._getVertexOffset(i,o),h=Za(n,i,r),d=h.iterable,p=h.objectInfo,v=!0,g=!1,m=void 0;try{for(var y,b=d[Symbol.iterator]();!(v=(y=b.next()).done);v=!0){var _=y.value;p.index++;var w=c(_,p);if(o){e._normalizeValue(w,p.target);var x=o[p.index];Ka({target:e.value,source:p.target,start:f,count:x}),f+=x*l}else e._normalizeValue(w,u,f),f+=l}}catch(e){g=!0,m=e}finally{try{v||null==b.return||b.return()}finally{if(g)throw m}}e.constant=!1,e.bufferLayout=o}},{key:"_validateAttributeUpdaters",value:function(){var e=this.userData;if(!(e.noAlloc||"function"==typeof e.update||"string"==typeof e.accessor))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var e=this.value;if(e&&e.length>=4&&!(Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])))throw new Error("Illegal attribute generated for ".concat(this.id))}},{key:"_updateShaderAttributes",value:function(){var e=this.shaderAttributes;for(var t in e){e[t].update({buffer:this.getBuffer(),value:this.value,constant:this.constant})}}},{key:"bufferLayout",get:function(){return this.userData.bufferLayout},set:function(e){this.userData.bufferLayout=e}}]),t}();function ao(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,n=void 0===t||t;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce type from array")}}function oo(e){var t=e.source,n=e.target,i=e.start,r=void 0===i?0:i,a=e.end,o=e.getData;a=a||n.length;var s=t.length,u=a-r;if(s>u)n.set(t.subarray(0,u),r);else if(n.set(t,r),o)for(var l=s;l<u;)for(var c=o(l,t),f=0;f<c.length;f++)n[r+l]=c[f],l++}var so={1:"float",2:"vec2",3:"vec3",4:"vec4"};function uo(e){var t={},n={};for(var i in e){var r=e[i],a=r.fromState,o=r.toState,s=r.buffer;t["".concat(i,"From")]=a instanceof De?[a,{divisor:0}]:a,t["".concat(i,"To")]=o,n["".concat(i)]=s}return{sourceBuffers:t,feedbackBuffers:n}}function lo(e){var t=e.fromState,n=e.toState,i=e.fromLength,r=e.toLength,a=e.fromBufferLayout,o=e.toBufferLayout,s=e.getData,u=void 0===s?function(e){return e}:s;if((a&&o||!(i>=r))&&t instanceof De){var l=new Float32Array(r),c=t.getData({}),f=n.size,h=n.constant,d=h?n.getValue():n.getBuffer().getData({}),p=h?function(e,t){return u(d,t)}:function(e,t){return u(d.subarray(e,e+f),t)};!function(e){var t=e.source,n=e.target,i=e.size,r=e.getData,a=e.sourceLayout,o=e.targetLayout;if(!Array.isArray(o))return oo({source:t,target:n,getData:r}),n;for(var s=0,u=0,l=r&&function(e,t){return r(e+u,t)},c=Math.min(a.length,o.length),f=0;f<c;f++){var h=a[f]*i,d=o[f]*i;oo({source:t.subarray(s,s+h),target:n,start:u,end:u+d,getData:l}),s+=h,u+=d}u<n.length&&oo({source:[],target:n,start:u,getData:l})}({source:c,target:l,sourceLayout:a,targetLayout:o,size:n.size,getData:p}),t.setData({data:l})}}var co={NONE:"none",PENDING:"pending",IN_PROGRESS:"in_progress",ENDED:"ended"};function fo(){}var ho=function(){function e(t){Object(o.a)(this,e),this._startTime=null,this._state=co.NONE,this.duration=1,this.easing=function(e){return e},this.onStart=fo,this.onUpdate=fo,this.onInterrupt=fo,this.onEnd=fo,Object.assign(this,t)}return Object(s.a)(e,[{key:"start",value:function(e){this.inProgress&&this.onInterrupt(this),Object.assign(this,e),this._setState(co.PENDING)}},{key:"cancel",value:function(){this.inProgress&&(this.onInterrupt(this),this._setState(co.NONE))}},{key:"update",value:function(e){if(this.state===co.PENDING&&(this._startTime=e,this._setState(co.IN_PROGRESS)),this.state===co.IN_PROGRESS){var t=!1,n=(e-this._startTime)/this.duration;return n>=1&&(n=1,t=!0),this.time=this.easing(n),this.onUpdate(this),t&&this._setState(co.ENDED),!0}return!1}},{key:"_setState",value:function(e){if(this._state!==e)switch(this._state=e,e){case co.PENDING:this.onStart(this);break;case co.ENDED:this.onEnd(this)}}},{key:"state",get:function(){return this._state}},{key:"inProgress",get:function(){return this._state===co.PENDING||this._state===co.IN_PROGRESS}}]),e}(),po=function(){},vo={duration:0,easing:function(e){return e},onStart:po,onEnd:po,onInterrupt:po},go=function(){function e(t,n){var i=n.id;Object(o.a)(this,e),this.id=i,this.gl=t,this.attributeTransitions={},this.needsRedraw=!1,this.transform=null,this.numInstances=0,Rr.isSupported(t)?this.isSupported=!0:t&&to.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}return Object(s.a)(e,[{key:"finalize",value:function(){for(var e in this.transform&&this.transform.delete(),this.attributeTransitions)this._removeTransition(e)}},{key:"update",value:function(e){var t=e.attributes,n=e.transitions,i=void 0===n?{}:n,r=e.numInstances;if(this.opts=i,this.numInstances=r||1,this.isSupported){var a=this.attributeTransitions,o={};for(var s in t){this._updateAttribute(s,t[s])&&(o[s]=a[s])}for(var u in a){var l=t[u];l&&l.supportsTransition()||this._removeTransition(u)}if(this.transform){if(this.transform){var c=uo(o),f=c.sourceBuffers,h=c.feedbackBuffers;this.transform.update({elementCount:this.numInstances,sourceBuffers:f,feedbackBuffers:h})}}else this._createModel()}}},{key:"hasAttribute",value:function(e){return e in this.attributeTransitions}},{key:"getAttributes",value:function(){var e={};for(var t in this.attributeTransitions){var n=this.attributeTransitions[t];n.buffer&&(e[t]=n.attributeInTransition)}return e}},{key:"setCurrentTime",value:function(e){if(!this.transform||0===this.numInstances)return!1;var t={},n=this.needsRedraw;for(var i in this.needsRedraw=!1,this.attributeTransitions){var r=this.attributeTransitions[i];r.update(e)&&(t["".concat(i,"Time")]=r.time,n=!0)}return n&&this.transform.run({uniforms:t}),n}},{key:"_createTransition",value:function(e,t){var n=this.attributeTransitions[e];return n?null:(n=new ho({name:e,attribute:t,attributeInTransition:new ro(this.gl,t),bufferLayout:t.bufferLayout}),this.attributeTransitions[e]=n,this._invalidateModel(),n)}},{key:"_removeTransition",value:function(e){var t=this.attributeTransitions[e];t&&(t.buffer&&t.buffer.delete(),t._swapBuffer&&t._swapBuffer.delete(),delete this.attributeTransitions[e],this._invalidateModel())}},{key:"_updateAttribute",value:function(e,t){var n=t.getTransitionSetting(this.opts);if(n){var i,r=this.attributeTransitions[e];if(r?i=t.needsRedraw():(r=this._createTransition(e,t),i=!0),i)return this._triggerTransition(r,n),!0}return!1}},{key:"_invalidateModel",value:function(){this.transform&&(this.transform.delete(),this.transform=null)}},{key:"_createModel",value:function(){0!==Object.keys(this.attributeTransitions).length&&(this.transform=new Rr(this.gl,Object.assign({elementCount:this.numInstances},uo(this.attributeTransitions),function(e){var t=[],n=[],i=[],r=[],a=[];for(var o in e){var s=e[o],u=so[s.attribute.size];u&&(s.bufferIndex=t.length,t.push(o),n.push("attribute ".concat(u," ").concat(o,"From;")),n.push("attribute ".concat(u," ").concat(o,"To;")),i.push("uniform float ".concat(o,"Time;")),r.push("varying ".concat(u," ").concat(o,";")),a.push("".concat(o," = mix(").concat(o,"From, ").concat(o,"To,\n        ").concat(o,"Time);")))}return{vs:"\n#define SHADER_NAME feedback-vertex-shader\n".concat(n.join("\n"),"\n").concat(i.join("\n"),"\n").concat(r.join("\n"),"\n\nvoid main(void) {\n  ").concat(a.join("\n"),"\n  gl_Position = vec4(0.0);\n}\n"),fs:"#define SHADER_NAME feedback-fragment-shader\n\nprecision highp float;\n\n".concat(r.join("\n"),"\n\nvoid main(void) {\n  gl_FragColor = vec4(0.0);\n}\n"),varyings:t}}(this.attributeTransitions))))}},{key:"_getNextTransitionStates",value:function(e,t){var n,i=e.attribute,r=i.size;n=i.constant?new no(this.gl,{constant:!0,value:i.value,size:r}):new no(this.gl,{constant:!1,buffer:i.getBuffer(),divisor:0,size:r,value:i.externalBuffer?null:i.value});var a=e.buffer||n,o=this.numInstances*r,s=a instanceof De&&a.getElementCount()||o,u=e._swapBuffer;return e._swapBuffer=e.buffer,u?u.getElementCount()<o&&u.setData({data:new Float32Array(o)}):u=new De(this.gl,{data:new Float32Array(o),usage:35050}),e.attributeInTransition.update({buffer:u}),lo({fromState:a,toState:n,fromLength:s,toLength:o,fromBufferLayout:e.bufferLayout,toBufferLayout:i.bufferLayout,getData:t.enter}),e.bufferLayout=i.bufferLayout,{fromState:a,toState:n,buffer:u}}},{key:"_triggerTransition",value:function(e,t){Xa(t&&t.duration>0),this.needsRedraw=!0;var n=Object.assign({},vo,t);e.start(Object.assign({},this._getNextTransitionStates(e,t),n))}}]),e}();function mo(){}var yo={savedMessages:null,timeStart:null,onLog:function(e){var t=e.level,n=e.message;to.log(t,n)()},onUpdateStart:function(e){e.level,e.numInstances;yo.savedMessages=[],yo.timeStart=new Date},onUpdate:function(e){e.level;var t=e.message;yo.savedMessages&&yo.savedMessages.push(t)},onUpdateEnd:function(e){var t=e.level,n=e.id,i=e.numInstances,r=Math.round(new Date-yo.timeStart),a="".concat(r,"ms");to.group(t,"Updated attributes for ".concat(i," instances in ").concat(n," in ").concat(a),{collapsed:!0})();var o=!0,s=!1,u=void 0;try{for(var l,c=yo.savedMessages[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value;to.log(t,f)()}}catch(e){s=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}to.groupEnd(t,"Updated attributes for ".concat(i," instances in ").concat(n," in ").concat(a))(),yo.savedMessages=null}},bo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.id,r=void 0===i?"attribute-manager":i,a=n.stats;Object(o.a)(this,e),this.id=r,this.gl=t,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=a,this.attributeTransitionManager=new go(t,{id:"".concat(r,"-transitions")}),Object.seal(this)}return Object(s.a)(e,null,[{key:"setDefaultLogFunctions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onLog,n=e.onUpdateStart,i=e.onUpdate,r=e.onUpdateEnd;void 0!==t&&(yo.onLog=t||mo),void 0!==n&&(yo.onUpdateStart=n||mo),void 0!==i&&(yo.onUpdate=i||mo),void 0!==r&&(yo.onUpdateEnd=r||mo)}}]),Object(s.a)(e,[{key:"finalize",value:function(){for(var e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function(e,t){this._add(e,t)}},{key:"addInstanced",value:function(e,t){this._add(e,t,{instanced:1})}},{key:"remove",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:"invalidate",value:function(e,t){var n=this._invalidateTrigger(e,t);yo.onLog({level:3,message:"invalidated attributes ".concat(n," (").concat(e,") for ").concat(this.id)})}},{key:"invalidateAll",value:function(e){for(var t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);yo.onLog({level:3,message:"invalidated all attributes for ".concat(this.id)})}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.numInstances,i=e.bufferLayout,r=e.transitions,a=e.props,o=void 0===a?{}:a,s=e.buffers,u=void 0===s?{}:s,l=e.context,c=void 0===l?{}:l,f=!1;for(var h in yo.onUpdateStart({level:2,id:this.id,numInstances:n}),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var d=this.attributes[h];d.setExternalBuffer(u[h],this.numInstances)||d.setGenericValue(o[d.getAccessor()])||d.needsUpdate()&&(f=!0,this._updateAttribute({attribute:d,numInstances:n,bufferLayout:i,data:t,props:o,context:c})),this.needsRedraw|=d.needsRedraw()}f&&yo.onUpdateEnd({level:2,id:this.id,numInstances:n}),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}},{key:"updateTransition",value:function(e){var t=this.attributeTransitionManager.setCurrentTime(e);return this.needsRedraw=this.needsRedraw||t,t}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},t=this.attributes,n=this.attributeTransitionManager,i=Object.assign({},n.getAttributes());for(var r in t){var a=t[r];a.needsRedraw(e)&&!n.hasAttribute(r)&&(i[r]=a)}return i}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&to.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var i={};for(var r in e){var a=e[r],o=this._createAttribute(r,a,n);i[r]=o}Object.assign(this.attributes,i),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(e,t,n){var i={id:e,constant:t.constant||!1,isIndexed:t.isIndexed||t.elements,size:t.elements?1:t.size,value:t.value||null,divisor:t.instanced||n.instanced?1:t.divisor};return new ro(this.gl,Object.assign({},t,i))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var e=this,t={},n=function(n){e.attributes[n].getUpdateTriggers().forEach(function(e){t[e]||(t[e]=[]),t[e].push(n)})};for(var i in this.attributes)n(i);this.updateTriggers=t}},{key:"_invalidateTrigger",value:function(e,t){var n=this.attributes,i=this.updateTriggers[e];if(i)i.forEach(function(e){var i=n[e];i&&i.setNeedsUpdate(i.id,t)});else{var r="invalidating non-existent trigger ".concat(e," for ").concat(this.id,"\n");r+="Valid triggers: ".concat(Object.keys(n).join(", ")),to.warn(r,i)()}return i}},{key:"_updateAttribute",value:function(e){var t=e.attribute,n=e.numInstances;t.allocate(n)&&yo.onUpdate({level:3,message:"".concat(t.id," allocated ").concat(n),id:this.id});var i=Date.now();if(t.updateBuffer(e)){this.needsRedraw=!0;var r=Math.round(Date.now()-i);yo.onUpdate({level:3,message:"".concat(t.id," updated ").concat(n," in ").concat(r,"ms")})}}}]),e}(),_o=new Map,wo=function(e){if(vr.a.isReady()&&e.id){var t=_o.get(e.id);t&&t.forEach(function(t,n){!function e(t,n,i){t&&(n.length>1?e(t[n[0]],n.slice(1),i):t[n[0]]=i)}(e,n,t),"data"===n[0]&&(e.data=Object(_.a)(e.data))})}},xo=function(e){vr.a.isReady()&&vr.a.listenFor("deck.gl",e)},ko=function(e){vr.a.isReady()&&vr.a.listenFor("init",e)},Po=function(e){if(vr.a.isReady()&&e){var t=[e.constructor.layerName];vr.a.listItem("deck.gl",e.id,{badges:t,links:e.state&&e.state.model?["luma.gl:".concat(e.state.model.id)]:void 0,parent:e.parent?e.parent.id:void 0})}},Oo=function(e){if(vr.a.isReady()&&!vr.a.throttle("deck.gl:".concat(e.id),1e3)){var t=function(e){var t=[{path:"objects.props",data:e.props}],n=[e.constructor.layerName];if(e.state){if(e.getAttributeManager()){var i=e.getAttributeManager().getAttributes();t.push({path:"objects.attributes",data:i})}if(e.state.model){e.state.model.setProps({timerQueryEnabled:!0});var r=e.state.model.stats.lastFrameTime;r&&n.push("".concat((1e3*r).toFixed(0),"μs"))}}return t.push({path:"badges",data:n}),t}(e);vr.a.multiUpdate("deck.gl",e.id,t)}};function Eo(e,t){var n=To({newProps:e,oldProps:t,propTypes:jo(e),ignoreProps:{data:null,updateTriggers:null}}),i=function(e,t){if(null===t)return"oldProps is null, initial diff";var n=e.dataComparator;if(n){if(!n(e.data,t.data))return"Data comparator detected a change"}else if(e.data!==t.data)return"A new data container was supplied";return null}(e,t),r=!1;return i||(r=function(e,t){if(null===t)return"oldProps is null, initial diff";if("all"in e.updateTriggers){var n=So(e,t,"all");if(n)return{all:!0}}var i={},r=!1;for(var a in e.updateTriggers)if("all"!==a){var o=So(e,t,a);o&&(i[a]=!0,r=i)}return r}(e,t)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r}}function To(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProps,n=e.oldProps,i=e.ignoreProps,r=void 0===i?{}:i,a=e.propTypes,o=void 0===a?{}:a,s=e.triggerName,l=void 0===s?"props":s;if(Xa(void 0!==n&&void 0!==t,"compareProps args"),n===t)return null;if("object"!==Object(u.a)(t)||null===t)return"".concat(l," changed shallowly");if("object"!==Object(u.a)(n)||null===n)return"".concat(l," changed shallowly");for(var c in n)if(!(c in r)){if(!(c in t))return"".concat(l,".").concat(c," dropped");var f=t[c],h=n[c],d=o[c],p=d&&d.equal;if(p&&!p(f,h,d))return"".concat(l,".").concat(c," changed deeply");if(!p&&(p=f&&h&&f.equals)&&!p.call(f,h))return"".concat(l,".").concat(c," changed deeply");if(!p&&h!==f)return"".concat(l,".").concat(c," changed shallowly")}for(var v in t)if(!(v in r||v in n))return"".concat(l,".").concat(v," added: undefined -> ").concat(t[v]);return null}function So(e,t,n){var i=e.updateTriggers[n];i=null==i?{}:i;var r=t.updateTriggers[n];return To({oldProps:r=null==r?{}:r,newProps:i,triggerName:n})}function jo(e){var t=e._component,n=t&&t.constructor;return n?n._propTypes:{}}var Co="count(): argument not an object",Ao="count(): argument not a container";function Lo(e){if(null===(t=e)||"object"!==Object(u.a)(t))throw new Error(Co);var t;if("function"==typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"===Object(u.a)(e)&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error(Ao)}function Mo(e,t){if(e===t)return!0;if(Array.isArray(e)){var n=e.length;if(!t||t.length!==n)return!1;for(var i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}return!1}function Fo(e){var t,n={};return function(i){for(var r in i)if(!Mo(i[r],n[r])){t=e(i),n=i;break}return t}}var Io={LNG_LAT:1,LNGLAT_AUTO_OFFSET:4,METER_OFFSETS:2,LNGLAT_OFFSETS:3,IDENTITY:0},Ro=[0,0,0,0],No=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Do=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Bo=[0,0,0],zo=[0,0,0],Uo=12,Vo=Fo(function(e){var t=e.viewport,n=e.devicePixelRatio,i=e.coordinateSystem,r=e.coordinateOrigin,a=e.wrapLongitude,o=t.zoom,s=function(e){var t,n=e.viewport,i=e.coordinateSystem,r=e.coordinateOrigin,a=e.coordinateZoom,o=n.viewMatrixUncentered,s=n.viewMatrix,u=n.projectionMatrix,l=n.viewProjectionMatrix,c=n.cameraPosition,f=function(e){switch(e){case g.LNGLAT:case g.LNGLAT_EXPERIMENTAL:default:return Io.LNGLAT_AUTO_OFFSET;case g.LNGLAT_DEPRECATED:return Io.LNG_LAT;case g.METER_OFFSETS:case g.METERS:return Io.METER_OFFSETS;case g.LNGLAT_OFFSETS:return Io.LNGLAT_OFFSETS;case g.IDENTITY:return Io.IDENTITY}}(i),h=r;if(f===Io.LNGLAT_AUTO_OFFSET)if(a<Uo)f=Io.LNG_LAT;else{var d=Math.fround(n.longitude),p=Math.fround(n.latitude);h=[d,p]}f===Io.IDENTITY&&(h=[Math.fround(n.position[0]),Math.fround(n.position[1])]);switch(h[2]=h[2]||0,f){case Io.LNG_LAT:t=Ro;break;case Io.LNGLAT_OFFSETS:case Io.METER_OFFSETS:case Io.LNGLAT_AUTO_OFFSET:case Io.IDENTITY:var v=n.projectPosition(h,Math.pow(2,a));c=[c[0]-v[0],c[1]-v[1],c[2]-v[2]],v[3]=1,t=Oa([],v,l),l=ya([],u,s=o||s),l=ya([],l,No);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:s,viewProjectionMatrix:l,projectionCenter:t,cameraPosCommon:c,shaderCoordinateSystem:f,shaderCoordinateOrigin:h}}({coordinateSystem:i,coordinateOrigin:r,coordinateZoom:o,viewport:t}),u=s.projectionCenter,l=s.viewProjectionMatrix,c=s.cameraPosCommon,f=s.shaderCoordinateSystem,h=s.shaderCoordinateOrigin;Xa(l,"Viewport missing modelViewProjectionMatrix");var d=t.getDistanceScales(),p=[t.width*n,t.height*n],v={project_uCoordinateSystem:f,project_uCenter:u,project_uWrapLongitude:a,project_uAntimeridian:(t.longitude||0)-180,project_uViewportSize:p,project_uDevicePixelRatio:n,project_uFocalDistance:t.focalDistance||1,project_uCommonUnitsPerMeter:d.pixelsPerMeter,project_uCommonUnitsPerWorldUnit:d.pixelsPerMeter,project_uCommonUnitsPerWorldUnit2:Bo,project_uScale:t.scale,project_uViewProjectionMatrix:l,project_uCameraPosition:c},m=t.getDistanceScales(h);switch(f){case Io.METER_OFFSETS:v.project_uCommonUnitsPerWorldUnit=m.pixelsPerMeter,v.project_uCommonUnitsPerWorldUnit2=m.pixelsPerMeter2;break;case Io.LNGLAT_AUTO_OFFSET:v.project_uCoordinateOrigin=h;case Io.LNG_LAT:case Io.LNGLAT_OFFSETS:v.project_uCommonUnitsPerWorldUnit=m.pixelsPerDegree,v.project_uCommonUnitsPerWorldUnit2=m.pixelsPerDegree2;break;case Io.IDENTITY:v.project_uCoordinateOrigin=h}return v});function Go(e,t){var n=Oa([],t,e);return function(e,t,n){e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n}(n,n,1/n[3]),n}function Wo(e,t){var n=e%t;return n<0?t+n:n}function Ho(e,t){if(!e)throw new Error(t||"viewport-mercator-project: assertion failed.")}var Xo=Math.PI,qo=Xo/4,Yo=Xo/180,Zo=180/Xo,Qo=512,Ko=4003e4,$o=1.5;function Jo(e){return Math.pow(2,e)}function es(e,t){var n=v(e,2),i=n[0],r=n[1];Ho(Number.isFinite(i)&&Number.isFinite(t)),Ho(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");var a=r*Yo;return[(t*=Qo)*(i*Yo+Xo)/(2*Xo),t*(Xo-Math.log(Math.tan(qo+.5*a)))/(2*Xo)]}function ts(e,t){var n=v(e,2),i=n[0],r=n[1],a=i/(t*=Qo)*(2*Xo)-Xo,o=2*(Math.atan(Math.exp(Xo-r/t*(2*Xo)))-qo);return[a*Zo,o*Zo]}function ns(e){var t=e.latitude;Ho(Number.isFinite(t));var n,i=Math.cos(t*Yo);return n=Ko*i,Math.log2(n)-9}function is(e){var t=e.latitude,n=e.longitude,i=e.zoom,r=e.scale,a=e.highPrecision,o=void 0!==a&&a;r=void 0!==r?r:Jo(i),Ho(Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(r));var s={},u=Qo*r,l=Math.cos(t*Yo),c=u/360,f=c/l,h=u/Ko/l;if(s.pixelsPerMeter=[h,-h,h],s.metersPerPixel=[1/h,-1/h,1/h],s.pixelsPerDegree=[c,-f,h],s.degreesPerPixel=[1/c,-1/f,1/h],o){var d=Yo*Math.tan(t*Yo)/l,p=c*d/2,v=u/Ko*d,g=v/f*h;s.pixelsPerDegree2=[0,-p,v],s.pixelsPerMeter2=[g,0,g]}return s}function rs(e,t){var n=v(e,3),i=n[0],r=n[1],a=n[2],o=v(t,3),s=o[0],u=o[1],l=o[2],c=is({longitude:i,latitude:r,scale:1,highPrecision:!0}),f=c.pixelsPerMeter,h=c.pixelsPerMeter2,d=es(e,1);d[0]+=s*(f[0]+h[0]*u),d[1]+=u*(f[1]+h[1]*u);var p=ts(d,1),g=(a||0)+(l||0);return Number.isFinite(a)||Number.isFinite(l)?[p[0],p[1],g]:p}function as(e){var t=e.height,n=e.pitch,i=e.bearing,r=e.altitude,a=e.center,o=void 0===a?null:a,s=e.flipY,u=void 0!==s&&s,l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return ba(l,l,[0,0,-r]),_a(l,l,[1,1,1/t]),wa(l,l,-n*Yo),xa(l,l,i*Yo),u&&_a(l,l,[1,-1,1]),o&&ba(l,l,function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}([],o)),l}function os(e){var t=e.width,n=e.height,i=e.altitude,r=void 0===i?$o:i,a=e.pitch,o=void 0===a?0:a,s=e.nearZMultiplier,u=void 0===s?1:s,l=e.farZMultiplier,c=void 0===l?1:l,f=o*Yo,h=Math.atan(.5/r),d=Math.sin(h)*r/Math.sin(Math.PI/2-f-h),p=Math.cos(Math.PI/2-f)*d+r;return{fov:2*Math.atan(n/2/r),aspect:t/n,focalDistance:r,near:u,far:p*c}}function ss(e,t){var n=v(e,3),i=n[0],r=n[1],a=n[2],o=void 0===a?0:a;return Ho(Number.isFinite(i)&&Number.isFinite(r)&&Number.isFinite(o)),Go(t,[i,r,o,1])}function us(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=v(e,3),r=i[0],a=i[1],o=i[2];if(Ho(Number.isFinite(r)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(o))return Go(t,[r,a,o,1]);var s=Go(t,[r,a,0,1]),u=Go(t,[r,a,1,1]),l=s[2],c=u[2];return function(e,t,n,i){var r=t[0],a=t[1];return e[0]=r+i*(n[0]-r),e[1]=a+i*(n[1]-a),e}([],s,u,l===c?0:((n||0)-l)/(c-l))}function ls(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=v(e,3),r=i[0],a=i[1],o=i[2],s=void 0===o?0:o,u=v(t.projectFlat(e),2);return[u[0],u[1],s*(n?is({longitude:r,latitude:a,scale:t.scale}):t.getDistanceScales()).pixelsPerMeter[2]]}function cs(e,t){var n=t.viewport,i=t.modelMatrix,r=t.coordinateSystem,a=t.coordinateOrigin,o=t.offsetMode,s=v(e,3),u=s[0],l=s[1],c=s[2];if(i){var f=v(Oa([],[u,l,c,1],i),3);u=f[0],l=f[1],c=f[2]}switch(r){case g.LNGLAT:case g.LNGLAT_DEPRECATED:return ls([u,l,c],n,o);case g.LNGLAT_OFFSETS:return ls([u+a[0],l+a[1],c+(a[2]||0)],n,o);case g.METER_OFFSETS:return ls(rs(a,[u,l,c]),n,o);case g.IDENTITY:default:return n.projectPosition([u,l,c])}}function fs(e,t){var n=function(e){var t=Object.assign({},e),n=e.viewport,i=e.coordinateSystem,r=e.coordinateOrigin,a=e.fromCoordinateSystem,o=e.fromCoordinateOrigin;return void 0===a&&(t.fromCoordinateSystem=i),void 0===o&&(t.fromCoordinateOrigin=r),i===g.LNGLAT&&n.zoom>=Uo&&(t.coordinateSystem=g.LNGLAT_OFFSETS,t.coordinateOrigin=[Math.fround(n.longitude),Math.fround(n.latitude)]),t}(t),i=n.viewport,r=n.coordinateSystem,a=n.coordinateOrigin,o=n.modelMatrix,s=n.fromCoordinateSystem,u=n.fromCoordinateOrigin;switch(r){case g.LNGLAT_OFFSETS:case g.METER_OFFSETS:var l=cs(e,{viewport:i,modelMatrix:o,coordinateSystem:s,coordinateOrigin:u,offsetMode:!0}),c=ls(a,i,!0);return gi(l,l,c),l;case g.LNGLAT:case g.LNGLAT_DEPRECATED:case g.IDENTITY:default:return cs(e,{viewport:i,modelMatrix:o,coordinateSystem:s,coordinateOrigin:u,offsetMode:!1})}}var hs={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},ds={boolean:{validate:function(e,t){return!0},equal:function(e,t,n){return Boolean(e)===Boolean(t)}},number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate:function(e,t){return ms(e)&&(3===e.length||4===e.length)},equal:function(e,t,n){return ps(e,t)}},accessor:{validate:function(e,t){var n=ys(e);return"function"===n||n===ys(t.value)},equal:function(e,t,n){return"function"==typeof t||ps(e,t)}},array:{validate:function(e,t){return t.optional&&!e||ms(e)},equal:function(e,t,n){return n.compare?ps(e,t):e===t}},function:{validate:function(e,t){return t.optional&&!e||"function"==typeof e},equal:function(e,t,n){return!n.compare||e===t}}};function ps(e,t){if(e===t)return!0;if(!ms(e)||!ms(t))return!1;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function vs(e,t){switch(ys(t)){case"object":return gs(e,t);case"array":return gs(e,{type:"array",value:t,compare:!1});case"boolean":return gs(e,{type:"boolean",value:t});case"number":return gs(e,{type:"number",value:t});case"function":return gs(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function gs(e,t){return"type"in t?Object.assign({name:e},ds[t.type],t):"value"in t?Object.assign({name:e,type:ys(t.value)},t):{name:e,type:"object",value:t}}function ms(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function ys(e){return ms(e)?"array":null===e?"null":Object(u.a)(e)}function bs(e,t,n){if(t)for(var i in n)if(xs(t,i)){var r="".concat(e||"Layer",": ").concat(i),a=!0,o=!1,s=void 0;try{for(var u,l=n[i][Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;xs(t,c)||(t[c]=t[i])}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}to.deprecated(r,n[i].join("/"))()}}function _s(e){var t=ks(e,"_mergedDefaultProps");return t?{defaultProps:t,propTypes:ks(e,"_propTypes"),deprecatedProps:ks(e,"_deprecatedProps")}:function(e){var t=e.prototype;if(!t)return{defaultProps:{}};var n=Object.getPrototypeOf(e),i=t&&_s(n)||null,r=function(e){for(var t={},n={},i={},r=Object.entries(e),a=0;a<r.length;a++){var o=v(r[a],2),s=o[0],u=o[1];if(u&&u.deprecatedFor)i[s]=Array.isArray(u.deprecatedFor)?u.deprecatedFor:[u.deprecatedFor];else{var l=vs(s,u);t[s]=l,n[s]=l.value}}return{propTypes:t,defaultProps:n,deprecatedProps:i}}(ks(e,"defaultProps")||{}),a=Object.assign({},i&&i.propTypes,r.propTypes),o=function(e,t,n,i){var r=Object.create(null);Object.assign(r,t,e);var a=function(e){var t=ks(e,"layerName")||ks(e,"componentName");t||to.once(0,"".concat(e.name,".componentName not specified"))();return t||e.name}(i);return delete e.id,Object.defineProperties(r,{id:{configurable:!1,writable:!0,value:a}}),function(e,t){var n={},i={_asyncPropDefaultValues:{enumerable:!1,value:n},_asyncPropOriginalValues:{enumerable:!1,value:{}}};for(var r in t){var a=t[r],o=a.name,s=a.value;a.async&&(n[o]=s,i[o]=ws(o))}Object.defineProperties(e,i)}(r,n),r}(r.defaultProps,i&&i.defaultProps,a,e),s=Object.assign({},i&&i.deprecatedProps,r.deprecatedProps);return e._mergedDefaultProps=o,e._propTypes=a,e._deprecatedProps=s,{propTypes:a,defaultProps:o,deprecatedProps:s}}(e)}function ws(e){return{configurable:!1,enumerable:!0,set:function(t){"string"==typeof t||t instanceof Promise?this._asyncPropOriginalValues[e]=t:this._asyncPropResolvedValues[e]=t},get:function(){if(this._asyncPropResolvedValues){if(e in this._asyncPropResolvedValues){var t=this._asyncPropResolvedValues[e];return"data"===e?t||this._asyncPropDefaultValues[e]:t}if(e in this._asyncPropOriginalValues){var n=this._component&&this._component.internalState;if(n&&n.hasAsyncProp(e))return n.getAsyncProp(e)}}return this._asyncPropDefaultValues[e]}}}function xs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ks(e,t){return xs(e,t)&&e[t]}var Ps=Object.freeze({}),Os=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(o.a)(this,e),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=Ps,this.oldAsyncProps=null}return Object(s.a)(e,[{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var e in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps={},this.oldProps)this.oldAsyncProps[e]=this.oldProps[e]}},{key:"hasAsyncProp",value:function(e){return e in this.asyncProps}},{key:"getAsyncProp",value:function(e){var t=this.asyncProps[e];return t&&t.resolvedValue}},{key:"isAsyncPropLoading",value:function(e){var t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}},{key:"setAsyncProps",value:function(e){var t=e._asyncPropResolvedValues||{},n=e._asyncPropOriginalValues||e,i=e._asyncPropDefaultValues||{};for(var r in t){var a=t[r];this._createAsyncPropData(r,a,i[r]),this._updateAsyncProp(r,a)}for(var o in n){var s=n[o];this._createAsyncPropData(o,s,i[o]),this._updateAsyncProp(o,s)}}},{key:"_updateAsyncProp",value:function(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t)t=(0,this.layer.props.fetch)(t,{propName:e,layer:this.layer});t instanceof Promise?this._watchPromise(e,t):this._setPropValue(e,t)}}},{key:"_didAsyncInputValueChange",value:function(e,t){var n=this.asyncProps[e];return t!==n.lastValue&&(n.lastValue=t,!0)}},{key:"_setPropValue",value:function(e,t){var n=this.asyncProps[e];n.value=t,n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(e,t,n){var i=this.asyncProps[e];i&&n>=i.resolvedLoadCount&&(Xa(void 0!==t),this.freezeAsyncOldProps(),t=this._postProcessValue(e,t),i.resolvedValue=t,i.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}},{key:"_watchPromise",value:function(e,t){var n=this,i=this.asyncProps[e];i.pendingLoadCount++;var r=i.pendingLoadCount;t.then(function(t){return n._setAsyncPropValue(e,t,r)}).catch(function(e){return to.error(e)()})}},{key:"_postProcessValue",value:function(e,t){var n=(this.component?this.component.props:{}).dataTransform;return"data"===e&&n&&(t=n(t)),t}},{key:"_createAsyncPropData",value:function(e,t,n){this.asyncProps[e]||(this.asyncProps[e]={lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0})}}]),e}(),Es=0,Ts=function(){function e(){Object(o.a)(this,e),this.props=function(){for(var e=_s(this.constructor),t=e.defaultProps,n=Object.create(t,{_component:{enumerable:!1,value:this},_asyncPropOriginalValues:{enumerable:!1,value:{}},_asyncPropResolvedValues:{enumerable:!1,value:{}}}),i=0;i<arguments.length;++i)Object.assign(n,arguments[i]);var r=this.constructor.layerName,a=e.deprecatedProps;return bs(r,n,a),bs(r,n.updateTriggers,a),bs(r,n.transitions,a),wo(n),Object.freeze(n),n}.apply(this,arguments),this.id=this.props.id,this.count=Es++,this.lifecycle=hs.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Object(s.a)(e,[{key:"clone",value:function(e){var t=this.props,n={};for(var i in t._asyncPropDefaultValues)i in t._asyncPropResolvedValues?n[i]=t._asyncPropResolvedValues[i]:i in t._asyncPropOriginalValues&&(n[i]=t._asyncPropOriginalValues[i]);return new this.constructor(Object.assign({},t,n,e))}},{key:"_initState",value:function(){this.internalState=new Os({})}},{key:"stats",get:function(){return this.internalState.stats}}]),e}();Ts.componentName="Component",Ts.defaultProps={};var Ss=function(e){function t(e){var n,i=e.attributeManager,r=e.layer;return Object(o.a)(this,t),(n=c(this,f(t).call(this,r))).attributeManager=i,n.model=null,n.needsRedraw=!0,n.subLayers=null,n}return d(t,Os),Object(s.a)(t,[{key:"layer",get:function(){return this.component},set:function(e){this.component=e}}]),t}(),js=Object.freeze([]),Cs=new Uint8ClampedArray(0),As={data:{type:"data",value:js,async:!0},dataComparator:null,dataTransform:{type:"function",value:function(e){return e},compare:!1},fetch:{type:"function",value:function(e){return fetch(e).then(function(e){return e.json()})},compare:!1},updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:.8},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:g.LNGLAT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,parameters:{},uniforms:{},framebuffer:null,animation:null,getPolygonOffset:{type:"function",value:function(e){return[0,100*-e.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"color",value:[0,0,128,128]}},Ls=function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}return d(t,Ts),Object(s.a)(t,[{key:"toString",value:function(){var e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=e)}},{key:"setLayerNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this))}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this.shouldUpdateState(this._getUpdateParams())}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getSingleModel",value:function(){return this.state&&this.state.model}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getFirstObject",value:function(){var e=this.props.data,t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){return r.value}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"project",value:function(e){var t=this.context.viewport,n=v(ss(cs(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),t.pixelProjectionMatrix),3),i=n[0],r=n[1],a=n[2];return 2===e.length?[i,r]:[i,r,a]}},{key:"unproject",value:function(e){var t=this.context.viewport;return Xa(Array.isArray(e)),t.unproject(e)}},{key:"projectPosition",value:function(e){return Xa(Array.isArray(e)),fs(e,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"projectFlat",value:function(e){to.deprecated("layer.projectFlat","layer.projectPosition")();var t=this.context.viewport;return Xa(Array.isArray(e)),t.projectFlat(e)}},{key:"unprojectFlat",value:function(e){to.deprecated("layer.unprojectFlat")();var t=this.context.viewport;return Xa(Array.isArray(e)),t.unprojectFlat(e)}},{key:"use64bitProjection",value:function(){if(this.props.fp64){if(this.props.coordinateSystem===g.LNGLAT_DEPRECATED)return!0;to.once(0,"Legacy 64-bit mode only works with coordinateSystem set to\n        COORDINATE_SYSTEM.LNGLAT_DEPRECATED. Rendering in 32-bit mode instead")()}return!1}},{key:"use64bitPositions",value:function(){return this.props.fp64||this.props.coordinateSystem===g.LNGLAT||this.props.coordinateSystem===g.IDENTITY}},{key:"screenToDevicePixels",value:function(e){return to.deprecated("screenToDevicePixels","DeckGL prop useDevicePixels for conversion")(),e*("undefined"!=typeof window?window.devicePixelRatio:1)}},{key:"onHover",value:function(e,t){return!!this.props.onHover&&this.props.onHover(e,t)}},{key:"onClick",value:function(e,t){return!!this.props.onClick&&this.props.onClick(e,t)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Xa(e<16777215,"index out of picking color range"),t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}},{key:"decodePickingColor",value:function(e){Xa(e instanceof Uint8Array);var t=v(e,3);return t[0]+256*t[1]+65536*t[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"shouldUpdateState",value:function(e){e.oldProps,e.props,e.context;return e.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(e){e.oldProps,e.props,e.context;var t=e.changeFlags,n=this.getAttributeManager();t.dataChanged&&n&&n.invalidateAll()}},{key:"finalizeState",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.getModels()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.delete()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}var a=this.getAttributeManager();a&&a.finalize()}},{key:"draw",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.getModels()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.draw(e)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"getPickingInfo",value:function(e){var t=e.info,n=(e.mode,t.index);return n>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[n]),t}},{key:"invalidateAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.getAttributeManager();n&&("all"===e?(to.log(1,"updateTriggers invalidating all attributes: ".concat(t))(),n.invalidateAll()):(to.log(1,"updateTriggers invalidating attribute ".concat(e,": ").concat(t))(),n.invalidate(e)))}},{key:"updateAttributes",value:function(e){var t=this.getAttributeManager();if(t){var n=this.getNumInstances(e),i=this.getBufferLayout(e);t.update({data:e.data,numInstances:n,bufferLayout:i,props:e,transitions:e.transitions,buffers:e,context:this,ignoreUnknownAttributes:!0});var r=this.getModels();if(r.length>0)for(var a=t.getChangedAttributes({clearChangedFlags:!0}),o=0,s=r.length;o<s;++o)this._setModelAttributes(r[o],a)}}},{key:"updateTransition",value:function(){var e=this.getAttributeManager();e&&e.updateTransition(this.context.time)}},{key:"calculateInstancePickingColors",value:function(e,t){var n=t.numInstances,i=e.value,r=e.size;if(1!==i[0]){var a=Cs.length/r;if(a<n){var o=new Uint8ClampedArray(n*r);o.set(Cs);for(var s=[],u=a;u<n;u++)this.encodePickingColor(u,s),o[u*r+0]=s[0],o[u*r+1]=s[1],o[u*r+2]=s[2];Cs=o}i.set(n<a?Cs.subarray(0,n*r):Cs)}}},{key:"_setModelAttributes",value:function(e,t){var n={},i=e.userData.excludeAttributes||{};for(var r in t)i[r]||Object.assign(n,t[r].getShaderAttributes());e.setAttributes(n)}},{key:"_clearInstancePickingColor",value:function(e){var t=this.getAttributeManager().attributes.instancePickingColors,n=t.value,i=t.size,r=this.decodePickingColor(e);n[r*i+0]=0,n[r*i+1]=0,n[r*i+2]=0,t.update({value:n})}},{key:"_clearPickingColor",value:function(e){for(var t=this.getAttributeManager().attributes.pickingColors,n=t.value,i=0;i<n.length;i+=3)n[i+0]===e[0]&&n[i+1]===e[1]&&n[i+2]===e[2]&&(n[i+0]=0,n[i+1]=0,n[i+2]=0);t.update({value:n})}},{key:"clearPickingColor",value:function(e){this.getAttributeManager().attributes.pickingColors?this._clearPickingColor(e):this._clearInstancePickingColor(e)}},{key:"copyPickingColors",value:function(){var e=this.getAttributeManager().attributes,t=e.pickingColors,n=e.instancePickingColors;return new Uint8ClampedArray((t||n).value)}},{key:"restorePickingColors",value:function(e){var t=this.getAttributeManager().attributes,n=t.pickingColors,i=t.instancePickingColors;(n||i).update({value:e})}},{key:"getNumInstances",value:function(e){return void 0!==(e=e||this.props).numInstances?e.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Lo(this.props.data)}},{key:"getBufferLayout",value:function(e){return void 0!==(e=e||this.props).bufferLayout?e.bufferLayout:this.state&&void 0!==this.state.bufferLayout?this.state.bufferLayout:null}},{key:"_initialize",value:function(){this._initState(),this.initializeState(this.context),this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0}),this._updateState();var e=this.getSingleModel();e&&(e.id=this.props.id,e.program.id="".concat(this.props.id,"-program"))}},{key:"_update",value:function(){this.needsUpdate()&&this._updateState()}},{key:"_updateState",value:function(){var e=this._getUpdateParams();if(this.context.gl)this.updateState(e);else try{this.updateState(e)}catch(e){}this.isComposite?this._renderLayers(e):(this.setNeedsRedraw(),this.updateAttributes(this.props),this._updateBaseUniforms(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.clearChangeFlags(),this.internalState.resetOldProps()}},{key:"_finalize",value:function(){var e;Xa(this.internalState&&this.state),this.finalizeState(this.context),e=this.id,vr.a.isReady()&&e&&vr.a.deleteItem("deck.gl",e)}},{key:"drawLayer",value:function(e){var t=this,n=e.moduleParameters,i=void 0===n?null:n,r=e.uniforms,a=void 0===r?{}:r,o=e.parameters,s=void 0===o?{}:o;a.picking_uActive||this.updateTransition(),i&&this.setModuleParameters(i);var u=this.context.animationProps;if(u){var l=!0,c=!1,f=void 0;try{for(var h,d=this.getModels()[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){h.value._setAnimationProps(u)}}catch(e){c=!0,f=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw f}}}var p=this.props.getPolygonOffset,v=p&&p(a)||[0,0];s.polygonOffset=v,q(this.context.gl,s,function(){t.draw({moduleParameters:i,uniforms:a,parameters:s,context:t.context})})}},{key:"pickLayer",value:function(e){return this.getPickingInfo(e)}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(e){var t=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var n=this.internalState.changeFlags;e.dataChanged&&!n.dataChanged&&(n.dataChanged=e.dataChanged,to.log(2,function(){return"dataChanged: ".concat(e.dataChanged," in ").concat(t.id)})()),e.updateTriggersChanged&&!n.updateTriggersChanged&&(n.updateTriggersChanged=n.updateTriggersChanged&&e.updateTriggersChanged?Object.assign({},e.updateTriggersChanged,n.updateTriggersChanged):e.updateTriggersChanged||n.updateTriggersChanged,to.log(2,function(){return"updateTriggersChanged: "+"".concat(Object.keys(e.updateTriggersChanged).join(", ")," in ").concat(t.id)})()),e.propsChanged&&!n.propsChanged&&(n.propsChanged=e.propsChanged,to.log(2,function(){return"propsChanged: ".concat(e.propsChanged," in ").concat(t.id)})()),e.viewportChanged&&!n.viewportChanged&&(n.viewportChanged=e.viewportChanged,to.log(3,function(){return"viewportChanged: ".concat(e.viewportChanged," in ").concat(t.id)})()),e.stateChanged&&!n.stateChanged&&(n.stateChanged=e.stateChanged,to.log(2,function(){return"stateChanged: ".concat(e.stateChanged," in ").concat(t.id)})());var i=e.dataChanged||e.updateTriggersChanged||e.propsChanged;n.propsOrDataChanged=n.propsOrDataChanged||i,n.somethingChanged=n.somethingChanged||i||e.viewportChanged||e.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function(){var e=this.internalState.changeFlags;return"".concat(e.dataChanged?"data ":"").concat(e.propsChanged?"props ":"").concat(e.updateTriggersChanged?"triggers ":"").concat(e.viewportChanged?"viewport":"")}},{key:"diffProps",value:function(e,t){var n=Eo(e,t);if(n.updateTriggersChanged)for(var i in n.updateTriggersChanged)n.updateTriggersChanged[i]&&this._activeUpdateTrigger(i);return this.setChangeFlags(n)}},{key:"validateProps",value:function(){!function(e){var t=jo(e);for(var n in t){var i=t[n],r=i.validate;if(r&&!r(e[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(e[n]))}}(this.props)}},{key:"setModuleParameters",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.getModels()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.updateModuleSettings(e)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(e){if(!this.internalState)return!1;var t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;var n=this.getAttributeManager(),i=n&&n.getNeedsRedraw(e);return t=t||i}},{key:"_getAttributeManager",value:function(){return new bo(this.context.gl,{id:this.props.id,stats:this.context.stats})}},{key:"_initState",value:function(){Xa(!this.internalState&&!this.state);var e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new Ss({attributeManager:e,layer:this}),this.state={},this.state.attributeManager=e,this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(e){var t=e.state,n=e.internalState;if(Xa(t&&n),this!==e){this.internalState=n,this.internalState.component=this,this.state=t,t.layer=this,this.internalState.setAsyncProps(this.props);var i=!0,r=!1,a=void 0;try{for(var o,s=this.getModels()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){o.value.userData.layer=this}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}this.diffProps(this.props,this.internalState.getOldProps())}}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setLayerNeedsUpdate()}},{key:"_activeUpdateTrigger",value:function(e){this.invalidateAttribute(e)}},{key:"_updateBaseUniforms",value:function(){var e=this,t={opacity:"function"==typeof this.props.opacity?function(t){return Math.pow(e.props.opacity(t),1/2.2)}:Math.pow(this.props.opacity,1/2.2)},n=!0,i=!1,r=void 0;try{for(var a,o=this.getModels()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.setUniforms(t)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"setUniforms",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.getModels()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.setUniforms(e)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.setNeedsRedraw(),to.deprecated("layer.setUniforms","model.setUniforms")()}},{key:"is64bitEnabled",value:function(){return to.deprecated("is64bitEnabled","use64bitProjection")(),this.use64bitProjection()}}]),t}();Ls.layerName="Layer",Ls.defaultProps=As;var Ms=function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}return d(t,Ls),Object(s.a)(t,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(e){p(f(t.prototype),"setState",this).call(this,e),this.setLayerNeedsUpdate()}},{key:"getPickingInfo",value:function(e){return e.info}},{key:"renderLayers",value:function(){return null}},{key:"shouldRenderSubLayer",value:function(e,t){var n=this.props._subLayerProps;return t&&t.length||n&&n[e]}},{key:"getSubLayerClass",value:function(e,t){var n=this.props._subLayerProps;return n&&n[e]&&n[e].type||t}},{key:"getSubLayerProps",value:function(e){var t=this.props,n=t.opacity,i=t.pickable,r=t.visible,a=t.parameters,o=t.getPolygonOffset,s=t.highlightedObjectIndex,u=t.autoHighlight,l=t.highlightColor,c=t.coordinateSystem,f=t.coordinateOrigin,h=t.wrapLongitude,d=t.positionFormat,p=t.modelMatrix,v=t._subLayerProps,g={opacity:n,pickable:i,visible:r,parameters:a,getPolygonOffset:o,highlightedObjectIndex:s,autoHighlight:u,highlightColor:l,coordinateSystem:c,coordinateOrigin:f,wrapLongitude:h,positionFormat:d,modelMatrix:p};if(e){var m=v&&v[e.id],y=m&&m.updateTriggers;Object.assign(g,e,m,{id:"".concat(this.props.id,"-").concat(e.id),updateTriggers:Object.assign({all:this.props.updateTriggers.all},e.updateTriggers,y)})}return g}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var e=this.internalState.subLayers;e&&!this.needsUpdate()?to.log(3,"Composite layer reused subLayers ".concat(this),this.internalState.subLayers)():(e=Qa(e=this.renderLayers(),{filter:Boolean}),this.internalState.subLayers=e,to.log(2,"Composite layer rendered new subLayers ".concat(this),e)());var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.parent=this}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"isComposite",get:function(){return!0}}]),t}();Ms.layerName="CompositeLayer";var Fs=Fa.fp64LowPart,Is=[0,0,0,255],Rs={radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,fp64:!1,filled:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:Is},getLineColor:{type:"accessor",value:Is},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},Ns=function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}return d(t,Ls),Object(s.a)(t,[{key:"getShaders",value:function(e){return{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  float outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity) / 255.;\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  } \n  if (distToCenter > innerUnitRadius) {\n    gl_FragColor = vLineColor;\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:4,transition:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var n=e.props,i=e.oldProps,r=e.changeFlags;if(p(f(t.prototype),"updateState",this).call(this,{props:n,oldProps:i,changeFlags:r}),n.fp64!==i.fp64){var a=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,i=this.props,r=i.radiusScale,a=i.radiusMinPixels,o=i.radiusMaxPixels,s=i.stroked,u=i.filled,l=i.lineWidthUnits,c=i.lineWidthScale,f=i.lineWidthMinPixels,h=i.lineWidthMaxPixels,d="pixels"===l?n.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},t,{stroked:s?1:0,filled:u,radiusScale:r,radiusMinPixels:a,radiusMaxPixels:o,lineWidthScale:c*d,lineWidthMinPixels:f,lineWidthMaxPixels:h})).draw()}},{key:"_getModel",value:function(e){return new kr(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new Xn({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function(e,t){var n=t.startRow,i=t.endRow,r=this.use64bitPositions();if(e.constant=!r,r){var a=this.props,o=a.data,s=a.getPosition,u=e.value,l=n*e.size,c=Za(o,n,i),f=c.iterable,h=c.objectInfo,d=!0,p=!1,v=void 0;try{for(var g,m=f[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var y=g.value;h.index++;var b=s(y,h);u[l++]=Fs(b[0]),u[l++]=Fs(b[1])}}catch(e){p=!0,v=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw v}}}else e.value=new Float32Array(2)}}]),t}();Ns.layerName="ScatterplotLayer",Ns.defaultProps=Rs;var Ds=n(18),Bs=Object.keys(Io).map(function(e){return"const float COORDINATE_SYSTEM_".concat(e," = ").concat(Io[e],".;")}).join(""),zs="".concat(Bs,"\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\nvec4 project_position(vec4 position, vec2 position64xyLow) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return project_uModelMatrix * vec4(\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\n      project_size(position.z),\n      position.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    float X = position.x - project_uCoordinateOrigin.x;\n    float Y = position.y - project_uCoordinateOrigin.y;\n    return project_offset_(vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w));\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position);\n  }\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_IDENTITY) {\n    position_world.xyz -= project_uCoordinateOrigin;\n    position_world += project_uModelMatrix * vec4(position64xyLow, 0.0, 0.0);\n  }\n\n  return project_offset_(position_world);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_XY_LOW);\n}\n\nvec3 project_position(vec3 position, vec2 position64xyLow) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64xyLow);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xy;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    position.w *= project_uCommonUnitsPerMeter.z;\n  }\n  return project_uViewProjectionMatrix * position + project_uCenter;\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters);\n}\nfloat project_pixel_size(float pixels) {\n  return pixels;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels;\n}\nfloat project_scale(float meters) {\n  return project_size(meters);\n}\nvec2 project_scale(vec2 meters) {\n  return project_size(meters);\n}\nvec3 project_scale(vec3 meters) {\n  return project_size(meters);\n}\nvec4 project_scale(vec4 meters) {\n  return project_size(meters);\n}\nvec4 project_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position);\n}\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  return vec4(project_pixel_size_to_clipspace(pixels), 0.0, 0.0);\n}\n"),Us={};var Vs={name:"project",dependencies:[ja],vs:zs,getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Us;return e.viewport?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewport,n=e.devicePixelRatio,i=void 0===n?1:n,r=e.modelMatrix,a=void 0===r?null:r,o=e.coordinateSystem,s=void 0===o?g.LNGLAT:o,u=e.coordinateOrigin,l=void 0===u?zo:u,c=e.wrapLongitude,f=void 0!==c&&c;return e.projectionMode,e.positionOrigin,Xa(t),Object.assign({project_uModelMatrix:a||Do},Vo({viewport:t,devicePixelRatio:i,coordinateSystem:s,coordinateOrigin:l,wrapLongitude:f}))}(e):{}},deprecations:[{type:"function",old:"project_scale",new:"project_size"},{type:"function",old:"project_to_clipspace",new:"project_common_position_to_clipspace"},{type:"function",old:"project_pixel_to_clipspace",new:"project_pixel_size_to_clipspace"}]},Gs={name:"project32",dependencies:[Vs],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64xyLow);\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64xyLow, offset, commonPosition);\n}\n"},Ws=Fa.fp64ify,Hs=Fa.fp64ifyMatrix4,Xs={name:"project64",dependencies:[Vs,Fa],vs:"\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project64_uScale;\nuniform vec2 project_uViewProjectionMatrixFP64[16];\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sub_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], project64_uScale);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], project64_uScale);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvoid project_position_fp64(vec2 position, vec2 position64xyLow, out vec2 out_val[2]) {\n  vec4 position64xy = vec4(\n    position.x, position64xyLow.x,\n    position.y, position64xyLow.y);\n\n  project_position_fp64(position64xy, out_val);\n}\n\nvec4 project_common_position_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 commonPosition\n) {\n  vec2 offset64[4];\n  vec4_fp64(vec4(offset, 0.0), offset64);\n\n  float z = project_size(position.z);\n  vec2 projectedPosition64xy[2];\n  project_position_fp64(position.xy, position64xyLow, projectedPosition64xy);\n\n  vec2 commonPosition64[4];\n  commonPosition64[0] = sum_fp64(offset64[0], projectedPosition64xy[0]);\n  commonPosition64[1] = sum_fp64(offset64[1], projectedPosition64xy[1]);\n  commonPosition64[2] = sum_fp64(offset64[2], vec2(z, 0.0));\n  commonPosition64[3] = vec2(1.0, 0.0);\n\n  commonPosition = vec4(projectedPosition64xy[0].x, projectedPosition64xy[1].x, z, 1.0);\n\n  return project_common_position_to_clipspace_fp64(commonPosition64);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(\n    position, position64xyLow, offset, commonPosition\n  );\n}\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  return project_common_position_to_clipspace_fp64(vertex_pos_modelspace);\n}\n",getUniforms:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.project_uViewProjectionMatrix,n=e.project_uScale;if(t&&n)return qs({project_uViewProjectionMatrix:t,project_uScale:n});return{}},deprecations:[{type:"function",old:"project_to_clipspace_fp64",new:"project_common_position_to_clipspace_fp64"}]},qs=Fo(function(e){var t=e.project_uViewProjectionMatrix,n=e.project_uScale,i=Hs(t),r=Ws(n);return{project_uViewProjectionMatrixFP64:i,project64_uViewProjectionMatrix:i,project64_uScale:r}});var Ys;if(Ds.a.deck&&"7.1.9"!==Ds.a.deck.VERSION)throw new Error("deck.gl - multiple versions detected: ".concat(Ds.a.deck.VERSION," vs ").concat("7.1.9"));Ds.a.deck||(to.log(0,"deck.gl ".concat("7.1.9"," - ").concat("set deck.log.priority=1 (or higher) to trace attribute updates"))(),Ds.a.deck=Ds.a.deck||{VERSION:"7.1.9",version:"7.1.9",log:to},function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,n=void 0!==t&&t;Di.registerShaderModules(e,{ignoreMultipleRegistrations:n})}([ja,Fa,Vs,Gs,Xs,Va,Ga,Ra]),Ys=[Vs],Di.setDefaultShaderModules(Ys));var Zs=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).overAlloc,n=void 0===t?1:t;Object(o.a)(this,e),this.overAlloc=n}return Object(s.a)(e,[{key:"allocate",value:function(e,t,n){var i=n.size,r=n.type,a=n.copy,o=void 0!==a&&a,s=t*i;if(e&&s<=e.length)return e;var u=Math.max(Math.ceil(s*this.overAlloc),1),l=this._allocate(r,u);return e&&o&&l.set(e),this._release(e),l}},{key:"_allocate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Float32Array,t=arguments.length>1?arguments[1]:void 0;return new e(t)}},{key:"_release",value:function(e){}}]),e}(),Qs={Tesselator:function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e);var n=t.attributes,i=void 0===n?{}:n;this.typedArrayManager=new Zs,this.indexLayout=null,this.bufferLayout=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=i,this.updateGeometry(t),Object.seal(this)}return Object(s.a)(e,[{key:"updateGeometry",value:function(e){var t=e.data,n=e.getGeometry,i=e.positionFormat,r=e.fp64;this.data=t,this.getGeometry=n,this.fp64=r,this.positionSize="XY"===i?2:3,this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(e){var t=e.startRow,n=e.endRow;this._rebuildGeometry({startRow:t,endRow:n})}},{key:"updateGeometryAttributes",value:function(e,t,n){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function(e){throw new Error("Not implemented")}},{key:"_forEachGeometry",value:function(e,t,n){var i=this.data,r=this.getGeometry,a=Za(i,t,n),o=a.iterable,s=a.objectInfo,u=!0,l=!1,c=void 0;try{for(var f,h=o[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;s.index++,e(r(d,s),s.index)}}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}}},{key:"_rebuildGeometry",value:function(e){var t=this;if(this.data&&this.getGeometry){var n=this.indexLayout,i=this.bufferLayout;e||(n=[],i=[]);var r=e||{},a=r.startRow,o=void 0===a?0:a,s=r.endRow,u=void 0===s?1/0:s;this._forEachGeometry(function(e,n){i[n]=t.getGeometrySize(e)},o,u);var l=0,c=!0,f=!1,h=void 0;try{for(var d,p=i[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){l+=d.value}}catch(e){f=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}var v=this.attributes,g=this._attributeDefs,m=this.typedArrayManager,y=this.fp64;for(var b in g){var _=g[b];_.copy=Boolean(e),_.fp64Only&&!y||(v[b]=m.allocate(v[b],l,_))}this.indexLayout=n,this.bufferLayout=i,this.instanceCount=l;for(var w={vertexStart:0,indexStart:0},x=0;x<o;x++)w.vertexStart+=i[x],w.indexStart+=n[x]||0;this._forEachGeometry(function(e,r){var a=i[r];w.geometryIndex=r,w.geometrySize=a,t.updateGeometryAttributes(e,w),w.vertexStart+=a,w.indexStart+=n[r]||0},o,u);for(var k=w.indexStart,P=u;P<n.length;P++)k+=n[P];this.vertexCount=k}}}]),e}(),flattenVertices:function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.result,r=void 0===i?[]:i,a=n.dimensions,o=void 0===a?3:a,s=-1,u=0;++s<t.length;){var l=t[s];Array.isArray(l)||ArrayBuffer.isView(l)?e(l,{result:r,dimensions:o}):u<o&&(r.push(l),u++)}return u>0&&u<o&&r.push(0),r},fillArray:Ka,count:Lo,memoize:Fo},Ks=Qs.Tesselator,$s=Fa.fp64LowPart,Js=function(e){function t(e){var n=e.data,i=e.getGeometry,r=e.positionFormat,a=e.fp64;return Object(o.a)(this,t),c(this,f(t).call(this,{data:n,getGeometry:i,fp64:a,positionFormat:r,attributes:{startPositions:{size:3},endPositions:{size:3},leftPositions:{size:3},rightPositions:{size:3},startEndPositions64XyLow:{size:4,fp64Only:!0},neighborPositions64XyLow:{size:4,fp64Only:!0}}}))}return d(t,Ks),Object(s.a)(t,[{key:"get",value:function(e){return this.attributes[e]}},{key:"getGeometrySize",value:function(e){return Math.max(0,this.getPathLength(e)-1)}},{key:"updateGeometryAttributes",value:function(e,t){var n=this.attributes,i=n.startPositions,r=n.endPositions,a=n.leftPositions,o=n.rightPositions,s=n.startEndPositions64XyLow,u=n.neighborPositions64XyLow,l=this.fp64,c=t.geometrySize+1;if(!(c<2))for(var f,h=this.isClosed(e),d=this.getPointOnPath(e,0),p=this.getPointOnPath(e,1),v=h?this.getPointOnPath(e,c-2):d,g=t.vertexStart,m=1;m<c;g++,m++)f=m+1<c?this.getPointOnPath(e,m+1):h?this.getPointOnPath(e,1):p,i[3*g]=d[0],i[3*g+1]=d[1],i[3*g+2]=d[2]||0,r[3*g]=p[0],r[3*g+1]=p[1],r[3*g+2]=p[2]||0,a[3*g]=v[0],a[3*g+1]=v[1],a[3*g+2]=v[2]||0,o[3*g]=f[0],o[3*g+1]=f[1],o[3*g+2]=f[2]||0,l&&(s[4*g]=$s(d[0]),s[4*g+1]=$s(d[1]),s[4*g+2]=$s(p[0]),s[4*g+3]=$s(p[1]),u[4*g]=$s(v[0]),u[4*g+1]=$s(v[1]),u[4*g+2]=$s(f[0]),u[4*g+3]=$s(f[1])),v=d,d=p,p=f}},{key:"getPathLength",value:function(e){return Number.isFinite(e[0])?e.length/this.positionSize:e.length}},{key:"getPointOnPath",value:function(e,t){if(Number.isFinite(e[0])){var n=this.positionSize;return[e[t*n],e[t*n+1],3===n?e[t*n+2]:0]}return e[t]}},{key:"isClosed",value:function(e){var t=this.getPathLength(e),n=this.getPointOnPath(e,0),i=this.getPointOnPath(e,t-1);return n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]}}]),t}(),eu="#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\nuniform float alignMode;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nfloat mod2(float a, float b) {\n  return a - floor(a / b) * b;\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\nbool dash_isFragInGap() {\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n\n  float unitLength = solidLength + gapLength;\n\n  if (unitLength == 0.0) {\n    return false;\n  }\n\n  unitLength = mix(\n    unitLength,\n    vPathLength / round(vPathLength / unitLength),\n    alignMode\n  );\n\n  float offset = alignMode * solidLength / 2.0;\n\n  return gapLength > 0.0 &&\n    vPathPosition.y >= 0.0 &&\n    vPathPosition.y <= vPathLength &&\n    mod2(vPathPosition.y + offset, unitLength) > solidLength;\n}\n\nvoid main(void) {\n  if (jointType > 0.0 && vMiterLength > 0.0 && length(vCornerOffset) > 1.0) {\n    discard;\n  }\n  if (jointType == 0.0 && vMiterLength > miterLimit) {\n    discard;\n  }\n  if (vColor.a == 0.0 || dash_isFragInGap()) {\n    discard;\n  }\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",tu=[0,0,0,255],nu={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},fp64:!1,dashJustified:!1,billboard:!1,getPath:{type:"accessor",value:function(e){return e.path}},getColor:{type:"accessor",value:tu},getWidth:{type:"accessor",value:1},getDashArray:{type:"accessor",value:[0,0]}},iu={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},ru=function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}return d(t,Ls),Object(s.a)(t,[{key:"getShaders",value:function(){return this.use64bitProjection()?{vs:"\n#define SHADER_NAME path-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec4 instanceNeighborPositions64xyLow;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\nvec3 lineJoin(vec2 prevPoint64[2], vec2 currPoint64[2], vec2 nextPoint64[2]) {\n\n  float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n  float width = project_pixel_size(widthPixels);\n\n  vec2 deltaA64[2];\n  vec2 deltaB64[2];\n\n  vec2_sub_fp64(currPoint64, prevPoint64, deltaA64);\n  vec2_sub_fp64(nextPoint64, currPoint64, deltaB64);\n\n  vec2 lengthA64 = vec2_length_fp64(deltaA64);\n  vec2 lengthB64 = vec2_length_fp64(deltaB64);\n\n  vec2 deltaA = vec2(deltaA64[0].x, deltaA64[1].x);\n  vec2 deltaB = vec2(deltaB64[0].x, deltaB64[1].x);\n\n  float lenA = lengthA64.x;\n  float lenB = lengthB64.x;\n\n  vec2 offsetVec;\n  float offsetScale;\n  float offsetDirection;\n  lenA = lenA / width > EPSILON ? lenA : 0.0;\n  lenB = lenB / width > EPSILON ? lenB : 0.0;\n  vec2 dirA = lenA > 0. ? deltaA / lenA : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? deltaB / lenB : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 perp = mix(perpB, perpA, positions.x);\n  float L = mix(lenB, lenA, positions.x);\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n  float cornerPosition = mix(\n    flipIfTrue(turnsRight == (positions.y > 0.0)),\n    0.0,\n    positions.z\n  );\n\n  offsetScale = 1.0 / max(sinHalfA, EPSILON);\n  cornerPosition *= float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n  offsetScale = mix(\n    offsetScale,\n    min(offsetScale, L / width / max(cosHalfA, EPSILON)),\n    float(cornerPosition < 0.0)\n  );\n\n  vMiterLength = mix(\n    offsetScale * cornerPosition,\n    mix(offsetScale, 0.0, cornerPosition),\n    step(0.0, cornerPosition)\n  ) - sinHalfA * jointType;\n  offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n  offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n  float isStartCap = step(lenA, 1.0e-5);\n  float isEndCap = step(lenB, 1.0e-5);\n  float isCap = max(isStartCap, isEndCap);\n  cornerPosition = isCap * (1.0 - positions.z);\n  offsetVec = mix(offsetVec, mix(dirB, perpB, cornerPosition), isStartCap);\n  offsetVec = mix(offsetVec, mix(dirA, perpA, cornerPosition), isEndCap);\n  offsetScale = mix(\n    offsetScale,\n    mix(4.0 * jointType, 1.0, cornerPosition),\n    isCap\n  );\n  vMiterLength = mix(vMiterLength, 1.0 - cornerPosition, isCap);\n\n  offsetDirection = mix(\n    offsetDirection,\n    mix(flipIfTrue(isStartCap > 0.), positions.y, cornerPosition),\n    isCap\n  );\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  float isEnd = positions.x;\n  vec2 offsetFromStartOfPath = mix(vCornerOffset, vCornerOffset + deltaA / width, isEnd);\n  vec2 dir = mix(dirB, dirA, isEnd);\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n\n  return vec3(vCornerOffset * width, 0.0);\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n  vec2 projected_curr_position[2];\n  project_position_fp64(currPosition.xy, currPosition64xyLow, projected_curr_position);\n  float projected_curr_position_z = project_size(currPosition.z);\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec2 prevPosition64xyLow = mix(instanceNeighborPositions64xyLow.xy, instanceStartEndPositions64xyLow.xy, isEnd);\n\n  vec2 projected_prev_position[2];\n  project_position_fp64(prevPosition.xy, prevPosition64xyLow, projected_prev_position);\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec2 nextPosition64xyLow = mix(instanceStartEndPositions64xyLow.zw, instanceNeighborPositions64xyLow.zw, isEnd);\n\n  vec2 projected_next_position[2];\n  project_position_fp64(nextPosition.xy, nextPosition64xyLow, projected_next_position);\n\n  vec3 pos = lineJoin(projected_prev_position, projected_curr_position, projected_next_position);\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = sum_fp64(vec2(pos.x, 0.0), projected_curr_position[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vec2(pos.y, 0.0), projected_curr_position[1]);\n  vertex_pos_modelspace[2] = vec2(pos.z + projected_curr_position_z, 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_common_position_to_clipspace_fp64(vertex_pos_modelspace);\n}\n",fs:eu,modules:["project64","picking"]}:{vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec4 instanceNeighborPositions64xyLow;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  float relativePosition, bool isEnd, bool isJoint,\n  vec2 width\n) {\n  vec2 deltaA = (currPoint.xy - prevPoint.xy) / width;\n  vec2 deltaB = (nextPoint.xy - currPoint.xy) / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n  lenA = lenA > EPSILON ? lenA : 0.0;\n  lenB = lenB > EPSILON ? lenB : 0.0;\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  float offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  float cornerPosition = isJoint ?\n    0.0 :\n    flipIfTrue(turnsRight == (relativePosition > 0.0));\n  cornerPosition *=\n    float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) * cosHalfA);\n  if (cornerPosition < 0.0) {\n    offsetScale = min(offsetScale, L / max(cosHalfA, EPSILON));\n  }\n\n  vMiterLength = cornerPosition >= 0.0 ?\n    mix(offsetScale, 0.0, cornerPosition) :\n    offsetScale * cornerPosition;\n  vMiterLength -= sinHalfA * jointType;\n\n  float offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n  bool isStartCap = step(0.0, -lenA) > 0.5;\n  bool isEndCap = step(0.0, -lenB) > 0.5;\n  bool isCap = isStartCap || isEndCap;\n  cornerPosition = isCap ? (1.0 - positions.z) : 0.;\n  if (isStartCap) {\n    offsetVec = mix(dirB, perpB, cornerPosition);\n  }\n  if (isEndCap) {\n    offsetVec = mix(dirA, perpA, cornerPosition);\n  }\n  if (isCap) {\n    offsetScale = mix(4.0 * jointType, 1.0, cornerPosition);\n    vMiterLength = 1.0 - cornerPosition;\n    offsetDirection = mix(flipIfTrue(isStartCap), positions.y, cornerPosition);\n  }\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n  vDashArray = instanceDashArrays;\n  vPathLength = L;\n  vec2 offsetFromStartOfPath = vCornerOffset;\n  if (isEnd) {\n    offsetFromStartOfPath += deltaA;\n  }\n  vec2 dir = isEnd ? dirA : dirB;\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n\n  return currPoint + vec3(vCornerOffset * width, 0.0);\n}\nvec3 lineJoin(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\n  float relativePosition = positions.y;\n  bool isEnd = positions.x > EPSILON;\n  bool isJoint = positions.z > EPSILON;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n\n  return lineJoin(\n    prevPoint, currPoint, nextPoint,\n    relativePosition, isEnd, isJoint,\n    billboard ? project_pixel_size_to_clipspace(widthPixels) : project_pixel_size(widthPixels)\n  );\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec2 prevPosition64xyLow = mix(instanceNeighborPositions64xyLow.xy, instanceStartEndPositions64xyLow.xy, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec2 nextPosition64xyLow = mix(instanceStartEndPositions64xyLow.zw, instanceNeighborPositions64xyLow.zw, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64xyLow, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64xyLow, ZERO_OFFSET);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64xyLow, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64xyLow);\n    currPosition = project_position(currPosition, currPosition64xyLow);\n    nextPosition = project_position(nextPosition, nextPosition64xyLow);\n\n    vec3 pos = lineJoin(prevPosition, currPosition, nextPosition);\n    gl_Position = project_common_position_to_clipspace(vec4(pos, 1.0));\n  }\n}\n",fs:eu,modules:["project32","picking"]}}},{key:"initializeState",value:function(){var e=this;this.getAttributeManager().addInstanced({instanceStartPositions:{size:3,transition:iu,accessor:"getPath",update:this.calculateStartPositions,noAlloc:!0},instanceEndPositions:{size:3,transition:iu,accessor:"getPath",update:this.calculateEndPositions,noAlloc:!0},instanceStartEndPositions64xyLow:{size:4,update:this.calculateInstanceStartEndPositions64xyLow,noAlloc:!0},instanceLeftPositions:{size:3,accessor:"getPath",update:this.calculateLeftPositions,noAlloc:!0},instanceRightPositions:{size:3,accessor:"getPath",update:this.calculateRightPositions,noAlloc:!0},instanceNeighborPositions64xyLow:{size:4,update:this.calculateInstanceNeighborPositions64xyLow,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:iu,defaultValue:1},instanceDashArrays:{size:2,accessor:"getDashArray"},instanceColors:{size:4,type:5121,accessor:"getColor",transition:iu,defaultValue:tu},instancePickingColors:{size:3,type:5121,accessor:function(t,n){var i=n.index,r=n.target;return e.encodePickingColor(i,r)}}}),this.setState({pathTesselator:new Js({})})}},{key:"updateState",value:function(e){var n=e.oldProps,i=e.props,r=e.changeFlags;p(f(t.prototype),"updateState",this).call(this,{props:i,oldProps:n,changeFlags:r});var a=this.getAttributeManager();if(r.dataChanged||i.fp64!==n.fp64||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){var o=this.state.pathTesselator;o.updateGeometry({data:i.data,getGeometry:i.getPath,positionFormat:i.positionFormat,fp64:this.use64bitPositions()}),this.setState({numInstances:o.instanceCount,bufferLayout:o.bufferLayout}),a.invalidateAll()}if(i.fp64!==n.fp64){var s=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(s)}),a.invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,i=this.props,r=i.rounded,a=i.billboard,o=i.miterLimit,s=i.widthUnits,u=i.widthScale,l=i.widthMinPixels,c=i.widthMaxPixels,f=i.dashJustified,h="pixels"===s?n.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},t,{jointType:Number(r),billboard:a,alignMode:Number(f),widthScale:u*h,miterLimit:o,widthMinPixels:l,widthMaxPixels:c})).draw()}},{key:"_getModel",value:function(e){return new kr(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new Xn({drawMode:4,attributes:{indices:new Uint16Array([0,2,1,1,2,4,1,4,3,3,4,5]),positions:new Float32Array([0,0,1,0,-1,0,0,1,0,1,-1,0,1,1,0,1,0,1])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateStartPositions",value:function(e){var t=this.state.pathTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("startPositions")}},{key:"calculateEndPositions",value:function(e){var t=this.state.pathTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("endPositions")}},{key:"calculateInstanceStartEndPositions64xyLow",value:function(e){var t=this.use64bitPositions();e.constant=!t,e.value=t?this.state.pathTesselator.get("startEndPositions64XyLow"):new Float32Array(4)}},{key:"calculateLeftPositions",value:function(e){var t=this.state.pathTesselator;e.value=t.get("leftPositions")}},{key:"calculateRightPositions",value:function(e){var t=this.state.pathTesselator;e.value=t.get("rightPositions")}},{key:"calculateInstanceNeighborPositions64xyLow",value:function(e){var t=this.use64bitPositions();e.constant=!t,e.value=t?this.state.pathTesselator.get("neighborPositions64XyLow"):new Float32Array(4)}},{key:"clearPickingColor",value:function(e){for(var t=this.decodePickingColor(e),n=this.state.pathTesselator.bufferLayout,i=n[t],r=0,a=0;a<t;a++)r+=n[a];var o=this.getAttributeManager().attributes.instancePickingColors,s=o.value,u=r+i;s.fill(0,3*r,3*u),o.update({value:s})}}]),t}();ru.layerName="PathLayer",ru.defaultProps=nu;var au=n(34),ou=n.n(au);function su(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function uu(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function lu(e){var t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function cu(e,t,n,i){for(var r=0;r<t;r++)if(e[n+r]!==e[i-t+r])return!1;return!0}function fu(e,t,n,i){for(var r=t,a=n.length,o=0;o<a;o++)for(var s=0;s<i;s++)e[r++]=n[o][s]||0;if(!lu(n))for(var u=0;u<i;u++)e[r++]=n[0][u]||0;return r}function hu(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,o=(a=a||n.length)-r;if(o<=0)return t;for(var s=t,u=0;u<o;u++)e[s++]=n[r+u];if(!cu(n,i,r,a))for(var l=0;l<i;l++)e[s++]=n[r+l];return s}function du(e){return(lu(e)?0:1)+e.length}function pu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;return n>=(i=i||e.length)?0:(cu(e,t,n,i)?0:1)+(i-n)/t}function vu(e,t){if(su(e),e.positions){var n=e,i=n.positions,r=n.holeIndices;if(r){for(var a=0,o=0;o<=r.length;o++)a+=pu(e.positions,t,r[o-1],r[o]);return a}e=i}if(Number.isFinite(e[0]))return pu(e,t);if(!uu(e)){var s=0,u=!0,l=!1,c=void 0;try{for(var f,h=e[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){s+=du(f.value)}}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}return s}return du(e)}var gu=Qs.Tesselator,mu=Fa.fp64LowPart,yu=function(e){function t(e){var n=e.data,i=e.getGeometry,r=e.fp64,a=e.positionFormat,s=e.IndexType,u=void 0===s?Uint32Array:s;return Object(o.a)(this,t),c(this,f(t).call(this,{data:n,getGeometry:i,fp64:r,positionFormat:a,attributes:{positions:{size:3},positions64xyLow:{size:2,fp64Only:!0},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:u,size:1}}}))}return d(t,gu),Object(s.a)(t,[{key:"get",value:function(e){return"indices"===e?this.attributes.indices.subarray(0,this.vertexCount):this.attributes[e]}},{key:"getGeometrySize",value:function(e){return vu(e,this.positionSize)}},{key:"updateGeometryAttributes",value:function(e,t){e=function(e,t,n){su(e),n=n||vu(e,t);var i=new Float64Array(n*t),r=[];if(e.positions){var a=e,o=a.positions,s=a.holeIndices;if(s){for(var u=0,l=0;l<=s.length;l++)u=hu(i,u,o,t,s[l-1],s[l]),r.push(u);return r.pop(),{positions:i,holeIndices:r}}e=o}if(Number.isFinite(e[0]))return hu(i,0,e,t),{positions:i,holeIndices:null};if(!uu(e)){var c=0,f=!0,h=!1,d=void 0;try{for(var p,v=e[Symbol.iterator]();!(f=(p=v.next()).done);f=!0)c=fu(i,c,p.value,t),r.push(c)}catch(e){h=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}return r.pop(),{positions:i,holeIndices:r}}return fu(i,0,e,t),{positions:i,holeIndices:null}}(e,this.positionSize,t.geometrySize),this._updateIndices(e,t),this._updatePositions(e,t)}},{key:"_updateIndices",value:function(e,t){var n,i,r,a=t.geometryIndex,o=t.vertexStart,s=t.indexStart,u=this.attributes,l=this.indexLayout,c=this.typedArrayManager,f=u.indices,h=f.length,d=s,p=(n=e,i=this.positionSize,r=null,n.holeIndices&&(r=n.holeIndices.map(function(e){return e/i})),ou()(n.positions,r,i));h<d+p.length&&(h=2*(d+p.length),f=c.allocate(f,h,{type:f.constructor,size:1,copy:!0}));for(var v=0;v<p.length;v++)f[d++]=p[v]+o;l[a]=p.length,u.indices=f}},{key:"_updatePositions",value:function(e,t){for(var n=t.vertexStart,i=t.geometrySize,r=this.attributes,a=r.positions,o=r.positions64xyLow,s=r.vertexValid,u=this.fp64,l=this.positionSize,c=n,f=e.positions,h=e.holeIndices,d=0;d<i;d++){var p=f[d*l],v=f[d*l+1],g=l>2?f[d*l+2]:0;a[3*c]=p,a[3*c+1]=v,a[3*c+2]=g,u&&(o[2*c]=mu(p),o[2*c+1]=mu(v)),s[c]=1,c++}if(h)for(var m=0;m<h.length;m++)s[n+h[m]/l-1]=0;s[n+i-1]=0}}]),t}(),bu="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec2 positions64xyLow;\n  vec2 nextPositions64xyLow;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n  vec3 pos;\n  vec2 pos64xyLow;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64xyLow = mix(props.positions64xyLow, props.nextPositions64xyLow, vertexPositions.x);\n  isValid = vertexValid;\n#else\n  pos = props.positions;\n  pos64xyLow = props.positions64xyLow;\n  isValid = 1.0;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n  }\n\n  vec4 position_commonspace;\n  gl_Position = project_position_to_clipspace(pos, pos64xyLow, vec3(0.), position_commonspace);\n\n  if (extruded) {\n#ifdef IS_SIDE_VERTEX\n    normal = vec3(props.positions.y - props.nextPositions.y, props.nextPositions.x - props.positions.x, 0.0);\n    normal = project_offset_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, position_commonspace.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity) / 255.0;\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity) / 255.0;\n  }\n  picking_setPickingColor(props.pickingColors);\n}\n",_u="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(bu,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64xyLow = positions64xyLow;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),wu="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec3 nextPositions;\nattribute vec2 nextPositions64xyLow;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(bu,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = instancePositions;\n  props.positions64xyLow = instancePositions64xyLow;\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n  props.nextPositions = nextPositions;\n  props.nextPositions64xyLow = nextPositions64xyLow;\n\n  calculatePosition(props);\n}\n"),xu=[0,0,0,255],ku=new fa,Pu={filled:!0,extruded:!1,wireframe:!1,fp64:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function(e){return e.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:xu},getLineColor:{type:"accessor",value:xu},material:ku},Ou={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},Eu=function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}return d(t,Ls),Object(s.a)(t,[{key:"getShaders",value:function(e){return{vs:e,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid < 0.5) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",defines:{},modules:[this.use64bitProjection()?"project64":"project32","gouraud-lighting","picking"]}}},{key:"initializeState",value:function(){var e=this,t=this.context.gl;this.setState({numInstances:0,polygonTesselator:new yu({IndexType:!t||Pt(t,xt.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var n=this.getAttributeManager();n.remove(["instancePickingColors"]),n.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,transition:Ou,accessor:"getPolygon",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{positions:{offset:0,divisor:0},instancePositions:{offset:0,divisor:1},nextPositions:{offset:12,divisor:1}}},positions64xyLow:{size:2,update:this.calculatePositionsLow,noAlloc:!0,shaderAttributes:{positions64xyLow:{offset:0,divisor:0},instancePositions64xyLow:{offset:0,divisor:1},nextPositions64xyLow:{offset:8,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:Ou,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:4,type:5121,transition:Ou,accessor:"getFillColor",defaultValue:xu,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:4,type:5121,transition:Ou,accessor:"getLineColor",defaultValue:xu,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:function(t,n){var i=n.index,r=n.target;return e.encodePickingColor(i,r)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.props,i=n.extruded,r=n.filled,a=n.wireframe,o=n.elevationScale,s=this.state,u=s.topModel,l=s.sideModel,c=s.polygonTesselator,f=Object.assign({},t,{extruded:Boolean(i),elevationScale:o});l&&(l.setInstanceCount(c.instanceCount-1),l.setUniforms(f),a&&(l.setDrawMode(3),l.setUniforms({isWireframe:!0}).draw()),r&&(l.setDrawMode(6),l.setUniforms({isWireframe:!1}).draw())),u&&(u.setVertexCount(c.get("indices").length),u.setUniforms(f).draw())}},{key:"updateState",value:function(e){p(f(t.prototype),"updateState",this).call(this,e),this.updateGeometry(e);var n=e.props,i=e.oldProps,r=this.getAttributeManager();(n.fp64!==i.fp64||n.filled!==i.filled||n.extruded!==i.extruded)&&(this.state.models&&this.state.models.forEach(function(e){return e.delete()}),this.setState(this._getModels(this.context.gl)),r.invalidateAll())}},{key:"updateGeometry",value:function(e){var t=e.props,n=e.oldProps,i=e.changeFlags;if(i.dataChanged||t.fp64!==n.fp64||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon)){var r=this.state.polygonTesselator;r.updateGeometry({data:t.data,getGeometry:t.getPolygon,positionFormat:t.positionFormat,fp64:this.use64bitPositions()}),this.setState({numInstances:r.instanceCount,bufferLayout:r.bufferLayout}),this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function(e){var t,n,i=this.props,r=i.id,a=i.filled,o=i.extruded;if(a){var s=this.getShaders(_u);s.defines.NON_INSTANCED_MODEL=1,t=new kr(e,Object.assign({},s,{id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0,shaderCache:this.context.shaderCache}))}return o&&((n=new kr(e,Object.assign({},this.getShaders(wu),{id:"".concat(r,"-side"),geometry:new Xn({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,1,0,1,0,0,1,0])}}}),instanceCount:0,isInstanced:1,shaderCache:this.context.shaderCache}))).userData.excludeAttributes={indices:!0}),{models:[n,t].filter(Boolean),topModel:t,sideModel:n}}},{key:"calculateIndices",value:function(e){var t=this.state.polygonTesselator;e.bufferLayout=t.indexLayout,e.value=t.get("indices")}},{key:"calculatePositions",value:function(e){var t=this.state.polygonTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("positions")}},{key:"calculatePositionsLow",value:function(e){var t=this.use64bitPositions();e.constant=!t,e.value=t?this.state.polygonTesselator.get("positions64xyLow"):new Float32Array(2)}},{key:"calculateVertexValid",value:function(e){e.value=this.state.polygonTesselator.get("vertexValid")}},{key:"clearPickingColor",value:function(e){for(var t=this.decodePickingColor(e),n=this.state.polygonTesselator.bufferLayout,i=n[t],r=0,a=0;a<t;a++)r+=n[a];var o=this.getAttributeManager().attributes.pickingColors,s=o.value,u=r+i;s.fill(0,3*r,3*u),o.update({value:s})}}]),t}();function Tu(e,t,n){var i=e.type,r=e.coordinates,a=t.pointFeatures,o=t.lineFeatures,s=t.polygonFeatures,u=t.polygonOutlineFeatures;if(function(e,t){var n=ju[e];to.assert(n,"Unknown GeoJSON type ".concat(e));for(;t&&--n>0;)t=t[0];return t&&Number.isFinite(t[0])}(i,r))switch(i){case"Point":a.push({geometry:e,sourceFeature:n});break;case"MultiPoint":r.forEach(function(e){a.push({geometry:{type:"Point",coordinates:e},sourceFeature:n})});break;case"LineString":o.push({geometry:e,sourceFeature:n});break;case"MultiLineString":r.forEach(function(e){o.push({geometry:{type:"LineString",coordinates:e},sourceFeature:n})});break;case"Polygon":s.push({geometry:e,sourceFeature:n}),r.forEach(function(e){u.push({geometry:{type:"LineString",coordinates:e},sourceFeature:n})});break;case"MultiPolygon":r.forEach(function(e){s.push({geometry:{type:"Polygon",coordinates:e},sourceFeature:n}),e.forEach(function(e){u.push({geometry:{type:"LineString",coordinates:e},sourceFeature:n})})})}else to.warn("".concat(i," coordinates are malformed"))()}function Su(e){return e.sourceFeature.feature}Eu.layerName="SolidPolygonLayer",Eu.defaultProps=Pu;var ju={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};var Cu=new fa,Au={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,lineDashJustified:!1,fp64:!1,getLineColor:{type:"accessor",value:[0,0,0,255]},getFillColor:{type:"accessor",value:[0,0,0,255]},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getLineDashArray:{type:"accessor",value:[0,0]},getElevation:{type:"accessor",value:1e3},material:Cu};function Lu(e){return e.geometry.coordinates}function Mu(e){return"function"!=typeof e?e:function(t){return e(Su(t))}}var Fu=function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}return d(t,Ms),Object(s.a)(t,[{key:"initializeState",value:function(){this.state={features:{}}}},{key:"updateState",value:function(e){e.oldProps;var t=e.props;if(e.changeFlags.dataChanged){var n=function(e){if(Array.isArray(e))return e;switch(to.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return to.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}(t.data);this.state.features=function(e){for(var t={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},n=0;n<e.length;n++){var i=e[n];to.assert(i&&i.geometry,"GeoJSON does not have geometry");var r=i.geometry,a={feature:i,index:n};if("GeometryCollection"===r.type){to.assert(Array.isArray(r.geometries),"GeoJSON does not have geometries array");for(var o=r.geometries,s=0;s<o.length;s++)Tu(o[s],t,a)}else Tu(r,t,a)}return t}(n)}}},{key:"getPickingInfo",value:function(e){var t,n=e.info;e.sourceLayer;return Object.assign(n,{object:n.object?Su(n.object):n.object,index:n.object?(t=n.object,t.sourceFeature.index):n.index})}},{key:"renderLayers",value:function(){var e=this.state.features,t=e.pointFeatures,n=e.lineFeatures,i=e.polygonFeatures,r=e.polygonOutlineFeatures,a=this.props,o=a.stroked,s=a.filled,u=a.extruded,l=a.wireframe,c=a.material,f=a.transitions,h=this.props,d=h.lineWidthUnits,p=h.lineWidthScale,v=h.lineWidthMinPixels,g=h.lineWidthMaxPixels,m=h.lineJointRounded,y=h.lineMiterLimit,b=h.pointRadiusScale,_=h.pointRadiusMinPixels,w=h.pointRadiusMaxPixels,x=h.elevationScale,k=h.lineDashJustified,P=h.fp64,O=this.props,E=O.getLineColor,T=O.getFillColor,S=O.getRadius,j=O.getLineWidth,C=O.getLineDashArray,A=O.getElevation,L=O.updateTriggers,M=this.getSubLayerClass("polygons-fill",Eu),F=this.getSubLayerClass("polygons-stroke",ru),I=this.getSubLayerClass("line-strings",ru),R=this.getSubLayerClass("points",Ns),N=this.shouldRenderSubLayer("polygons-fill",i)&&new M({fp64:P,extruded:u,elevationScale:x,filled:s,wireframe:l,material:c,getElevation:Mu(A),getFillColor:Mu(T),getLineColor:Mu(E),transitions:f&&{getPolygon:f.geometry,getElevation:f.getElevation,getFillColor:f.getFillColor,getLineColor:f.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:L.getElevation,getFillColor:L.getFillColor,getLineColor:L.getLineColor}}),{data:i,getPolygon:Lu});return[!u&&N,!u&&o&&this.shouldRenderSubLayer("polygons-stroke",r)&&new F({fp64:P,widthUnits:d,widthScale:p,widthMinPixels:v,widthMaxPixels:g,rounded:m,miterLimit:y,dashJustified:k,getColor:Mu(E),getWidth:Mu(j),getDashArray:Mu(C),transitions:f&&{getPath:f.geometry,getColor:f.getLineColor,getWidth:f.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:L.getLineColor,getWidth:L.getLineWidth,getDashArray:L.getLineDashArray}}),{data:r,getPath:Lu}),this.shouldRenderSubLayer("linestrings",n)&&new I({fp64:P,widthUnits:d,widthScale:p,widthMinPixels:v,widthMaxPixels:g,rounded:m,miterLimit:y,dashJustified:k,getColor:Mu(E),getWidth:Mu(j),getDashArray:Mu(C),transitions:f&&{getPath:f.geometry,getColor:f.getLineColor,getWidth:f.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:L.getLineColor,getWidth:L.getLineWidth,getDashArray:L.getLineDashArray}}),{data:n,getPath:Lu}),this.shouldRenderSubLayer("points",t)&&new R({fp64:P,stroked:o,filled:s,radiusScale:b,radiusMinPixels:_,radiusMaxPixels:w,lineWidthUnits:d,lineWidthScale:p,lineWidthMinPixels:v,lineWidthMaxPixels:g,getFillColor:Mu(T),getLineColor:Mu(E),getRadius:Mu(S),getLineWidth:Mu(j),transitions:f&&{getPosition:f.geometry,getFillColor:f.getFillColor,getLineColor:f.getLineColor,getRadius:f.getRadius,getLineWidth:f.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:L.getFillColor,getLineColor:L.getLineColor,getRadius:L.getRadius,getLineWidth:L.getLineWidth}}),{data:t,getPosition:Lu}),u&&N]}}]),t}();Fu.layerName="GeoJsonLayer",Fu.defaultProps=Au;var Iu=n(35),Ru=n.n(Iu);var Nu=Math.PI/180,Du=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Bu=[0,0,0],zu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e);var n=t.id,i=void 0===n?null:n,r=t.x,a=void 0===r?0:r,s=t.y,u=void 0===s?0:s,l=t.width,c=void 0===l?1:l,f=t.height,h=void 0===f?1:f;this.id=i||this.constructor.displayName||"viewport",this.x=a,this.y=u,this.width=c||1,this.height=h||1,this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}return Object(s.a)(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&t.scale===this.scale&&ai(t.projectionMatrix,this.projectionMatrix)&&ai(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,i=void 0===n||n,r=this.projectPosition(e),a=ss(r,this.pixelProjectionMatrix),o=v(a,2),s=o[0],u=o[1],l=i?u:this.height-u;return 2===e.length?[s,l]:[s,l,a[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,i=void 0===n||n,r=t.targetZ,a=v(e,3),o=a[0],s=a[1],u=a[2],l=i?s:this.height-s,c=r&&r*this.distanceScales.pixelsPerMeter[2],f=us([o,l,u],this.pixelUnprojectionMatrix,c),h=this.unprojectPosition(f),d=v(h,3),p=d[0],g=d[1],m=d[2];return Number.isFinite(u)?[p,g,m]:Number.isFinite(r)?[p,g,r]:[p,g]}},{key:"projectPosition",value:function(e){var t=v(this.projectFlat(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.pixelsPerMeter[2]]}},{key:"unprojectPosition",value:function(e){var t=v(this.unprojectFlat(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.metersPerPixel[2]]}},{key:"projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return es(e,t);var n=this.distanceScales.pixelsPerMeter;return[e[0]*n[0],e[1]*n[1]]}},{key:"unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return ts(e,t);var n=this.distanceScales.metersPerPixel;return[e[0]*n[0],e[1]*n[1]]}},{key:"getDistanceScales",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?is({longitude:e[0],latitude:e[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.modelMatrix,n=void 0===t?null:t,i=this.viewProjectionMatrix,r=this.pixelProjectionMatrix,a=this.pixelUnprojectionMatrix;n&&(i=ya([],this.viewProjectionMatrix,n),a=ma([],r=ya([],this.pixelProjectionMatrix,n)));var o=Object.assign({modelViewProjectionMatrix:i,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:r,pixelUnprojectionMatrix:a,width:this.width,height:this.height,scale:this.scale});return o}},{key:"containsPixel",value:function(e){var t=e.x,n=e.y,i=e.width,r=void 0===i?1:i,a=e.height,o=void 0===a?1:a;return t<this.x+this.width&&this.x<t+r&&n<this.y+this.height&&this.y<n+o}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_addMetersToLngLat",value:function(e,t){var n=v(e,3),i=n[0],r=n[1],a=n[2],o=void 0===a?0:a,s=v(this._metersToLngLatDelta(t),3),u=s[0],l=s[1],c=s[2],f=void 0===c?0:c;return 2===e.length?[i+u,r+l]:[i+u,r+l,o+f]}},{key:"_metersToLngLatDelta",value:function(e){var t=v(e,3),n=t[0],i=t[1],r=t[2],a=void 0===r?0:r;Xa(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(a),"Illegal argument to Viewport");var o=this.distanceScales,s=o.pixelsPerMeter,u=o.degreesPerPixel,l=n*s[0]*u[0],c=i*s[1]*u[1];return 2===e.length?[l,c]:[l,c,a]}},{key:"_createProjectionMatrix",value:function(e){var t=e.orthographic,n=e.fovyRadians,i=e.aspect,r=e.focalDistance,a=e.near,o=e.far;return Xa(Number.isFinite(n)),t?(new Ta).orthographic({fovy:n,aspect:i,focalDistance:r,near:a,far:o}):(new Ta).perspective({fovy:n,aspect:i,near:a,far:o})}},{key:"_initViewMatrix",value:function(e){var t=e.viewMatrix,n=void 0===t?Du:t,i=e.longitude,r=void 0===i?null:i,a=e.latitude,o=void 0===a?null:a,s=e.zoom,u=void 0===s?null:s,l=e.position,c=void 0===l?null:l,f=e.modelMatrix,h=void 0===f?null:f,d=e.focalDistance,p=void 0===d?1:d,v=e.distanceScales,g=void 0===v?null:v;this.isGeospatial=Number.isFinite(o)&&Number.isFinite(r),this.zoom=u,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?ns({latitude:o})+Math.log2(p):0);var m=Math.pow(2,this.zoom);this.scale=m,this.distanceScales=this.isGeospatial?is({latitude:o,longitude:r,scale:this.scale}):g||{pixelsPerMeter:[m,m,m],metersPerPixel:[1/m,1/m,1/m]},this.focalDistance=p,this.distanceScales.metersPerPixel=new yi(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new yi(this.distanceScales.pixelsPerMeter),this.position=Bu,this.meterOffset=Bu,c&&(this.position=c,this.modelMatrix=h,this.meterOffset=h?h.transformVector(c):c),this.isGeospatial?(this.longitude=r,this.latitude=o,this.center=this._getCenterInWorld({longitude:r,latitude:o}),this.viewMatrixUncentered=_a([],n,[1,-1,1])):(this.center=c?this.projectPosition(c):[0,0,0],this.viewMatrixUncentered=n),this.viewMatrix=(new Ta).multiplyRight(this.viewMatrixUncentered).translate(new yi(this.center||Bu).negate())}},{key:"_getCenterInWorld",value:function(e){var t=e.longitude,n=e.latitude,i=this.meterOffset,r=this.scale,a=this.distanceScales,o=this.projectFlat([t,n],r),s=new yi(o[0],o[1],0);if(i){var u=new yi(i).scale(a.pixelsPerMeter);s.add(u)}return s}},{key:"_initProjectionMatrix",value:function(e){var t=e.projectionMatrix,n=void 0===t?null:t,i=e.orthographic,r=void 0!==i&&i,a=e.fovyRadians,o=e.fovyDegrees,s=e.fovy,u=e.near,l=void 0===u?.1:u,c=e.far,f=void 0===c?1e3:c,h=e.focalDistance,d=void 0===h?1:h,p=e.orthographicFocalDistance,v=a||(o||s||75)*Nu;this.projectionMatrix=n||this._createProjectionMatrix({orthographic:r,fovyRadians:v,aspect:this.width/this.height,focalDistance:p||d,near:l,far:f})}},{key:"_initPixelMatrices",value:function(){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ya(e,e,this.projectionMatrix),ya(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=ma([],this.viewMatrix)||this.viewMatrix;var t,n,i,r=(t={viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse},n=t.viewMatrix,{eye:[(i=t.viewMatrixInverse)[12],i[13],i[14]],direction:[n[2],n[6],n[10]],up:[n[1],n[5],n[9]]}),a=r.eye,o=r.direction,s=r.up;this.cameraPosition=a,this.cameraDirection=o,this.cameraUp=s;var u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];_a(u,u,[this.width/2,-this.height/2,1]),ba(u,u,[1,-1,0]),ya(l,u,this.viewProjectionMatrix),this.pixelProjectionMatrix=l,this.viewportMatrix=u,this.pixelUnprojectionMatrix=ma([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||to.warn("Pixel project matrix not invertible")()}}]),e}();zu.displayName="Viewport";var Uu=Object.seal({layerManager:null,deck:null,gl:null,time:-1,useDevicePixels:!0,stats:null,shaderCache:null,pickingFBO:null,animationProps:null,userData:{}}),Vu=function(e){return e instanceof Ls?"".concat(e):e?"invalid":"null"},Gu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.deck,r=n.stats,a=n.viewport,s=void 0===a?null:a;Object(o.a)(this,e),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},Uu,{layerManager:this,deck:i,gl:t,shaderCache:t&&new zr({gl:t,_cachePrograms:!0}),stats:r||new B({id:"deck.gl"}),viewport:s||new zu({id:"DEFAULT-INITIAL-VIEWPORT"})}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),ko(this._initSeer),xo(this._editSeer)}return Object(s.a)(e,[{key:"finalize",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.layers[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;this._finalizeLayer(a)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}vr.a.removeListener(this._initSeer),vr.a.removeListener(this._editSeer)}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._checkIfNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerIds,n=void 0===t?null:t;return n?this.layers.filter(function(e){return n.find(function(t){return 0===e.id.indexOf(t)})}):this.layers}},{key:"setProps",value:function(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"useDevicePixels"in e&&(this.context.useDevicePixels=e.useDevicePixels),"layers"in e&&this.setLayers(e.layers)}},{key:"setLayers",value:function(e){if(e===this.lastRenderedLayers)return to.log(3,"Ignoring layer update due to layer array not changed")(),this;this.lastRenderedLayers=e,e=Qa(e,{filter:Boolean});var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.context=this.context}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var o=this._updateLayers({oldLayers:this.layers,newLayers:e}),s=o.error,u=o.generatedLayers;if(this.layers=u,s)throw s;return this}},{key:"updateLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"time"in e&&(this.context.time=e.time);var t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(Object(_.a)(this.lastRenderedLayers)))}},{key:"_checkIfNeedsRedraw",value:function(e){var t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var n=!0,i=!1,r=void 0;try{for(var a,o=this.layers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value.getNeedsRedraw(e);t=t||s}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"activateViewport",value:function(e){var t=this.context.viewport;if(!t||!e.equals(t)){to.log(4,"Viewport changed",e)(),this.context.viewport=e;var n=!0,i=!1,r=void 0;try{for(var a,o=this.layers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}return Xa(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_updateLayers",value:function(e){var t=e.oldLayers,n=e.newLayers,i={},r=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;i[l.id]?to.warn("Multiple old layers with same id ".concat(Vu(l)))():i[l.id]=l}}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}var c=[],f=this._updateSublayersRecursively({newLayers:n,oldLayerMap:i,generatedLayers:c}),h=this._finalizeOldLayers(i);return this._needsUpdate=!1,{error:f||h,generatedLayers:c}}},{key:"_updateSublayersRecursively",value:function(e){var t=e.newLayers,n=e.oldLayerMap,i=e.generatedLayers,r=null,a=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;c.context=this.context;var f=n[c.id];null===f&&to.warn("Multiple new layers with same id ".concat(Vu(c)))(),n[c.id]=null;var h=null;try{if(this._debug&&f!==c&&c.validateProps(),f){this._transferLayerState(f,c);var d=this._updateLayer(c);r=r||d,Oo(c)}else{var p=this._initializeLayer(c);r=r||p,Po(c)}i.push(c),h=c.isComposite&&c.getSubLayers()}catch(p){to.warn("error during matching of ".concat(Vu(c)),p)(),r=r||p}if(h){var v=this._updateSublayersRecursively({newLayers:h,oldLayerMap:n,generatedLayers:i});r=r||v}}}catch(p){o=!0,s=p}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return r}},{key:"_finalizeOldLayers",value:function(e){var t=null;for(var n in e){var i=e[n];i&&(t=t||this._finalizeLayer(i))}return t}},{key:"_initializeLayer",value:function(e){to.log(2,"initializing ".concat(Vu(e)))();var t=null;try{e._initialize(),e.lifecycle=hs.INITIALIZED}catch(n){to.warn("error while initializing ".concat(Vu(e),"\n"),n)(),t=t||n}e.internalState.layer=e;var n=!0,i=!1,r=void 0;try{for(var a,o=e.getModels()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.userData.layer=e}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"_transferLayerState",value:function(e,t){t._transferState(e),t.lifecycle=hs.MATCHED,t!==e?(to.log(4,"matched ".concat(Vu(t)),e,"->",t)(),e.lifecycle=hs.AWAITING_GC):to.log(4,"Matching layer is unchanged ".concat(t.id))()}},{key:"_updateLayer",value:function(e){to.log(4,"updating ".concat(e," because: ").concat(e.printChangeFlags()))();var t=null;try{e._update()}catch(n){to.warn("error during update of ".concat(Vu(e)),n)(),t=n}return t}},{key:"_finalizeLayer",value:function(e){Xa(e.lifecycle!==hs.AWAITING_FINALIZATION),e.lifecycle=hs.AWAITING_FINALIZATION;var t=null;this.setNeedsRedraw("finalized ".concat(Vu(e)));try{e._finalize()}catch(n){to.warn("error during finalization of ".concat(Vu(e)),n)(),t=n}return e.lifecycle=hs.FINALIZED,to.log(2,"finalizing ".concat(Vu(e)))(),t}},{key:"_initSeer",value:function(){this.layers.forEach(function(e){Po(e),Oo(e)})}},{key:"_editSeer",value:function(e){var t,n,i;"edit"===e.type&&"props"===e.valuePath[0]&&(t=e.itemKey,n=e.valuePath.slice(1),i=e.value,vr.a.isReady()&&(_o.has(t)||_o.set(t,new Map),_o.get(t).set(n,i)),this.updateLayers())}}]),e}();function Wu(e,t){return e===t||Object.keys(e).every(function(n){return Array.isArray(e[n])&&Array.isArray(t[n])?Wu(e[n],t[n]):e[n]===t[n]})}var Hu=/([0-9]+\.?[0-9]*)(%|px)/;function Xu(e){switch(Object(u.a)(e)){case"number":return{position:e,relative:!1};case"string":var t=e.match(Hu);if(t&&t.length>=3){var n="%"===t[2],i=parseFloat(t[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(e))}}function qu(e,t){return e.relative?Math.round(e.position*t):e.position}var Yu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e);var n=t.id,i=void 0===n?null:n,r=t.x,a=void 0===r?0:r,s=t.y,u=void 0===s?0:s,l=t.width,c=void 0===l?"100%":l,f=t.height,h=void 0===f?"100%":f,d=t.projectionMatrix,p=void 0===d?null:d,v=t.fovy,g=void 0===v?50:v,m=t.near,y=void 0===m?.1:m,b=t.far,_=void 0===b?1e3:b,w=t.modelMatrix,x=void 0===w?null:w,k=t.viewportInstance,P=void 0===k?null:k,O=t.type,E=void 0===O?zu:O;Xa(!P||P instanceof zu),this.viewportInstance=P,this.id=i||this.constructor.displayName||"view",this.type=E,this.props=Object.assign({},t,{id:this.id,projectionMatrix:p,fovy:g,near:y,far:_,modelMatrix:x}),this._parseDimensions({x:a,y:u,width:c,height:h}),this.equals=this.equals.bind(this),Object.seal(this)}return Object(s.a)(e,[{key:"equals",value:function(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):Wu(this.props,e.props))}},{key:"makeViewport",value:function(e){var t=e.width,n=e.height,i=e.viewState;if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);var r=this.getDimensions({width:t,height:n}),a=Object.assign({viewState:i},i,this.props,r);return this._getViewport(a)}},{key:"getViewStateId",value:function(){switch(Object(u.a)(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(e){if(this.props.viewState&&"object"===Object(u.a)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var t=Object.assign({},e);for(var n in this.props.viewState)"id"!==n&&(t[n]=this.props.viewState[n]);return t}return e}},{key:"getDimensions",value:function(e){var t=e.width,n=e.height;return{x:qu(this._x,t),y:qu(this._y,n),width:qu(this._width,t),height:qu(this._height,n)}}},{key:"_getControllerProps",value:function(e){var t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),Object.assign({},e,t)):null}},{key:"_getViewport",value:function(e){return new(0,this.type)(e)}},{key:"_parseDimensions",value:function(e){var t=e.x,n=e.y,i=e.width,r=e.height;this._x=Xu(t),this._y=Xu(n),this._width=Xu(i),this._height=Xu(r)}}]),e}(),Zu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractiveStateChange:t.onInteractiveStateChange},Object.seal(this),this.setProps(t)}return Object(s.a)(e,[{key:"finalize",value:function(){for(var e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}},{key:"updateViewStates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("time"in e)for(var t in this.controllers){var n=this.controllers[t];n&&n.updateTransition(e.time)}}},{key:"getViewports",value:function(e){return e?this._viewports.filter(function(t){return t.containsPixel(e)}):this._viewports}},{key:"getViews",value:function(){var e={};return this.views.forEach(function(t){e[t.id]=t}),e}},{key:"getView",value:function(e){return"string"==typeof e?this.views.find(function(t){return t.id===e}):e}},{key:"getViewState",value:function(e){var t=this.getView(e),n=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(n):n}},{key:"getViewport",value:function(e){return this._viewportMap[e]}},{key:"project",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{topLeft:!0},n=this.getViewports(),i=n.length-1;i>=0;--i){var r=n[i];if(r.contains(e,t))return r.project(e,t)}return null}},{key:"unproject",value:function(e,t){for(var n=this.getViewports(),i=n.length-1;i>=0;--i){var r=n[i];if(r.containsPixel(e,t))return r.unproject(e)}return null}},{key:"setProps",value:function(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(e,t){Xa(Number.isFinite(e)&&Number.isFinite(t)),e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(e){e=Qa(e,{filter:Boolean}).map(function(e){return e instanceof zu?new Yu({viewportInstance:e}):e}),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}},{key:"_setViewState",value:function(e){e?(!Wu(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):to.warn("setting null viewState")()}},{key:"_onViewStateChange",value:function(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange(t)}},{key:"_createController",value:function(e){return new(0,e.type)(Object.assign({eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},e))}},{key:"_updateController",value:function(e,t,n,i){if(e.controller){var r=Object.assign({},e.controller,t,{id:e.id,x:n.x,y:n.y,width:n.width,height:n.height});return i?i.setProps(r):i=this._createController(r),i}return null}},{key:"_rebuildViewports",value:function(){var e=this.width,t=this.height,n=this.views,i=this.controllers;this._viewports=[],this.controllers={};for(var r=n.length;r--;){var a=n[r],o=this.getViewState(a),s=a.makeViewport({width:e,height:t,viewState:o});this.controllers[a.id]=this._updateController(a,o,s,i[a.id]),this._viewports.unshift(s)}for(var u in i)i[u]&&!this.controllers[u]&&i[u].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var e=this;this._viewportMap={},this._viewports.forEach(function(t){t.id&&(e._viewportMap[t.id]=e._viewportMap[t.id]||t)})}},{key:"_diffViews",value:function(e,t){return e.length!==t.length||e.some(function(n,i){return!e[i].equals(t[i])})}}]),e}(),Qu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ku=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,i=t.height,r=t.viewMatrix,a=void 0===r?Qu:r,s=t.projectionMatrix,u=void 0===s?Qu:s;Object(o.a)(this,e),this.width=n||1,this.height=i||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=a,this.projectionMatrix=u;var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ya(l,l,this.projectionMatrix),ya(l,l,this.viewMatrix),this.viewProjectionMatrix=l;var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];_a(c,c,[this.width/2,-this.height/2,1]),ba(c,c,[1,-1,0]),ya(c,c,this.viewProjectionMatrix);var f=ma([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c);if(!f)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=c,this.pixelUnprojectionMatrix=f,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(s.a)(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&Pa(t.projectionMatrix,this.projectionMatrix)&&Pa(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,i=void 0===n||n,r=this.projectPosition(e),a=ss(r,this.pixelProjectionMatrix),o=v(a,2),s=o[0],u=o[1],l=i?u:this.height-u;return 2===e.length?[s,l]:[s,l,a[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,i=void 0===n||n,r=t.targetZ,a=v(e,3),o=a[0],s=a[1],u=a[2],l=i?s:this.height-s,c=r&&r*this.pixelsPerMeter,f=us([o,l,u],this.pixelUnprojectionMatrix,c),h=this.unprojectPosition(f),d=v(h,3),p=d[0],g=d[1],m=d[2];return Number.isFinite(u)?[p,g,m]:Number.isFinite(r)?[p,g,r]:[p,g]}},{key:"projectPosition",value:function(e){var t=v(this.projectFlat(e),2);return[t[0],t[1],(e[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function(e){var t=v(this.unprojectFlat(e),2);return[t[0],t[1],(e[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}},{key:"unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}}]),e}(),$u=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.width,r=n.height,a=n.latitude,s=void 0===a?0:a,u=n.longitude,h=void 0===u?0:u,d=n.zoom,p=void 0===d?0:d,v=n.pitch,g=void 0===v?0:v,m=n.bearing,y=void 0===m?0:m,b=n.altitude,_=void 0===b?1.5:b,w=n.nearZMultiplier,x=n.farZMultiplier;Object(o.a)(this,t),i=i||1,r=r||1;var k=Jo(p);_=Math.max(.75,_);var P=es([h,s],k);P[2]=0;var O=function(e){var t=e.width,n=e.height,i=e.pitch,r=os({width:t,height:n,altitude:e.altitude,pitch:i,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier});return ka([],r.fov,r.aspect,r.near,r.far)}({width:i,height:r,pitch:g,bearing:y,altitude:_,nearZMultiplier:w||1/r,farZMultiplier:x||1.01}),E=as({height:r,center:P,pitch:g,bearing:y,altitude:_,flipY:!0});return(e=c(this,f(t).call(this,{width:i,height:r,viewMatrix:E,projectionMatrix:O}))).latitude=s,e.longitude=h,e.zoom=p,e.pitch=g,e.bearing=y,e.altitude=_,e.scale=k,e.center=P,e.pixelsPerMeter=is(l(l(e))).pixelsPerMeter[2],Object.freeze(l(l(e))),e}return d(t,Ku),Object(s.a)(t,[{key:"projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return es(e,t)}},{key:"unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return ts(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=us(e.pos,this.pixelUnprojectionMatrix),i=da([],es(t,this.scale),pa([],n));return ts(da([],this.center,i),this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.width,r=this.height,a=Ju(Object.assign({width:i,height:r,bounds:e},n)),o=a.longitude,s=a.latitude,u=a.zoom;return new t({width:i,height:r,longitude:o,latitude:s,zoom:u})}}]),t}();function Ju(e){var t=e.width,n=e.height,i=e.bounds,r=e.padding,a=void 0===r?0:r,o=e.offset,s=void 0===o?[0,0]:o,u=v(i,2),l=v(u[0],2),c=l[0],f=l[1],h=v(u[1],2),d=h[0],p=h[1];if(Number.isFinite(a)){a={top:a,bottom:a,left:a,right:a}}else Ho(Number.isFinite(a.top)&&Number.isFinite(a.bottom)&&Number.isFinite(a.left)&&Number.isFinite(a.right));var g=new $u({width:t,height:n,longitude:0,latitude:0,zoom:0}),m=g.project([c,p]),y=g.project([d,f]),b=[Math.abs(y[0]-m[0]),Math.abs(y[1]-m[1])],_=[t-a.left-a.right-2*Math.abs(s[0]),n-a.top-a.bottom-2*Math.abs(s[1])];Ho(_[0]>0&&_[1]>0);var w=_[0]/b[0],x=_[1]/b[1],k=(a.right-a.left)/2/w,P=(a.bottom-a.top)/2/x,O=[(y[0]+m[0])/2+k,(y[1]+m[1])/2+P],E=g.unproject(O),T=g.zoom+Math.log2(Math.abs(Math.min(w,x)));return{longitude:E[0],latitude:E[1],zoom:T}}var el=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,t);var i=n.latitude,r=void 0===i?0:i,a=n.longitude,s=void 0===a?0:a,u=n.zoom,h=void 0===u?11:u,d=n.pitch,p=void 0===d?0:d,v=n.bearing,g=void 0===v?0:v,m=n.nearZMultiplier,y=void 0===m?.1:m,b=n.farZMultiplier,_=void 0===b?10:b,w=n.orthographic,x=void 0!==w&&w,k=n.width,P=n.height,O=n.altitude,E=void 0===O?1.5:O,T=os({width:k=k||1,height:P=P||1,pitch:p,altitude:E=Math.max(.75,E),nearZMultiplier:y,farZMultiplier:_}),S=T.fov,j=T.aspect,C=T.focalDistance,A=T.near,L=T.far,M=as({height:P,pitch:p,bearing:g,altitude:E}),F=Object.assign({},n,{width:k,height:P,viewMatrix:M,longitude:s,latitude:r,zoom:h,orthographic:x,fovyRadians:S,aspect:j,orthographicFocalDistance:C,near:A,far:L});return(e=c(this,f(t).call(this,F))).latitude=r,e.longitude=s,e.zoom=h,e.pitch=p,e.bearing=g,e.altitude=E,e.orthographic=x,e.metersToLngLatDelta=e.metersToLngLatDelta.bind(l(l(e))),e.lngLatDeltaToMeters=e.lngLatDeltaToMeters.bind(l(l(e))),e.addMetersToLngLat=e.addMetersToLngLat.bind(l(l(e))),Object.freeze(l(l(e))),e}return d(t,zu),Object(s.a)(t,[{key:"metersToLngLatDelta",value:function(e){var t=v(e,3),n=t[0],i=t[1],r=t[2],a=void 0===r?0:r;Xa(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(a),"Illegal argument to WebMercatorViewport");var o=this.distanceScales,s=o.pixelsPerMeter,u=o.degreesPerPixel,l=n*s[0]*u[0],c=i*s[1]*u[1];return 2===e.length?[l,c]:[l,c,a]}},{key:"lngLatDeltaToMeters",value:function(e){var t=v(e,3),n=t[0],i=t[1],r=t[2],a=void 0===r?0:r;Xa(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(a),"Illegal argument to WebMercatorViewport");var o=this.distanceScales,s=o.pixelsPerDegree,u=o.metersPerPixel,l=n*s[0]*u[0],c=i*s[1]*u[1];return 2===e.length?[l,c]:[l,c,a]}},{key:"addMetersToLngLat",value:function(e,t){return rs(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=us(e.pos,this.pixelUnprojectionMatrix),i=da([],this.projectFlat(t),pa([],n)),r=da([],this.center,i);return this.unprojectFlat(r)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.width,r=this.height,a=Ju(Object.assign({width:i,height:r,bounds:e},n)),o=a.longitude,s=a.latitude,u=a.zoom;return new t({width:i,height:r,longitude:o,latitude:s,zoom:u})}}]),t}();el.displayName="WebMercatorViewport";var tl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),Array.isArray(t)&&(t={compare:t,extract:t,required:t});var n=t,i=n.compare,r=n.extract,a=n.required;this._propsToCompare=i,this._propsToExtract=r,this._requiredProps=a}return Object(s.a)(e,[{key:"arePropsEqual",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var a,o=(this._propsToCompare||Object.keys(t))[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!ai(e[s],t[s]))return!1}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return!0}},{key:"initializeProps",value:function(e,t){var n;if(this._propsToExtract){var i={},r={},a=!0,o=!1,s=void 0;try{for(var u,l=this._propsToExtract[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;i[c]=e[c],r[c]=t[c]}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}n={start:i,end:r}}else n={start:e,end:t};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:"interpolateProps",value:function(e,t,n){Xa(!1,"interpolateProps is not implemented")}},{key:"_checkRequiredProps",value:function(e){this._requiredProps&&this._requiredProps.forEach(function(t){var n=e[t];Xa(Number.isFinite(n)||Array.isArray(n),"".concat(t," is required for transition"))})}}]),e}(),nl=["longitude","latitude","zoom","bearing","pitch"],il=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nl;return Object(o.a)(this,t),c(this,f(t).call(this,e))}return d(t,tl),Object(s.a)(t,[{key:"interpolateProps",value:function(e,t,n){var i={};for(var r in t)i[r]=ri(e[r],t[r],n);return i}}]),t}(),rl=function(){},al=1,ol=2,sl=3,ul={transitionDuration:0,transitionEasing:function(e){return e},transitionInterpolator:new il,transitionInterruption:al,onTransitionStart:rl,onTransitionInterrupt:rl,onTransitionEnd:rl},ll=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e),Xa(t),this.ControllerState=t,this.props=Object.assign({},ul,n),this.propsInTransition=null,this.time=0,this.transition=new ho,this.onViewStateChange=n.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Object(s.a)(e,[{key:"finalize",value:function(){}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(e){var t=!1,n=this.props;if(e=Object.assign({},ul,e),this.props=e,this._shouldIgnoreViewportChange(n,e))return t;if(this._isTransitionEnabled(e)){var i=Object.assign({},n,this.transition.interruption===ol?this.transition.endProps:this.propsInTransition||n);this._triggerTransition(i,e),t=!0}else this.transition.cancel();return t}},{key:"updateTransition",value:function(e){this.time=e,this._updateTransition()}},{key:"_isTransitionEnabled",value:function(e){return e.transitionDuration>0&&e.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.transition.inProgress&&this.transition.interpolator.arePropsEqual(e,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return this.transition.inProgress?this.transition.interruption===sl||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}},{key:"_triggerTransition",value:function(e,t){Xa(this._isTransitionEnabled(t),"Transition is not enabled");var n=new this.ControllerState(e),i=new this.ControllerState(t).shortestPathFrom(n),r=t.transitionInterpolator.initializeProps(e,i);this.propsInTransition={},this.transition.start({duration:t.transitionDuration,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:r.start,endProps:r.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this._updateTransition()}},{key:"_updateTransition",value:function(){this.transition.update(this.time)}},{key:"_onTransitionEnd",value:function(e){var t=this;return function(n){t.propsInTransition=null,e(n)}}},{key:"_onTransitionUpdate",value:function(e){var t=e.interpolator,n=e.startProps,i=e.endProps,r=e.time,a=t.interpolateProps(n,i,r);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,a)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0}})}}]),e}();ll.defaultProps=ul;var cl={transitionDuration:0},fl=["wheel"],hl=["panstart","panmove","panend"],dl=["pinchstart","pinchmove","pinchend"],pl=["doubletap"],vl=["keydown"],gl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e),Xa(t),this.ControllerState=t,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new ll(t,n),this._events=null,this._state={isDragging:!1},this.events=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}return Object(s.a)(e,[{key:"finalize",value:function(){for(var e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(e){var t=this.ControllerState;switch(this.controllerState=new t(Object.assign({},this.controllerStateProps,this._state)),e.type){case"panstart":return this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var t=this.controllerStateProps,n=t.x,i=t.y,r=e.offsetCenter;return[r.x-n,r.y-i]}},{key:"isPointInBounds",value:function(e,t){var n=this.controllerStateProps,i=n.width,r=n.height;if(t&&t.handled)return!1;var a=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return a&&t&&t.stopPropagation(),a}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setProps",value:function(e){"onViewportChange"in e&&to.removed("onViewportChange")(),"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this.events,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var t=e.scrollZoom,n=void 0===t||t,i=e.dragPan,r=void 0===i||i,a=e.dragRotate,o=void 0===a||a,s=e.doubleClickZoom,u=void 0===s||s,l=e.touchZoom,c=void 0===l||l,f=e.touchRotate,h=void 0!==f&&f,d=e.keyboard,p=void 0===d||d,v=Boolean(this.onViewStateChange);this.toggleEvents(fl,v&&n),this.toggleEvents(hl,v&&(r||o)),this.toggleEvents(dl,v&&(c||h)),this.toggleEvents(pl,v&&u),this.toggleEvents(vl,v&&p),this.scrollZoom=n,this.dragPan=r,this.dragRotate=o,this.doubleClickZoom=u,this.touchZoom=c,this.touchRotate=h,this.keyboard=p}},{key:"updateTransition",value:function(e){this.transitionManager.updateTransition(e)}},{key:"toggleEvents",value:function(e,t){var n=this;this.eventManager&&e.forEach(function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))})}},{key:"setOptions",value:function(e){return this.setProps(e)}},{key:"updateViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.assign({},e.getViewportProps(),t),r=this.controllerState!==e;if(r){var a=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:n,oldViewState:a})}Object.assign(this._state,Object.assign({},e.getInteractiveState(),n)),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.controllerState.panStart({pos:t}).rotateStart({pos:t});return this.updateViewport(n,cl,{isDragging:!0})}},{key:"_onPan",value:function(e){var t=this.isFunctionKeyPressed(e)||e.rightButton;return(t=this.invertPan?!t:t)?this._onPanMove(e):this._onPanRotate(e)}},{key:"_onPanEnd",value:function(e){var t=this.controllerState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1})}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e);if(!this.isDragging())return!1;var n=this.controllerState.pan({pos:t});return this.updateViewport(n,cl,{isDragging:!0})}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,n=e.deltaY,i=this.controllerState.getViewportProps(),r=t/i.width,a=n/i.height,o=this.controllerState.rotate({deltaScaleX:r,deltaScaleY:a});return this.updateViewport(o,cl,{isDragging:!0})}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;e.preventDefault();var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=e.delta,i=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==i&&(i=1/i);var r=this.controllerState.zoom({pos:t,scale:i});return this.updateViewport(r,cl)}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._state.startPinchRotation=e.rotation,this.updateViewport(n,cl,{isDragging:!0})}},{key:"_onPinch",value:function(e){if(!this.touchZoom&&!this.touchRotate)return!1;var t=this.controllerState;if(this.touchZoom){var n=e.scale,i=this.getCenter(e);t=t.zoom({pos:i,scale:n})}if(this.touchRotate){var r=e.rotation,a=this._state.startPinchRotation;t=t.rotate({deltaScaleX:-(r-a)/180})}return this.updateViewport(t,cl,{isDragging:!0})}},{key:"_onPinchEnd",value:function(e){var t=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps())}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var t,n=this.isFunctionKeyPressed(e),i=this.controllerState;switch(e.srcEvent.keyCode){case 189:t=n?i.zoomOut().zoomOut():i.zoomOut();break;case 187:t=n?i.zoomIn().zoomIn():i.zoomIn();break;case 37:t=n?i.rotateLeft():i.moveLeft();break;case 39:t=n?i.rotateRight():i.moveRight();break;case 38:t=n?i.rotateUp():i.moveUp();break;case 40:t=n?i.rotateDown():i.moveDown();break;default:return!1}return this.updateViewport(t,this._getTransitionProps())}},{key:"_getTransitionProps",value:function(){return cl}}]),e}(),ml=6371e3,yl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.phi,i=t.theta,r=t.radius,a=t.bearing,s=t.pitch,u=(t.altitude,t.radiusScale),l=void 0===u?ml:u;Object(o.a)(this,e),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(n)||Number.isFinite(i)?(this.phi=n||0,this.theta=i||0):(Number.isFinite(a)||Number.isFinite(s))&&(this.bearing=a||0,this.pitch=s||0),this.radius=r||1,this.radiusScale=l||1,this.check()}return Object(s.a)(e,[{key:"toString",value:function(){return this.formatString(Zn)}},{key:"formatString",value:function(e){var t=e.printTypes,n=(e.printDegrees,$n);return"".concat(t?"Spherical":"","[rho:").concat(n(this.radius),",theta:").concat(n(this.theta),",phi:").concat(n(this.phi),"]")}},{key:"equals",value:function(e){return ai(this.radius,e.radius)&&ai(this.theta,e.theta)&&ai(this.phi,e.phi)}},{key:"exactEquals",value:function(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}},{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}},{key:"fromLngLatZ",value:function(e){var t=v(e,3),n=t[0],i=t[1],r=t[2];this.radius=1+r/this.radiusScale,this.phi=ti(i),this.theta=ti(n)}},{key:"fromVector3",value:function(e){return this.radius=fi(e),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(ii(e[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new yi(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-ni(this.phi)},set:function(e){this.phi=Math.PI-ti(e)}},{key:"pitch",get:function(){return ni(this.theta)},set:function(e){this.theta=ti(e)}},{key:"longitude",get:function(){return ni(this.phi)}},{key:"latitude",get:function(){return ni(this.theta)}},{key:"lng",get:function(){return ni(this.phi)}},{key:"lat",get:function(){return ni(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),e}(),bl={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},_l=function(){function e(t){Object(o.a)(this,e);var n=t.width,i=t.height,r=t.position,a=void 0===r?bl.position:r;Xa(Number.isFinite(n),"`width` must be supplied"),Xa(Number.isFinite(i),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},t,{position:new yi(a)}))}return Object(s.a)(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getDirection",value:function(){return new yl({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function(e){return new yl({bearing:e,pitch:90}).toVector3().normalize()}},{key:"shortestPathFrom",value:function(e){return this._viewportProps}},{key:"_applyConstraints",value:function(e){return e}}]),e}(),wl=85.05113,xl=-85.05113;var kl={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new il,transitionInterruption:al},Pl={transitionDuration:0},Ol={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},El={pitch:0,bearing:0,altitude:1.5},Tl=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.width,r=n.height,a=n.latitude,s=n.longitude,u=n.zoom,l=n.bearing,h=void 0===l?El.bearing:l,d=n.pitch,p=void 0===d?El.pitch:d,v=n.altitude,g=void 0===v?El.altitude:v,m=n.maxZoom,y=void 0===m?Ol.maxZoom:m,b=n.minZoom,_=void 0===b?Ol.minZoom:b,w=n.maxPitch,x=void 0===w?Ol.maxPitch:w,k=n.minPitch,P=void 0===k?Ol.minPitch:k,O=n.startPanLngLat,E=n.startZoomLngLat,T=n.startBearing,S=n.startPitch,j=n.startZoom;return Object(o.a)(this,t),Xa(Number.isFinite(s),"`longitude` must be supplied"),Xa(Number.isFinite(a),"`latitude` must be supplied"),Xa(Number.isFinite(u),"`zoom` must be supplied"),(e=c(this,f(t).call(this,{width:i,height:r,latitude:a,longitude:s,zoom:u,bearing:h,pitch:p,altitude:g,maxZoom:y,minZoom:_,maxPitch:x,minPitch:P})))._interactiveState={startPanLngLat:O,startZoomLngLat:E,startBearing:T,startPitch:S,startZoom:j},e}return d(t,_l),Object(s.a)(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,i=this._interactiveState.startPanLngLat||this._unproject(n);if(!i)return this;var r=v(this._calculateNewLngLat({startPanLngLat:i,pos:t}),2),a=r[0],o=r[1];return this._getUpdatedState({longitude:a,latitude:o})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=void 0===t?0:t,i=e.deltaScaleY,r=void 0===i?0:i,a=this._interactiveState,o=a.startBearing,s=a.startPitch;if(!Number.isFinite(o)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:r,startBearing:o,startPitch:s}),l=u.pitch,c=u.bearing;return this._getUpdatedState({bearing:c,pitch:l})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,i=e.scale;Xa(i>0,"`scale` must be a positive number");var r=this._interactiveState,a=r.startZoom,o=r.startZoomLngLat;Number.isFinite(a)||(a=this._viewportProps.zoom,o=this._unproject(n)||this._unproject(t)),Xa(o,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var s=this._calculateNewZoom({scale:i,startZoom:a}),u=v(new $u(Object.assign({},this._viewportProps,{zoom:s})).getLocationAtPoint({lngLat:o,pos:t}),2),l=u[0],c=u[1];return this._getUpdatedState({zoom:s,longitude:l,latitude:c})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function(e){var t=e.getViewportProps(),n=Object.assign({},this._viewportProps),i=n.bearing,r=n.longitude;return Math.abs(i-t.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(r-t.longitude)>180&&(n.longitude=r<0?r+360:r-360),n}},{key:"_zoomFromCenter",value:function(e){var t=this._viewportProps,n=t.width,i=t.height;return this.zoom({pos:[n/2,i/2],scale:e})}},{key:"_panFromCenter",value:function(e){var t=this._viewportProps,n=t.width,i=t.height;return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}},{key:"_getUpdatedState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,i=e.zoom;e.zoom=ii(i,n,t);var r=e.maxPitch,a=e.minPitch,o=e.pitch;return e.pitch=ii(o,a,r),Object.assign(e,function(e){var t=e.width,n=e.height,i=e.longitude,r=e.latitude,a=e.zoom,o=e.pitch,s=void 0===o?0:o,u=e.bearing,l=void 0===u?0:u;(i<-180||i>180)&&(i=Wo(i+180,360)-180),(l<-180||l>180)&&(l=Wo(l+180,360)-180);var c=new $u({width:t,height:n,longitude:i,latitude:r,zoom:a}),f=c.project([i,wl])[1],h=c.project([i,xl])[1],d=0;return h-f<n&&(a+=Math.log2(n/(h-f)),f=(c=new $u({width:t,height:n,longitude:i,latitude:r,zoom:a})).project([i,wl])[1],h=c.project([i,xl])[1]),f>0?d=f:h<n&&(d=h-n),d&&(r=c.unproject([t/2,n/2+d])[1]),{width:t,height:n,longitude:i,latitude:r,zoom:a,pitch:s,bearing:l}}(e)),e}},{key:"_unproject",value:function(e){var t=new $u(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,n=e.pos;return new $u(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,i=this._viewportProps,r=i.maxZoom,a=i.minZoom;return ii(n+Math.log2(t),a,r)}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,i=e.startBearing,r=e.startPitch;n=ii(n,-1,1);var a=this._viewportProps,o=a.minPitch,s=a.maxPitch,u=r;return n>0?u=r+n*(s-r):n<0&&(u=r-n*(o-r)),{pitch:u,bearing:i+180*t}}}]),t}(),Sl=function(e){function t(e){var n;return Object(o.a)(this,t),(n=c(this,f(t).call(this,Tl,e))).invertPan=!0,n}return d(t,gl),Object(s.a)(t,[{key:"_getTransitionProps",value:function(){return kl}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,n=e.deltaY,i=v(this.getCenter(e),2)[1],r=i-n,a=this.controllerState.getViewportProps(),o=a.width,s=a.height,u=t/o,l=0;n>0?Math.abs(s-r)>5&&(l=n/(r-s)*1.2):n<0&&r>5&&(l=1-i/r),l=Math.min(1,Math.max(-1,l));var c=this.controllerState.rotate({deltaScaleX:u,deltaScaleY:l});return this.updateViewport(c,Pl,{isDragging:!0})}}]),t}(),jl=function(e){function t(e){return Object(o.a)(this,t),c(this,f(t).call(this,Object.assign({},e,{type:el})))}return d(t,Yu),Object(s.a)(t,[{key:"controller",get:function(){return this._getControllerProps({type:Sl})}}]),t}();jl.displayName="MapView";var Cl=function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}return d(t,Oi),Object(s.a)(t,[{key:"getProjectedLight",value:function(){return this}}]),t}(),Al=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e);var n=t.id,i=void 0===n?"effect":n;this.id=i,this.props={},Object.assign(this.props,t)}return Object(s.a)(e,[{key:"prepare",value:function(){}},{key:"getParameters",value:function(){}},{key:"cleanup",value:function(){}}]),e}(),Ll={color:[255,255,255],intensity:1},Ml=[{color:[255,255,255],intensity:1,direction:[-1,-3,-1]},{color:[255,255,255],intensity:.9,direction:[1,8,-2.5]}],Fl=function(e){function t(e){var n;for(var i in Object(o.a)(this,t),(n=c(this,f(t).call(this,e))).ambientLight=null,n.directionalLights=[],n.pointLights=[],e){var r=e[i];switch(r.type){case"ambient":n.ambientLight=r;break;case"directional":n.directionalLights.push(r);break;case"point":n.pointLights.push(r)}}return n.applyDefaultLights(),n}return d(t,Al),Object(s.a)(t,[{key:"getParameters",value:function(e){var t=this.ambientLight,n=this.getProjectedPointLights(e);return{lightSources:{ambientLight:t,directionalLights:this.getProjectedDirectionalLights(e),pointLights:n}}}},{key:"applyDefaultLights",value:function(){var e=this.ambientLight,t=this.pointLights,n=this.directionalLights;e||0!==t.length||0!==n.length||(this.ambientLight=new Pi(Ll),this.directionalLights.push(new Cl(Ml[0])),this.directionalLights.push(new Cl(Ml[1])))}},{key:"getProjectedPointLights",value:function(e){for(var t=[],n=0;n<this.pointLights.length;n++){var i=this.pointLights[n];t.push(i.getProjectedLight({layer:e}))}return t}},{key:"getProjectedDirectionalLights",value:function(e){for(var t=[],n=0;n<this.directionalLights.length;n++){var i=this.directionalLights[n];t.push(i.getProjectedLight({layer:e}))}return t}}]),t}(),Il=function(){function e(){Object(o.a)(this,e),this.effects=[],this._needsRedraw="Initial render",this.defaultLightingEffect=new Fl,this.needApplyDefaultLighting=!1}return Object(s.a)(e,[{key:"setProps",value:function(e){"effects"in e&&(e.effects.length===this.effects.length&&Wu(e.effects,this.effects)||(this.setEffects(e.effects),this._needsRedraw="effects changed")),this.checkLightingEffect()}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"getEffects",value:function(){var e=this.effects;return this.needApplyDefaultLighting&&(e=this.effects.slice()).push(this.defaultLightingEffect),e}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=e}},{key:"cleanup",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.effects[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.cleanup()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.effects.length=0}},{key:"checkLightingEffect",value:function(){var e=!1,t=!0,n=!1,i=void 0;try{for(var r,a=this.effects[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){if(r.value instanceof Fl){e=!0;break}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.needApplyDefaultLighting=!e}}]),e}(),Rl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e);var i=n.id,r=void 0===i?"pass":i;this.id=r,this.gl=t,this.props={},Object.assign(this.props,n)}return Object(s.a)(e,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(){}},{key:"cleanup",value:function(){}}]),e}(),Nl=function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}return d(t,Rl),Object(s.a)(t,[{key:"render",value:function(e){var t=this;return q(this.gl,{framebuffer:e.outputBuffer},function(){return t.drawLayers(e)})}},{key:"drawLayers",value:function(e){var t=this,n=e.layers,i=e.viewports,r=e.views,a=e.onViewportActive,o=e.deviceRect,s=void 0===o?null:o,u=e.parameters,l=void 0===u?{}:u,c=e.pass,f=void 0===c?"draw":c,h=e.redrawReason,d=void 0===h?"":h,p=e.clearCanvas,v=void 0===p||p,g=e.effects,m=e.effectProps,y=this.gl;v&&this.clearCanvas(y);var b=[];return i.forEach(function(e,i){var o=t.getViewportFromDescriptor(e),u=r&&r[o.id];a(o);var c=t.drawLayersInViewport(y,{layers:n,viewport:o,view:u,deviceRect:s,parameters:l,pass:f,redrawReason:d,effects:g,effectProps:m});b.push(c)}),b}},{key:"drawLayersInViewport",value:function(e,t){var n=this,i=t.layers,r=t.viewport,a=t.view,o=(t.deviceRect,t.parameters),s=void 0===o?{}:o,u=(t.pass,t.redrawReason,t.effects),l=t.effectProps,c=this.getGLViewport(e,{viewport:r});if(a&&a.props.clear){var f=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;q(e,{scissorTest:!0,scissor:c},function(){return vt(e,f)})}var h={totalCount:i.length,visibleCount:0,compositeCount:0,pickableCount:0};return W(e,s||{}),i.forEach(function(t,i){var a=n.shouldDrawLayer(t,r);a&&t.props.pickable&&h.pickableCount++,t.isComposite&&h.compositeCount++,a&&(h.visibleCount++,n.drawLayerInViewport({gl:e,layer:t,layerIndex:i,glViewport:c,parameters:s,effects:u,effectProps:l}))}),h}},{key:"drawLayerInViewport",value:function(e){e.gl;var t=e.layer,n=e.layerIndex,i=e.glViewport,r=e.parameters,a=e.effects,o=e.effectProps,s=this.getModuleParameters(t,a,o),u=Object.assign({},t.context.uniforms,{layerIndex:n}),l=this.getLayerParameters(t,n,i,r);t.drawLayer({moduleParameters:s,uniforms:u,parameters:l})}},{key:"getViewportFromDescriptor",value:function(e){return e.viewport?e.viewport:e}},{key:"shouldDrawLayer",value:function(e,t){var n=this.props.layerFilter,i=!e.isComposite&&e.props.visible;return i&&n&&(i=n({layer:e,viewport:t,isPicking:!1})),i}},{key:"getModuleParameters",value:function(e){return Object.assign(Object.create(e.props),{viewport:e.context.viewport,pickingActive:0,devicePixelRatio:this.props.pixelRatio})}},{key:"getLayerParameters",value:function(e,t,n,i){var r=Object.assign({},e.props.parameters||{},i);return Object.assign(r,{viewport:n}),r}},{key:"getGLViewport",value:function(e,t){var n=t.viewport,i=e.canvas?e.canvas.clientHeight||e.canvas.height:100,r=n,a=this.props.pixelRatio;return[r.x*a,(i-r.y-r.height)*a,r.width*a,r.height*a]}},{key:"clearCanvas",value:function(e){var t=e.drawingBufferWidth,n=e.drawingBufferHeight;q(e,{viewport:[0,0,t,n]},function(){e.clear(16640)})}}]),t}(),Dl=function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}return d(t,Nl),Object(s.a)(t,[{key:"getModuleParameters",value:function(e,n,i){var r=p(f(t.prototype),"getModuleParameters",this).call(this,e);Object.assign(r,this.getObjectHighlightParameters(e),i);var a=!0,o=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;Object.assign(r,c.getParameters(e))}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return r}},{key:"getObjectHighlightParameters",value:function(e){var t=e.props,n=t.highlightedObjectIndex,i=t.highlightColor,r={pickingHighlightColor:[i[0],i[1],i[2],i[3]||255]};return Number.isInteger(n)&&(r.pickingSelectedColor=n>=0?e.encodePickingColor(n):null),r}}]),t}(),Bl=function(e){function t(){return Object(o.a)(this,t),c(this,f(t).apply(this,arguments))}return d(t,Nl),Object(s.a)(t,[{key:"render",value:function(e){e.pickingFBO?this.drawPickingBuffer(e):p(f(t.prototype),"render",this).call(this,e)}},{key:"drawPickingBuffer",value:function(e){var t=this,n=e.layers,i=e.viewports,r=e.onViewportActive,a=e.pickingFBO,o=e.effectProps,s=e.deviceRect,u=s.x,l=s.y,c=s.width,f=s.height,h=e.redrawReason,d=void 0===h?"":h;return q(this.gl,{framebuffer:a,scissorTest:!0,scissor:[u,l,c,f],clearColor:[0,0,0,0]},function(){t.drawLayers({layers:n,viewports:i,onViewportActive:r,pass:"picking",redrawReason:d,effectProps:o,parameters:{blend:!0,blendFunc:[1,0,32771,0],blendEquation:32774,blendColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]}})})}},{key:"shouldDrawLayer",value:function(e,t){var n=this.props.layerFilter,i=!e.isComposite&&e.props.visible&&e.props.pickable;return i&&n&&(i=n({layer:e,viewport:t,isPicking:!0})),i}},{key:"getModuleParameters",value:function(e,t,n){var i=Object.assign(Object.create(e.props),{viewport:e.context.viewport,pickingActive:1,devicePixelRatio:this.props.pixelRatio});return Object.assign(i,n),i}},{key:"getLayerParameters",value:function(e,t,n,i){var r=Object.assign({},e.props.parameters||{},i);return Object.assign(r,{viewport:n,blendColor:[0,0,0,(t+1)/255]}),r}}]),t}();function zl(e){return Xa("boolean"==typeof e,"Invalid useDevicePixels"),e&&"undefined"!=typeof window?window.devicePixelRatio:1}var Ul=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,t),n=c(this,f(t).call(this,e,i));var r=i.module,a=i.fs,s=i.id,u=i.moduleProps;return n.model=n._getModel(e,r,a,s,u),n}return d(t,Rl),Object(s.a)(t,[{key:"render",value:function(e){var t=this,n=this.gl;q(n,{framebuffer:e.outputBuffer,clearColor:[0,0,0,0]},function(){return t._renderPass(n,e)})}},{key:"delete",value:function(){this.model.delete(),this.model=null}},{key:"_getModel",value:function(e,t,n,i,r){var a=new Br(e,{id:i,fs:n,modules:[t]}),o=Object.assign(t.getUniforms(),t.getUniforms(r));return a.setUniforms(o),a}},{key:"_renderPass",value:function(e,t){var n=t.inputBuffer;t.outputBuffer;vt(e,{color:!0}),this.model.draw({uniforms:{texture:n,texSize:[n.width,n.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),t}(),Vl=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,t),(n=c(this,f(t).call(this,i))).id="".concat(e.name,"-pass"),Zr(e),n.module=e,n}return d(t,Al),Object(s.a)(t,[{key:"prepare",value:function(e){this.passes||(this.passes=function(e,t,n,i){if(t.filter||t.sampler){var r=Hl(t),a=new Ul(e,{id:n,module:t,fs:r,moduleProps:i});return[a]}return(t.passes||[]).map(function(r,a){var o=Hl(t,r),s="".concat(n,"-").concat(a);return new Ul(e,{id:s,module:t,fs:o,moduleProps:i})})}(e,this.module,this.id,this.props))}},{key:"render",value:function(e){for(var t=e.target,n=void 0===t?null:t,i=!1,r=0;r<this.passes.length;r++){var a=i?e.outputBuffer:e.inputBuffer,o=i?e.inputBuffer:e.outputBuffer;n&&r===this.passes.length-1&&(o=n),this.passes[r].render({inputBuffer:a,outputBuffer:o}),i=!i}return{inputBuffer:i?e.outputBuffer:e.inputBuffer,outputBuffer:i?e.inputBuffer:e.outputBuffer}}},{key:"cleanup",value:function(){if(this.passes){var e=!0,t=!1,n=void 0;try{for(var i,r=this.passes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.delete()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.passes=null}}}]),t}();var Gl=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(e,"(gl_FragColor, texSize, texCoord);\n}\n")},Wl=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(e,"(texture, texSize, texCoord);\n}\n")};function Hl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t.filter){var n="string"==typeof t.filter?t.filter:"".concat(e.name,"_filterColor");return Gl(n)}if(t.sampler){var i="string"==typeof t.sampler?t.sampler:"".concat(e.name,"_sampleColor");return Wl(i)}return null}var Xl=function(){function e(t){Object(o.a)(this,e),this.gl=t,this.pixelRatio=null,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Dl(t),this.pickLayersPass=new Bl(t),this.renderCount=0,this._needsRedraw="Initial render",this.screenBuffer=null,this.offscreenBuffer=null,this.lastPostProcessEffect=null}return Object(s.a)(e,[{key:"setProps",value:function(e){"useDevicePixels"in e&&(this.pixelRatio=zl(e.useDevicePixels)),"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed");var t=this.pixelRatio,n=this.layerFilter;this.drawLayersPass.setProps({pixelRatio:t,layerFilter:n}),this.pickLayersPass.setProps({pixelRatio:t,layerFilter:n})}},{key:"renderLayers",value:function(e){var t=this,n=e.layers,i=e.viewports,r=e.activateViewport,a=e.views,o=e.redrawReason,s=void 0===o?"unknown reason":o,u=e.clearCanvas,l=void 0===u||u,c=e.effects,f=void 0===c?[]:c,h=e.pass,d=e.stats,p=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,v=this.prepareEffects({layers:n,viewports:i,onViewportActive:r,views:a,effects:f}),g=this.lastPostProcessEffect?this.screenBuffer:Tt.getDefaultFramebuffer(this.gl),m=p.render({layers:n,viewports:i,views:a,onViewportActive:r,redrawReason:s,clearCanvas:l,effects:f,effectProps:v,outputBuffer:g});this.postRender(f),this.renderCount++,to.priority>=2&&m.forEach(function(e){t.logRenderStats({status:e,pass:h,redrawReason:s,stats:d,renderStats:m})})}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"finalize",value:function(){this.screenBuffer&&(this.screenBuffer.delete(),this.screenBuffer=null),this.offscreenBuffer&&(this.offscreenBuffer.delete(),this.offscreenBuffer=null)}},{key:"prepareEffects",value:function(e){var t=e.effects,n={};this.lastPostProcessEffect=null;var i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value;Object.assign(n,u.prepare(this.gl,e)),u instanceof Vl&&(this.lastPostProcessEffect=u)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return this.lastPostProcessEffect&&this.prepareRenderBuffers(),n}},{key:"prepareRenderBuffers",value:function(){this.screenBuffer||(this.screenBuffer=new Tt(this.gl)),this.screenBuffer.resize(),this.offscreenBuffer||(this.offscreenBuffer=new Tt(this.gl)),this.offscreenBuffer.resize()}},{key:"postRender",value:function(e){var t={inputBuffer:this.screenBuffer,outputBuffer:this.offscreenBuffer,target:null},n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s instanceof Vl){if(s===this.lastPostProcessEffect){Object.assign(t,{target:Tt.getDefaultFramebuffer(this.gl)}),t=s.render(t);break}t=s.render(t)}}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"logRenderStats",value:function(e){var t=e.renderStats,n=e.pass,i=e.redrawReason,r=e.stats,a=t.totalCount,o=t.visibleCount,s=t.compositeCount,u=t.pickableCount,l=a-s-o,c="";c+="RENDER #".concat(this.renderCount," ").concat(o," (of ").concat(a," layers) to ").concat(n," because ").concat(i," "),to.priority>2&&(c+="(".concat(l," hidden, ").concat(s," composite ").concat(u," pickable)")),to.log(2,c)(),r&&r.get("Redraw Layers").add(o)}}]),e}(),ql={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Yl(e){var t=e.pickedColors,n=e.layers,i=e.deviceX,r=e.deviceY,a=e.deviceRadius,o=e.deviceRect;if(t){for(var s=o.x,u=o.y,l=o.width,c=o.height,f=a*a,h=-1,d=0,p=0;p<c;p++){var v=p+u-r,g=v*v;if(g>f)d+=4*l;else for(var m=0;m<l;m++){if(t[d+3]-1>=0){var y=m+s-i,b=y*y+g;b<=f&&(f=b,h=d)}d+=4}}if(h>=0){var _=t[h+3]-1,w=t.slice(h,h+4),x=n[_];if(x){var k=x.decodePickingColor(w);return{pickedColor:w,pickedLayer:x,pickedObjectIndex:k}}to.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return ql}function Zl(e){var t=e.pickInfo,n=e.lastPickedInfo,i=e.mode,r=e.layers,a=e.viewports,o=e.x,s=e.y,u=e.deviceX,l=e.deviceY,c=e.pixelRatio,f=t.pickedColor,h=t.pickedLayer,d=t.pickedObjectIndex,p=h?[h]:[];if("hover"===i){var v=n.index,g=n.layerId,m=h&&h.props.id;if(m!==g||d!==v){if(m!==g){var y=r.find(function(e){return e.props.id===g});y&&p.unshift(y)}n.layerId=m,n.index=d,n.info=null}}var b={viewports:a}.viewports[0],_=b&&b.unproject([o,s]),w={color:null,layer:null,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:_,lngLat:_,devicePixel:[u,l],pixelRatio:c},x=new Map;return x.set(null,w),p.forEach(function(e){var t=Object.assign({},w);if(e===h&&(t.color=f,t.index=d,t.picked=!0),t=Ql({layer:e,info:t,mode:i}),e===h&&"hover"===i&&(n.info=t),t&&x.set(t.layer.id,t),"hover"===i){var r=e.props.autoHighlight&&h===e?f:null;e.setModuleParameters({pickingSelectedColor:r}),e.setNeedsRedraw()}}),x}function Ql(e){for(var t=e.layer,n=e.info,i=e.mode;t&&n;){var r=n.layer||t;n.layer=t,n=t.pickLayer({info:n,mode:i,sourceLayer:r}),t=t.parent}return n}var Kl=function(){function e(t){Object(o.a)(this,e),this.gl=t,this.pickingFBO=null,this.pickLayersPass=new Bl(t),this.pixelRatio=null,this.layerFilter=null,this.pickingEvent=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}return Object(s.a)(e,[{key:"setProps",value:function(e){"useDevicePixels"in e&&(this.pixelRatio=zl(e.useDevicePixels)),"layerFilter"in e&&(this.layerFilter=e.layerFilter),this.pickLayersPass.setProps({pixelRatio:this.pixelRatio,layerFilter:this.layerFilter})}},{key:"pickObject",value:function(e){var t=e.x,n=e.y,i=e.mode,r=e.radius,a=void 0===r?0:r,o=e.layers,s=e.viewports,u=e.activateViewport,l=e.depth,c=void 0===l?1:l,f=e.event,h=void 0===f?null:f;this.pickingEvent=h;var d=this.pickClosestObject({x:t,y:n,radius:a,layers:o,mode:i,depth:c,viewports:s,onViewportActive:u});return this.pickingEvent=null,d}},{key:"pickObjects",value:function(e){var t=e.x,n=e.y,i=e.width,r=e.height,a=e.layers,o=e.viewports,s=e.activateViewport;return this.pickVisibleObjects({x:t,y:n,width:i,height:r,layers:a,mode:"pickObjects",viewports:o,onViewportActive:s})}},{key:"getLastPickedObject",value:function(e){var t=e.x,n=e.y,i=e.layers,r=e.viewports,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,o=a&&a.layer&&a.layer.id,s=o?i.find(function(e){return e.id===o}):null,u=r[0]&&r[0].unproject([t,n]),l={x:t,y:n,coordinate:u,lngLat:u,layer:s};return s?Object.assign({},a,l):Object.assign(l,{color:null,object:null,index:-1})}},{key:"updatePickingBuffer",value:function(){var e=this.gl;return this.pickingFBO||(this.pickingFBO=new Tt(e)),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}},{key:"pickClosestObject",value:function(e){var t=e.layers,n=e.viewports,i=e.x,r=e.y,a=e.radius,o=e.depth,s=void 0===o?1:o,u=e.mode,l=e.onViewportActive;this.updatePickingBuffer();for(var c,f=this.pixelRatio,h=Math.round(i*f),d=Math.round(this.gl.canvas.height-r*f),p=Math.round(a*f),v=this.pickingFBO,g=v.width,m=v.height,y=this.getPickingRect({deviceX:h,deviceY:d,deviceRadius:p,deviceWidth:g,deviceHeight:m}),b=[],_={},w=0;w<s;w++){var x=Yl({pickedColors:y&&this.drawAndSamplePickingBuffer({layers:t,viewports:n,onViewportActive:l,deviceRect:y,redrawReason:u}),layers:t,deviceX:h,deviceY:d,deviceRadius:p,deviceRect:y});if(x.pickedColor&&w+1<s){var k=x.pickedColor[3]-1;_[k]||(_[k]=t[k].copyPickingColors()),t[k].clearPickingColor(x.pickedColor)}c=Zl({pickInfo:x,lastPickedInfo:this.lastPickedInfo,mode:u,layers:t,viewports:n,x:i,y:r,deviceX:h,deviceY:d,pixelRatio:f});var P=this.callLayerPickingCallbacks(c,u);if(P&&P.forEach(function(e){return b.push(e)}),!x.pickedColor)break}return Object.keys(_).forEach(function(e){return t[e].restorePickingColors(_[e])}),{result:b,emptyInfo:c&&c.get(null)}}},{key:"pickVisibleObjects",value:function(e){var t=e.layers,n=e.viewports,i=e.x,r=e.y,a=e.width,o=e.height,s=e.mode,u=e.onViewportActive;this.updatePickingBuffer();var l=this.pixelRatio,c=Math.round(i*l),f=Math.round(this.gl.canvas.height-r*l),h=Math.round((i+a)*l),d=Math.round(this.gl.canvas.height-(r+o)*l),p={x:c,y:d,width:h-c,height:f-d},v=function(e){var t=e.pickedColors,n=e.layers,i=new Map;if(t)for(var r=0;r<t.length;r+=4){var a=t[r+3]-1;if(a>=0){var o=t.slice(r,r+4),s=o.join(",");if(!i.has(s)){var u=n[a];u?i.set(s,{pickedColor:o,pickedLayer:u,pickedObjectIndex:u.decodePickingColor(o)}):to.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(i.values())}({pickedColors:this.drawAndSamplePickingBuffer({layers:t,viewports:n,onViewportActive:u,deviceRect:p,redrawReason:s}),layers:t}),g=new Map;return v.forEach(function(e){var t={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:i,y:r,width:a,height:o,pixelRatio:l};t=Ql({layer:e.pickedLayer,info:t,mode:s}),g.has(t.object)||g.set(t.object,t)}),Array.from(g.values())}},{key:"drawAndSamplePickingBuffer",value:function(e){var t=e.layers,n=e.viewports,i=e.onViewportActive,r=e.deviceRect,a=e.redrawReason;if(Xa(r),Xa(Number.isFinite(r.width)&&r.width>0,"`width` must be > 0"),Xa(Number.isFinite(r.height)&&r.height>0,"`height` must be > 0"),t.filter(function(e){return e.isPickable()}).length<1)return null;var o=this.pickingFBO;this.pickLayersPass.render({layers:t,viewports:n,onViewportActive:i,pickingFBO:o,deviceRect:r,redrawReason:a,effectProps:{lightSources:{}}});var s=r.x,u=r.y,l=r.width,c=r.height,f=new Uint8Array(l*c*4);return yt(o,{sourceX:s,sourceY:u,sourceWidth:l,sourceHeight:c,target:f}),f}},{key:"getPickingRect",value:function(e){var t=e.deviceX,n=e.deviceY,i=e.deviceRadius,r=e.deviceWidth,a=e.deviceHeight;if(!(t>=0&&n>=0&&t<r&&n<a))return null;var o=Math.max(0,t-i),s=Math.max(0,n-i);return{x:o,y:s,width:Math.min(r,t+i)-o+1,height:Math.min(a,n+i)-s+1}}},{key:"callLayerPickingCallbacks",value:function(e,t){var n=[],i=this.pickingEvent;return e.forEach(function(e){if(e.layer){var r=!1;switch(t){case"hover":r=e.layer.onHover(e,i);break;case"query":break;default:throw new Error("unknown pick type")}r||n.push(e)}}),n}}]),e}(),$l=1,Jl=2,ec=4,tc={mousedown:$l,mousemove:Jl,mouseup:ec};var nc,ic,rc=null;"undefined"!=typeof document&&(rc=n(61),nc=rc.PointerEventInput,ic=nc.prototype.handler,nc.prototype.handler=function(e){var t=this.store;e.button>0&&(function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}(t,function(t){return t.pointerId===e.pointerId})||t.push(e)),ic.call(this,e)},rc.MouseInput.prototype.handler=function(e){var t=tc[e.type];t&$l&&e.button>=0&&(this.pressed=!0),t&Jl&&0===e.which&&(t=ec),this.pressed&&(t&ec&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))});var ac=rc;var oc=ac?[[ac.Rotate,{enable:!1}],[ac.Pinch,{enable:!1}],[ac.Swipe,{enable:!1}],[ac.Pan,{threshold:0,enable:!1}],[ac.Press,{enable:!1}],[ac.Tap,{event:"doubletap",taps:2,enable:!1}],[ac.Tap,{event:"anytap",enable:!1}],[ac.Tap,{enable:!1}]]:null,sc={rotate:["pinch"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},uc={doubletap:["tap"]},lc={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},cc=["keydown","keyup"],fc=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],hc=["wheel","mousewheel","DOMMouseScroll"],dc={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},pc={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},vc=n(19),gc=-1!==vc.b.indexOf("firefox"),mc=hc,yc=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},r),this.events=mc.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent,!!vc.a&&{passive:!1})})}return Object(s.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){"wheel"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){var t=e.deltaY;vc.c.WheelEvent&&(gc&&e.deltaMode===vc.c.WheelEvent.DOM_DELTA_PIXEL&&(t/=vc.c.devicePixelRatio),e.deltaMode===vc.c.WheelEvent.DOM_DELTA_LINE&&(t*=40));var n={x:e.clientX,y:e.clientY};0!==t&&t%4.000244140625==0&&(t=Math.floor(t/4.000244140625)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,n)}}},{key:"_onWheel",value:function(e,t,n){this.callback({type:"wheel",center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),bc=fc,_c=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,e),this.element=t,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},r),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=bc.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent)})}return Object(s.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){"pointermove"===e&&(this.enableMoveEvent=t),"pointerover"===e&&(this.enableOverEvent=t),"pointerout"===e&&(this.enableOutEvent=t),"pointerleave"===e&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}},{key:"handleOverEvent",value:function(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:"pointerover",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleOutEvent",value:function(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:"pointerout",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleLeaveEvent",value:function(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:"pointerleave",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleMoveEvent",value:function(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),e}(),wc=cc,xc=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},r),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=wc.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=1,t.style.outline="none",this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent)})}return Object(s.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}]),e}(),kc=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},i),this.handleEvent=this.handleEvent.bind(this),t.addEventListener("contextmenu",this.handleEvent)}return Object(s.a)(e,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(e,t){"contextmenu"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){this.options.enable&&this.callback({type:"contextmenu",center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),Pc=1,Oc=2,Ec=4,Tc={pointerdown:Pc,pointermove:Oc,pointerup:Ec,mousedown:Pc,mousemove:Oc,mouseup:Ec},Sc=1,jc=2,Cc=3,Ac=0,Lc=1,Mc=2,Fc=1,Ic=2,Rc=4;var Nc=function(){function e(t){Object(o.a)(this,e),this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this)}return Object(s.a)(e,[{key:"isEmpty",value:function(){return 0===this.handlers.length}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"root",i=this.handlers,r=this.handlersByElement;r.has(n)||r.set(n,[]);var a={type:e,handler:t,srcElement:n};i.push(a),r.get(n).push(a)}},{key:"remove",value:function(e,t){for(var n=this.handlers,i=this.handlersByElement,r=n.length-1;r>=0;r--){var a=n[r];if(a.type===e&&a.handler===t){n.splice(r,1);var o=i.get(a.srcElement);o.splice(o.indexOf(a),1),0===o.length&&i.delete(a.srcElement)}}}},{key:"handleEvent",value:function(e){if(!this.isEmpty()){for(var t=this._normalizeEvent(e),n=e.srcEvent.target;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")}}},{key:"_emit",value:function(e,t){var n=this.handlersByElement.get(t);if(n)for(var i=!1,r=function(){e.handled=!0},a=function(){e.handled=!0,i=!0},o=0;o<n.length;o++){var s=n[o],u=s.type;if((0,s.handler)(Object.assign({},e,{type:u,stopPropagation:r,stopImmediatePropagation:a})),i)break}}},{key:"_normalizeEvent",value:function(e){var t=this.eventManager.element;return Object.assign({},e,function(e){var t=Tc[e.srcEvent.type];if(!t)return null;var n=e.srcEvent,i=n.buttons,r=n.button,a=n.which,o=!1,s=!1,u=!1;return t===Ec||t===Oc&&!Number.isFinite(i)?(o=a===Sc,s=a===jc,u=a===Cc):t===Oc?(o=Boolean(i&Fc),s=Boolean(i&Rc),u=Boolean(i&Ic)):t===Pc&&(o=r===Ac,s=r===Lc,u=r===Mc),{leftButton:o,middleButton:s,rightButton:u}}(e),function(e,t){var n=e.srcEvent;if(!e.center&&!Number.isFinite(n.clientX))return null;var i=e.center||{x:n.clientX,y:n.clientY},r=t.getBoundingClientRect(),a=r.width/t.offsetWidth,o=r.height/t.offsetHeight;return{center:i,offsetCenter:{x:(i.x-r.left-t.clientLeft)/a,y:(i.y-r.top-t.clientTop)/o}}}(e,t),{handled:!1,rootElement:t})}}]),e}(),Dc={events:null,recognizers:null,recognizerOptions:{},Manager:ac?ac.Manager:function(e){var t={},n=function(){return t};return t.get=function(){return null},t.set=n,t.on=n,t.off=n,t.destroy=n,t.emit=n,t},touchAction:"none"},Bc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e),this.options=Object.assign({},Dc,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(t);var i=n.events;i&&this.on(i)}return Object(s.a)(e,[{key:"setElement",value:function(e){var t=this;if(this.element&&this.destroy(),this.element=e,e){var n=this.options,i=n.Manager;for(var r in this.manager=new i(e,{touchAction:n.touchAction,recognizers:n.recognizers||oc}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(sc).forEach(function(e){var n=t.manager.get(e);n&&sc[e].forEach(function(e){n.recognizeWith(e)})}),n.recognizerOptions){var a=this.manager.get(r);if(a){var o=n.recognizerOptions[r];delete o.enable,a.set(o)}}this.wheelInput=new yc(e,this._onOtherEvent,{enable:!1}),this.moveInput=new _c(e,this._onOtherEvent,{enable:!1}),this.keyInput=new xc(e,this._onOtherEvent,{enable:!1}),this.contextmenuInput=new kc(e,this._onOtherEvent,{enable:!1});var s=!0,u=!1,l=void 0;try{for(var c,f=this.events[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=v(c.value,2),d=h[0],p=h[1];p.isEmpty()||(this._toggleRecognizer(p.recognizerName,!0),this.manager.on(d,p.handleEvent))}}catch(e){u=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,t,n){if("string"==typeof e)this._addEventHandler(e,t,n);else for(var i in n=t,e)this._addEventHandler(i,e[i],n)}},{key:"off",value:function(e,t){if("string"==typeof e)this._removeEventHandler(e,t);else for(var n in e)this._removeEventHandler(n,e[n])}},{key:"_toggleRecognizer",value:function(e,t){var n=this.manager;if(n){var i=n.get(e);if(i&&i.options.enable!==t){i.set({enable:t});var r=uc[e];r&&!this.options.recognizers&&r.forEach(function(r){var a=n.get(r);t?(a.requireFailure(e),i.dropRequireFailure(r)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function(e,t,n){var i=this.manager,r=this.events,a=pc[e]||e,o=r.get(a);o||(o=new Nc(this),r.set(a,o),o.recognizerName=dc[a]||a,i&&i.on(a,o.handleEvent)),this._toggleRecognizer(o.recognizerName,!0),o.add(e,t,n)}},{key:"_removeEventHandler",value:function(e,t){var n=this.events,i=pc[e]||e,r=n.get(i);if(r&&(r.remove(e,t),r.isEmpty())){var a=r.recognizerName,o=!1,s=!0,u=!1,l=void 0;try{for(var c,f=n.values()[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=c.value;if(h.recognizerName===a&&!h.isEmpty()){o=!0;break}}}catch(e){u=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}o||this._toggleRecognizer(a,!1)}}},{key:"_onBasicInput",value:function(e){var t=e.srcEvent,n=lc[t.type];n&&this.manager.emit(n,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),e}();function zc(){}var Uc={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",_animate:!1,onWebGLInitialized:zc,onResize:zc,onViewStateChange:zc,onBeforeRender:zc,onAfterRender:zc,onLoad:zc,_onMetrics:null,getCursor:function(e){return e.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},Vc=function(){function e(t){Object(o.a)(this,e),t=Object.assign({},Uc,t),this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=t.initialViewState||null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerLeave=this._onPointerLeave.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),t.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new B({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),this.animationLoop.start()}return Object(s.a)(e,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.viewManager&&(this.viewManager.finalize(),this.viewManager=null),this.effectManager&&(this.effectManager.finalize(),this.effectManager=null),this.deckRenderer&&(this.deckRenderer.finalize(),this.deckRenderer=null),this.eventManager&&this.eventManager.destroy(),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&to.removed("onLayerHover","onHover")(),"onLayerClick"in e&&to.removed("onLayerClick","onClick")(),e=Object.assign({},this.props,e),this.props=e,this._setCanvasSize(e);var t=Object.assign({},e,{views:this._getViews(this.props),width:this.width,height:this.height}),n=this._getViewState(e);n&&(t.viewState=n),this.viewManager&&this.viewManager.setProps(t),this.layerManager&&this.layerManager.setProps(t),this.effectManager&&this.effectManager.setProps(t),this.animationLoop&&this.animationLoop.setProps(t),this.deckRenderer&&this.deckRenderer.setProps(t),this.deckPicker&&this.deckPicker.setProps(t),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var n=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),r=this.effectManager.needsRedraw(e),a=this.deckRenderer.needsRedraw(e);return t=t||n||i||r||a}},{key:"redraw",value:function(e){if(this.layerManager){var t=e||this.needsRedraw({clearRedrawFlags:!0});t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(e){return this.viewManager.getViewports(e)}},{key:"pickObject",value:function(e){var t=e.x,n=e.y,i=e.radius,r=void 0===i?0:i,a=e.layerIds,o=void 0===a?null:a;this.stats.get("Pick Count").incrementCount(),this.stats.get("pickObject Time").timeStart();var s=this.layerManager.getLayers({layerIds:o}),u=this.layerManager.activateViewport,l=this.deckPicker.pickObject({x:t,y:n,radius:r,layers:s,viewports:this.getViewports({x:t,y:n}),activateViewport:u,mode:"query",depth:1}).result;return this.stats.get("pickObject Time").timeEnd(),l.length?l[0]:null}},{key:"pickMultipleObjects",value:function(e){var t=e.x,n=e.y,i=e.radius,r=void 0===i?0:i,a=e.layerIds,o=void 0===a?null:a,s=e.depth,u=void 0===s?10:s;this.stats.get("Pick Count").incrementCount(),this.stats.get("pickMultipleObjects Time").timeStart();var l=this.layerManager.getLayers({layerIds:o}),c=this.layerManager.activateViewport,f=this.deckPicker.pickObject({x:t,y:n,radius:r,layers:l,viewports:this.getViewports({x:t,y:n}),activateViewport:c,mode:"query",depth:u}).result;return this.stats.get("pickMultipleObjects Time").timeEnd(),f}},{key:"pickObjects",value:function(e){var t=e.x,n=e.y,i=e.width,r=void 0===i?1:i,a=e.height,o=void 0===a?1:a,s=e.layerIds,u=void 0===s?null:s;this.stats.get("Pick Count").incrementCount(),this.stats.get("pickObjects Time").timeStart();var l=this.layerManager.getLayers({layerIds:u}),c=this.layerManager.activateViewport,f=this.deckPicker.pickObjects({x:t,y:n,width:r,height:o,layers:l,viewports:this.getViewports({x:t,y:n,width:r,height:o}),activateViewport:c});return this.stats.get("pickObjects Time").timeEnd(),f}},{key:"_createCanvas",value:function(e){var t=e.canvas;("string"==typeof t&&Xa(t=document.getElementById(t)),t)||(t=document.createElement("canvas"),(e.parent||document.body).appendChild(t));var n=e.id,i=e.style;return t.id=n,Object.assign(t.style,i),t}},{key:"_setCanvasSize",value:function(e){if(this.canvas){var t=e.width,n=e.height;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var e=this.width,t=this.height;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var e=this.canvas;if(!e)return!1;var t=e.clientWidth||e.width,n=e.clientHeight||e.height;return(t!==this.width||n!==this.height)&&(this.width=t,this.height=n,!0)}},{key:"_createAnimationLoop",value:function(e){var t=this,n=e.width,i=e.height,r=e.gl,a=e.glOptions,o=e.debug,s=e.useDevicePixels,u=e.autoResizeDrawingBuffer;return new Ti({width:n,height:i,useDevicePixels:s,autoResizeDrawingBuffer:u,gl:r,onCreateContext:function(e){return Ct(Object.assign({},a,e,{canvas:t.canvas,debug:o}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender})}},{key:"_getViewState",value:function(e){return e.viewState||this.viewState}},{key:"_getViews",value:function(e){var t=e.views||[new jl({id:"default-view"})];return(t=Array.isArray(t)?t:[t]).length&&e.controller&&(t[0].props.controller=e.controller),t}},{key:"_requestPick",value:function(e){var t=e.event,n=e.callback,i=e.mode,r=this._pickRequest;if("pointerleave"===t.type)r.x=-1,r.y=-1,r.radius=0;else{var a=t.offsetCenter;if(!a)return;r.x=a.x,r.y=a.y,r.radius=this.props.pickingRadius}r.callback=n,r.event=t,r.mode=i}},{key:"_pickAndCallback",value:function(){var e=this._pickRequest;if(e.mode){var t=this.deckPicker.pickObject(Object.assign({layers:this.layerManager.getLayers(),viewports:this.getViewports(e),activateViewport:this.layerManager.activateViewport,depth:1},e)),n=t.result,i=t.emptyInfo;if(e.callback){var r=n.find(function(e){return e.index>=0})||i;e.callback(r,e.event)}e.mode=null}}},{key:"_updateCursor",value:function(){this.canvas&&(this.canvas.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_updateAnimationProps",value:function(e){this.layerManager.context.animationProps=e}},{key:"_setGLContext",value:function(e){if(!this.layerManager){for(var t in this.canvas||(this.canvas=e.canvas,Object(H.a)(e,{enable:!0,copyState:!0})),W(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e),this.eventManager=new Bc(e.canvas,{touchAction:this.props.touchAction,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerLeave}}),m)this.eventManager.on(t,this._onEvent);this.viewManager=new Zu({eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(this.props),viewState:this._getViewState(this.props),width:this.width,height:this.height}),Xa(this.viewManager);var n=this.viewManager.getViewports()[0];this.layerManager=new Gu(e,{deck:this,stats:this.stats,viewport:n}),this.effectManager=new Il,this.deckRenderer=new Xl(e),this.deckPicker=new Kl(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(e,t){var n=this.layerManager.context.gl;W(n,this.props.parameters),this.props.onBeforeRender({gl:n});var i=this.layerManager.getLayers(),r=this.layerManager.activateViewport;this.deckRenderer.renderLayers(Object.assign({layers:i,viewports:this.viewManager.getViewports(),activateViewport:r,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:n})}},{key:"_onRendererInitialized",value:function(e){var t=e.gl;this._setGLContext(t)}},{key:"_onRenderFrame",value:function(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),to.table(3,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(e),this._updateAnimationProps(e),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates(e)}},{key:"_onViewStateChange",value:function(e){var t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState[e.viewId]=t,this.viewManager.setProps({viewState:t}))}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;n!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=n)}},{key:"_onEvent",value:function(e){var t=m[e.type],n=e.offsetCenter;if(t&&n){var i=this.layerManager.getLayers(),r=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:i,viewports:this.getViewports(n)},this._lastPointerDownInfo),a=r.layer,o=a&&(a[t.handler]||a.props[t.handler]),s=this.props[t.handler],u=!1;o&&(u=o.call(a,r,e)),!u&&s&&s(r,e)}}},{key:"_onPointerDown",value:function(e){var t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}},{key:"_onPointerMove",value:function(e){e.leftButton||e.rightButton||this._requestPick({callback:this.props.onHover,event:e,mode:"hover"})}},{key:"_onPointerLeave",value:function(e){this._requestPick({callback:this.props.onHover,event:e,mode:"hover"})}},{key:"_getFrameStats",value:function(){this.stats.get("frameRate").timeEnd(),this.stats.get("frameRate").timeStart();var e=this.animationLoop.stats;this.stats.get("GPU Time").addTime(e.get("GPU Time").lastTiming),this.stats.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){this.metrics.fps=this.stats.get("frameRate").getHz(),this.metrics.setPropsTime=this.stats.get("setProps Time").time,this.metrics.updateAttributesTime=this.stats.get("Update Attributes").time,this.metrics.framesRedrawn=this.stats.get("Redraw Count").count,this.metrics.pickTime=this.stats.get("pickObject Time").time+this.stats.get("pickMultipleObjects Time").time+this.stats.get("pickObjects Time").time,this.metrics.pickCount=this.stats.get("Pick Count").count,this.metrics.gpuTime=this.stats.get("GPU Time").time,this.metrics.cpuTime=this.stats.get("CPU Time").time,this.metrics.gpuTimePerFrame=this.stats.get("GPU Time").getAverageTime(),this.metrics.cpuTimePerFrame=this.stats.get("CPU Time").getAverageTime();var e=z.get("Memory Usage");this.metrics.bufferMemory=e.get("Buffer Memory").count,this.metrics.textureMemory=e.get("Texture Memory").count,this.metrics.renderbufferMemory=e.get("Renderbuffer Memory").count,this.metrics.gpuMemory=e.get("GPU Memory").count}}]),e}();function Gc(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}function Wc(e){return e?"function"==typeof e?Object(i.createElement)(Yu,{},e):Array.isArray(e)?e.map(Wc):(Gc(e.type,Yu),e):e}function Hc(e){var t=e.children,n=e.layers,i=e.views,a=[],o=[],s={};return r.a.Children.forEach(Wc(t),function(e){if(e){var t=e.type;if(Gc(t,Ls)){var n=function(e,t){var n={},i=e.defaultProps||{};for(var r in t)i[r]!==t[r]&&(n[r]=t[r]);return new e(n)}(t,e.props);o.push(n)}else a.push(e);if(t!==Yu&&Gc(t,Yu)&&e.props.id){var i=new t(e.props);s[i.id]=i}}}),Object.keys(s).length>0&&(Array.isArray(i)?i.forEach(function(e){s[e.id]=e}):i&&(s[i.id]=i),i=Object.values(s)),{layers:n=o.length>0?[].concat(o,Object(_.a)(n)):n,children:a,views:i}}function Xc(e){var t=e.children,n=(e.viewports,e.deck),r=e.ContextProvider,a=(n||{}).viewManager;if(!a||!a.views.length)return[];var o=a.views[0].id;return t.map(function(e,t){e.props.viewportId&&to.removed("viewportId","<View>")(),e.props.viewId&&to.removed("viewId","<View>")();var s=o,u=e;Gc(e.type,Yu)&&(s=e.props.id||o,u=e.props.children);var l=u&&u.props&&u.props.style,c=a.getViewport(s),f=a.getViewState(s);if(!c)return null;var h=c.x,d=c.y,p=c.width,v=c.height;u=function e(t,n){return t?"function"==typeof t?t(n):Array.isArray(t)?t.map(function(t){return e(t,n)}):Object(i.cloneElement)(t,n):t}(u,{x:h,y:d,width:p,height:v,viewport:c,viewState:f});var g={position:"absolute",zIndex:l&&l.zIndex,pointerEvents:"none",left:h,top:d,width:p,height:v},m="view-child-".concat(s,"-").concat(t);if(r){var y={viewport:c,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:n._onViewStateChange};u=Object(i.createElement)(r,{value:y},u)}return Object(i.createElement)("div",{key:m,id:m,style:g},u)})}Vc.getPropTypes=function(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,effects:e.arrayOf(e.instanceOf(Al)),controller:e.oneOfType([e.func,e.bool,e.object]),gl:e.object,glOptions:e.object,parameters:e.object,pickingRadius:e.number,useDevicePixels:e.bool,touchAction:e.string,onWebGLInitialized:e.func,onResize:e.func,onViewStateChange:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLoad:e.func,debug:e.bool,drawPickingColors:e.bool,_animate:e.bool}},Vc.defaultProps=Uc;var qc=Qs.memoize,Yc=Vc.getPropTypes(Ru.a),Zc=Vc.defaultProps,Qc=function(e){function t(e){var n;return Object(o.a)(this,t),(n=c(this,f(t).call(this,e))).viewports=null,n.children=null,n._needsRedraw=null,n.pickObject=n.pickObject.bind(l(l(n))),n.pickMultipleObjects=n.pickMultipleObjects.bind(l(l(n))),n.pickObjects=n.pickObjects.bind(l(l(n))),n._extractJSXLayers=qc(Hc),n._positionChildrenUnderViews=qc(Xc),n}return d(t,r.a.Component),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.Deck||Vc;this.deck=this.deck||new e(Object.assign({},this.props,{canvas:this.deckCanvas,_customRender:this._customRender.bind(this)})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function(e){this._updateFromProps(e);var t=this.children!==this._parseJSX(e).children,n=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return t&&!n}},{key:"componentDidUpdate",value:function(){this._redrawDeck()}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"pickObject",value:function(e){var t=e.x,n=e.y,i=e.radius,r=void 0===i?0:i,a=e.layerIds,o=void 0===a?null:a;return this.deck.pickObject({x:t,y:n,radius:r,layerIds:o})}},{key:"pickMultipleObjects",value:function(e){var t=e.x,n=e.y,i=e.radius,r=void 0===i?0:i,a=e.layerIds,o=void 0===a?null:a,s=e.depth,u=void 0===s?10:s;return this.deck.pickMultipleObjects({x:t,y:n,radius:r,layerIds:o,depth:u})}},{key:"pickObjects",value:function(e){var t=e.x,n=e.y,i=e.width,r=void 0===i?1:i,a=e.height,o=void 0===a?1:a,s=e.layerIds,u=void 0===s?null:s;return this.deck.pickObjects({x:t,y:n,width:r,height:o,layerIds:u})}},{key:"_redrawDeck",value:function(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function(e){this._needsRedraw=e,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function(e){return this._extractJSXLayers({layers:e.layers,views:e.views,children:e.children})}},{key:"_updateFromProps",value:function(e){var t=this._parseJSX(e),n=t.layers,i=t.views,r=Object.assign({},e,{layers:n,views:i});this.deck.setProps(r)}},{key:"render",value:function(){var e=this,t=(this.deck||{}).viewManager;this.viewports=t&&t.getViewports(),this.children=this._parseJSX(this.props).children;var n=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck,ContextProvider:this.props.ContextProvider}),r=Object.assign({},{position:"absolute",left:0,top:0},this.props.style),a=Object(i.createElement)("canvas",{ref:function(t){return e.deckCanvas=t},key:"deck-canvas",id:this.props.id,style:r});return Object(i.createElement)("div",{id:"deckgl-wrapper"},[n,a])}}]),t}();Qc.propTypes=Yc,Qc.defaultProps=Zc;var Kc=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},$c=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return Kc(t(e),n)}),{left:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var a=i+r>>>1;e(t[a],n)<0?i=a+1:r=a}return i},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var a=i+r>>>1;e(t[a],n)>0?r=a:i=a+1}return i}}};var Jc=$c(Kc),ef=Jc.right,tf=(Jc.left,ef);var nf=Array.prototype;nf.slice,nf.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);function rf(){}function af(e,t){var n=new rf;if(e instanceof rf)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var i,r=-1,a=e.length;if(null==t)for(;++r<a;)n.set(r,e[r]);else for(;++r<a;)n.set(t(i=e[r],r,e),i)}else if(e)for(var o in e)n.set(o,e[o]);return n}rf.prototype=af.prototype={constructor:rf,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var of=af;function sf(){}var uf=of.prototype;function lf(e,t){var n=new sf;if(e instanceof sf)e.each(function(e){n.add(e)});else if(e){var i=-1,r=e.length;if(null==t)for(;++i<r;)n.add(e[i]);else for(;++i<r;)n.add(t(e[i],i,e))}return n}sf.prototype=lf.prototype={constructor:sf,has:uf.has,add:function(e){return this["$"+(e+="")]=e,this},remove:uf.remove,clear:uf.clear,values:uf.keys,size:uf.size,empty:uf.empty,each:uf.each};var cf=Array.prototype,ff=(cf.map,cf.slice);var hf=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function df(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function pf(){}var vf="\\s*([+-]?\\d+)\\s*",gf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yf=/^#([0-9a-f]{3})$/,bf=/^#([0-9a-f]{6})$/,_f=new RegExp("^rgb\\("+[vf,vf,vf]+"\\)$"),wf=new RegExp("^rgb\\("+[mf,mf,mf]+"\\)$"),xf=new RegExp("^rgba\\("+[vf,vf,vf,gf]+"\\)$"),kf=new RegExp("^rgba\\("+[mf,mf,mf,gf]+"\\)$"),Pf=new RegExp("^hsl\\("+[gf,mf,mf]+"\\)$"),Of=new RegExp("^hsla\\("+[gf,mf,mf,gf]+"\\)$"),Ef={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Tf(e){var t;return e=(e+"").trim().toLowerCase(),(t=yf.exec(e))?new Lf((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=bf.exec(e))?Sf(parseInt(t[1],16)):(t=_f.exec(e))?new Lf(t[1],t[2],t[3],1):(t=wf.exec(e))?new Lf(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=xf.exec(e))?jf(t[1],t[2],t[3],t[4]):(t=kf.exec(e))?jf(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Pf.exec(e))?Ff(t[1],t[2]/100,t[3]/100,1):(t=Of.exec(e))?Ff(t[1],t[2]/100,t[3]/100,t[4]):Ef.hasOwnProperty(e)?Sf(Ef[e]):"transparent"===e?new Lf(NaN,NaN,NaN,0):null}function Sf(e){return new Lf(e>>16&255,e>>8&255,255&e,1)}function jf(e,t,n,i){return i<=0&&(e=t=n=NaN),new Lf(e,t,n,i)}function Cf(e){return e instanceof pf||(e=Tf(e)),e?new Lf((e=e.rgb()).r,e.g,e.b,e.opacity):new Lf}function Af(e,t,n,i){return 1===arguments.length?Cf(e):new Lf(e,t,n,null==i?1:i)}function Lf(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function Mf(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Ff(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Rf(e,t,n,i)}function If(e,t,n,i){return 1===arguments.length?function(e){if(e instanceof Rf)return new Rf(e.h,e.s,e.l,e.opacity);if(e instanceof pf||(e=Tf(e)),!e)return new Rf;if(e instanceof Rf)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),o=NaN,s=a-r,u=(a+r)/2;return s?(o=t===a?(n-i)/s+6*(n<i):n===a?(i-t)/s+2:(t-n)/s+4,s/=u<.5?a+r:2-a-r,o*=60):s=u>0&&u<1?0:o,new Rf(o,s,u,e.opacity)}(e):new Rf(e,t,n,null==i?1:i)}function Rf(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Nf(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}hf(pf,Tf,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),hf(Lf,Af,df(pf,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Lf(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Lf(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Mf(this.r)+Mf(this.g)+Mf(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),hf(Rf,If,df(pf,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Rf(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Rf(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Lf(Nf(e>=240?e-240:e+120,r,i),Nf(e,r,i),Nf(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Df=Math.PI/180,Bf=180/Math.PI,zf=.96422,Uf=1,Vf=.82521,Gf=4/29,Wf=6/29,Hf=3*Wf*Wf,Xf=Wf*Wf*Wf;function qf(e){if(e instanceof Zf)return new Zf(e.l,e.a,e.b,e.opacity);if(e instanceof nh)return ih(e);e instanceof Lf||(e=Cf(e));var t,n,i=Jf(e.r),r=Jf(e.g),a=Jf(e.b),o=Qf((.2225045*i+.7168786*r+.0606169*a)/Uf);return i===r&&r===a?t=n=o:(t=Qf((.4360747*i+.3850649*r+.1430804*a)/zf),n=Qf((.0139322*i+.0971045*r+.7141733*a)/Vf)),new Zf(116*o-16,500*(t-o),200*(o-n),e.opacity)}function Yf(e,t,n,i){return 1===arguments.length?qf(e):new Zf(e,t,n,null==i?1:i)}function Zf(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function Qf(e){return e>Xf?Math.pow(e,1/3):e/Hf+Gf}function Kf(e){return e>Wf?e*e*e:Hf*(e-Gf)}function $f(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Jf(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function eh(e){if(e instanceof nh)return new nh(e.h,e.c,e.l,e.opacity);if(e instanceof Zf||(e=qf(e)),0===e.a&&0===e.b)return new nh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Bf;return new nh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function th(e,t,n,i){return 1===arguments.length?eh(e):new nh(e,t,n,null==i?1:i)}function nh(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function ih(e){if(isNaN(e.h))return new Zf(e.l,0,0,e.opacity);var t=e.h*Df;return new Zf(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}hf(Zf,Yf,df(pf,{brighter:function(e){return new Zf(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Zf(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Lf($f(3.1338561*(t=zf*Kf(t))-1.6168667*(e=Uf*Kf(e))-.4906146*(n=Vf*Kf(n))),$f(-.9787684*t+1.9161415*e+.033454*n),$f(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),hf(nh,th,df(pf,{brighter:function(e){return new nh(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new nh(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return ih(this).rgb()}}));var rh=-.14861,ah=1.78277,oh=-.29227,sh=-.90649,uh=1.97294,lh=uh*sh,ch=uh*ah,fh=ah*oh-sh*rh;function hh(e,t,n,i){return 1===arguments.length?function(e){if(e instanceof dh)return new dh(e.h,e.s,e.l,e.opacity);e instanceof Lf||(e=Cf(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(fh*i+lh*t-ch*n)/(fh+lh-ch),a=i-r,o=(uh*(n-r)-oh*a)/sh,s=Math.sqrt(o*o+a*a)/(uh*r*(1-r)),u=s?Math.atan2(o,a)*Bf-120:NaN;return new dh(u<0?u+360:u,s,r,e.opacity)}(e):new dh(e,t,n,null==i?1:i)}function dh(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function ph(e,t,n,i,r){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*i+o*r)/6}hf(dh,hh,df(pf,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new dh(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new dh(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Df,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Lf(255*(t+n*(rh*i+ah*r)),255*(t+n*(oh*i+sh*r)),255*(t+n*(uh*i)),this.opacity)}}));var vh=function(e){return function(){return e}};function gh(e,t){return function(n){return e+n*t}}function mh(e,t){var n=t-e;return n?gh(e,n>180||n<-180?n-360*Math.round(n/360):n):vh(isNaN(e)?t:e)}function yh(e){return 1==(e=+e)?bh:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):vh(isNaN(t)?n:t)}}function bh(e,t){var n=t-e;return n?gh(e,n):vh(isNaN(e)?t:e)}(function e(t){var n=yh(t);function i(e,t){var i=n((e=Af(e)).r,(t=Af(t)).r),r=n(e.g,t.g),a=n(e.b,t.b),o=bh(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=a(t),e.opacity=o(t),e+""}}return i.gamma=e,i})(1);function _h(e){return function(t){var n,i,r=t.length,a=new Array(r),o=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=Af(t[n]),a[n]=i.r||0,o[n]=i.g||0,s[n]=i.b||0;return a=e(a),o=e(o),s=e(s),i.opacity=1,function(e){return i.r=a(e),i.g=o(e),i.b=s(e),i+""}}}_h(function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],o=i>0?e[i-1]:2*r-a,s=i<t-1?e[i+2]:2*a-r;return ph((n-i/t)*t,o,r,a,s)}}),_h(function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],o=e[(i+1)%t],s=e[(i+2)%t];return ph((n-i/t)*t,r,a,o,s)}});var wh=function(e,t){return t-=e=+e,function(n){return e+t*n}},xh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;new RegExp(xh.source,"g");var kh,Ph,Oh,Eh,Th=180/Math.PI,Sh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},jh=function(e,t,n,i,r,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,u/=s),e*i<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*Th,skewX:Math.atan(u)*Th,scaleX:o,scaleY:s}};function Ch(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(a,o){var s=[],u=[];return a=e(a),o=e(o),function(e,i,r,a,o,s){if(e!==r||i!==a){var u=o.push("translate(",null,t,null,n);s.push({i:u-4,x:wh(e,r)},{i:u-2,x:wh(i,a)})}else(r||a)&&o.push("translate("+r+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,u),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(r(n)+"rotate(",null,i)-2,x:wh(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}(a.rotate,o.rotate,s,u),function(e,t,n,a){e!==t?a.push({i:n.push(r(n)+"skewX(",null,i)-2,x:wh(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}(a.skewX,o.skewX,s,u),function(e,t,n,i,a,o){if(e!==n||t!==i){var s=a.push(r(a)+"scale(",null,",",null,")");o.push({i:s-4,x:wh(e,n)},{i:s-2,x:wh(t,i)})}else 1===n&&1===i||a.push(r(a)+"scale("+n+","+i+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,u),a=o=null,function(e){for(var t,n=-1,i=u.length;++n<i;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}Ch(function(e){return"none"===e?Sh:(kh||(kh=document.createElement("DIV"),Ph=document.documentElement,Oh=document.defaultView),kh.style.transform=e,e=Oh.getComputedStyle(Ph.appendChild(kh),null).getPropertyValue("transform"),Ph.removeChild(kh),e=e.slice(7,-1).split(","),jh(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),Ch(function(e){return null==e?Sh:(Eh||(Eh=document.createElementNS("http://www.w3.org/2000/svg","g")),Eh.setAttribute("transform",e),(e=Eh.transform.baseVal.consolidate())?(e=e.matrix,jh(e.a,e.b,e.c,e.d,e.e,e.f)):Sh)},", ",")",")"),Math.SQRT2;function Ah(e){return function(t,n){var i=e((t=If(t)).h,(n=If(n)).h),r=bh(t.s,n.s),a=bh(t.l,n.l),o=bh(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=r(e),t.l=a(e),t.opacity=o(e),t+""}}}Ah(mh),Ah(bh);function Lh(e){return function(t,n){var i=e((t=th(t)).h,(n=th(n)).h),r=bh(t.c,n.c),a=bh(t.l,n.l),o=bh(t.opacity,n.opacity);return function(e){return t.h=i(e),t.c=r(e),t.l=a(e),t.opacity=o(e),t+""}}}Lh(mh),Lh(bh);function Mh(e){return function t(n){function i(t,i){var r=e((t=hh(t)).h,(i=hh(i)).h),a=bh(t.s,i.s),o=bh(t.l,i.l),s=bh(t.opacity,i.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,i.gamma=t,i}(1)}Mh(mh);var Fh=Mh(bh);var Ih=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]},Rh=function(e){return(e=Ih(Math.abs(e)))?e[1]:NaN},Nh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dh(e){return new Bh(e)}function Bh(e){if(!(t=Nh.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}Dh.prototype=Bh.prototype,Bh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var zh,Uh,Vh=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(r>0){if(!+e[i])break e;r=0}}return r>0?e.slice(0,r)+e.slice(t+1):e},Gh=function(e,t){var n=Ih(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")},Wh={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Gh(100*e,t)},r:Gh,s:function(e,t){var n=Ih(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(zh=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Ih(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},Hh=function(e){return e},Xh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];Uh=function(e){var t,n,i=e.grouping&&e.thousands?(t=e.grouping,n=e.thousands,function(e,i){for(var r=e.length,a=[],o=0,s=t[0],u=0;r>0&&s>0&&(u+s+1>i&&(s=Math.max(1,i-u)),a.push(e.substring(r-=s,r+s)),!((u+=s+1)>i));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}):Hh,r=e.currency,a=e.decimal,o=e.numerals?function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(e.numerals):Hh,s=e.percent||"%";function u(e){var t=(e=Dh(e)).fill,n=e.align,u=e.sign,l=e.symbol,c=e.zero,f=e.width,h=e.comma,d=e.precision,p=e.trim,v=e.type;"n"===v?(h=!0,v="g"):Wh[v]||(null==d&&(d=12),p=!0,v="g"),(c||"0"===t&&"="===n)&&(c=!0,t="0",n="=");var g="$"===l?r[0]:"#"===l&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",m="$"===l?r[1]:/[%p]/.test(v)?s:"",y=Wh[v],b=/[defgprs%]/.test(v);function _(e){var r,s,l,_=g,w=m;if("c"===v)w=y(e)+w,e="";else{var x=(e=+e)<0;if(e=y(Math.abs(e),d),p&&(e=Vh(e)),x&&0==+e&&(x=!1),_=(x?"("===u?u:"-":"-"===u||"("===u?"":u)+_,w=("s"===v?Xh[8+zh/3]:"")+w+(x&&"("===u?")":""),b)for(r=-1,s=e.length;++r<s;)if(48>(l=e.charCodeAt(r))||l>57){w=(46===l?a+e.slice(r+1):e.slice(r))+w,e=e.slice(0,r);break}}h&&!c&&(e=i(e,1/0));var k=_.length+e.length+w.length,P=k<f?new Array(f-k+1).join(t):"";switch(h&&c&&(e=i(P+e,P.length?f-w.length:1/0),P=""),n){case"<":e=_+e+w+P;break;case"=":e=_+P+e+w;break;case"^":e=P.slice(0,k=P.length>>1)+_+e+w+P.slice(k);break;default:e=P+_+e+w}return o(e)}return d=null==d?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),_.toString=function(){return e+""},_}return{format:u,formatPrefix:function(e,t){var n=u(((e=Dh(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Rh(t)/3))),r=Math.pow(10,-i),a=Xh[8+i/3];return function(e){return n(r*e)+a}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Uh.format,Uh.formatPrefix;var qh=new Date,Yh=new Date;function Zh(e,t,n,i){function r(t){return e(t=new Date(+t)),t}return r.floor=r,r.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},r.round=function(e){var t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},r.range=function(n,i,a){var o,s=[];if(n=r.ceil(n),a=null==a?1:Math.floor(a),!(n<i&&a>0))return s;do{s.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<i);return s},r.filter=function(n){return Zh(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,i){if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););})},n&&(r.count=function(t,i){return qh.setTime(+t),Yh.setTime(+i),e(qh),e(Yh),Math.floor(n(qh,Yh))},r.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(i?function(t){return i(t)%e==0}:function(t){return r.count(0,t)%e==0}):r:null}),r}var Qh=Zh(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Qh.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Zh(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):Qh:null};Qh.range;var Kh=6e4,$h=6048e5,Jh=Zh(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),ed=(Jh.range,Zh(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},function(e,t){e.setTime(+e+t*Kh)},function(e,t){return(t-e)/Kh},function(e){return e.getMinutes()})),td=(ed.range,Zh(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-e.getMinutes()*Kh)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()})),nd=(td.range,Zh(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kh)/864e5},function(e){return e.getDate()-1})),id=nd;nd.range;function rd(e){return Zh(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kh)/$h})}var ad=rd(0),od=rd(1),sd=rd(2),ud=rd(3),ld=rd(4),cd=rd(5),fd=rd(6),hd=(ad.range,od.range,sd.range,ud.range,ld.range,cd.range,fd.range,Zh(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()})),dd=(hd.range,Zh(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}));dd.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Zh(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var pd=dd,vd=(dd.range,Zh(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Kh)},function(e,t){return(t-e)/Kh},function(e){return e.getUTCMinutes()})),gd=(vd.range,Zh(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()})),md=(gd.range,Zh(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1})),yd=md;md.range;function bd(e){return Zh(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/$h})}var _d=bd(0),wd=bd(1),xd=bd(2),kd=bd(3),Pd=bd(4),Od=bd(5),Ed=bd(6),Td=(_d.range,wd.range,xd.range,kd.range,Pd.range,Od.range,Ed.range,Zh(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()})),Sd=(Td.range,Zh(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}));Sd.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Zh(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var jd=Sd;Sd.range;function Cd(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ad(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ld(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}var Md,Fd,Id,Rd={"-":"",_:" ",0:"0"},Nd=/^\s*\d+/,Dd=/^%/,Bd=/[\\^$*+?|[\]().{}]/g;function zd(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function Ud(e){return e.replace(Bd,"\\$&")}function Vd(e){return new RegExp("^(?:"+e.map(Ud).join("|")+")","i")}function Gd(e){for(var t={},n=-1,i=e.length;++n<i;)t[e[n].toLowerCase()]=n;return t}function Wd(e,t,n){var i=Nd.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Hd(e,t,n){var i=Nd.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function Xd(e,t,n){var i=Nd.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function qd(e,t,n){var i=Nd.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function Yd(e,t,n){var i=Nd.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function Zd(e,t,n){var i=Nd.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Qd(e,t,n){var i=Nd.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Kd(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function $d(e,t,n){var i=Nd.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function Jd(e,t,n){var i=Nd.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function ep(e,t,n){var i=Nd.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function tp(e,t,n){var i=Nd.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function np(e,t,n){var i=Nd.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function ip(e,t,n){var i=Nd.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function rp(e,t,n){var i=Nd.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function ap(e,t,n){var i=Nd.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function op(e,t,n){var i=Dd.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function sp(e,t,n){var i=Nd.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function up(e,t,n){var i=Nd.exec(t.slice(n));return i?(e.Q=1e3*+i[0],n+i[0].length):-1}function lp(e,t){return zd(e.getDate(),t,2)}function cp(e,t){return zd(e.getHours(),t,2)}function fp(e,t){return zd(e.getHours()%12||12,t,2)}function hp(e,t){return zd(1+id.count(pd(e),e),t,3)}function dp(e,t){return zd(e.getMilliseconds(),t,3)}function pp(e,t){return dp(e,t)+"000"}function vp(e,t){return zd(e.getMonth()+1,t,2)}function gp(e,t){return zd(e.getMinutes(),t,2)}function mp(e,t){return zd(e.getSeconds(),t,2)}function yp(e){var t=e.getDay();return 0===t?7:t}function bp(e,t){return zd(ad.count(pd(e),e),t,2)}function _p(e,t){var n=e.getDay();return e=n>=4||0===n?ld(e):ld.ceil(e),zd(ld.count(pd(e),e)+(4===pd(e).getDay()),t,2)}function wp(e){return e.getDay()}function xp(e,t){return zd(od.count(pd(e),e),t,2)}function kp(e,t){return zd(e.getFullYear()%100,t,2)}function Pp(e,t){return zd(e.getFullYear()%1e4,t,4)}function Op(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+zd(t/60|0,"0",2)+zd(t%60,"0",2)}function Ep(e,t){return zd(e.getUTCDate(),t,2)}function Tp(e,t){return zd(e.getUTCHours(),t,2)}function Sp(e,t){return zd(e.getUTCHours()%12||12,t,2)}function jp(e,t){return zd(1+yd.count(jd(e),e),t,3)}function Cp(e,t){return zd(e.getUTCMilliseconds(),t,3)}function Ap(e,t){return Cp(e,t)+"000"}function Lp(e,t){return zd(e.getUTCMonth()+1,t,2)}function Mp(e,t){return zd(e.getUTCMinutes(),t,2)}function Fp(e,t){return zd(e.getUTCSeconds(),t,2)}function Ip(e){var t=e.getUTCDay();return 0===t?7:t}function Rp(e,t){return zd(_d.count(jd(e),e),t,2)}function Np(e,t){var n=e.getUTCDay();return e=n>=4||0===n?Pd(e):Pd.ceil(e),zd(Pd.count(jd(e),e)+(4===jd(e).getUTCDay()),t,2)}function Dp(e){return e.getUTCDay()}function Bp(e,t){return zd(wd.count(jd(e),e),t,2)}function zp(e,t){return zd(e.getUTCFullYear()%100,t,2)}function Up(e,t){return zd(e.getUTCFullYear()%1e4,t,4)}function Vp(){return"+0000"}function Gp(){return"%"}function Wp(e){return+e}function Hp(e){return Math.floor(+e/1e3)}!function(e){Md=function(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,o=e.shortDays,s=e.months,u=e.shortMonths,l=Vd(r),c=Gd(r),f=Vd(a),h=Gd(a),d=Vd(o),p=Gd(o),v=Vd(s),g=Gd(s),m=Vd(u),y=Gd(u),b={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:lp,e:lp,f:pp,H:cp,I:fp,j:hp,L:dp,m:vp,M:gp,p:function(e){return r[+(e.getHours()>=12)]},Q:Wp,s:Hp,S:mp,u:yp,U:bp,V:_p,w:wp,W:xp,x:null,X:null,y:kp,Y:Pp,Z:Op,"%":Gp},_={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Ep,e:Ep,f:Ap,H:Tp,I:Sp,j:jp,L:Cp,m:Lp,M:Mp,p:function(e){return r[+(e.getUTCHours()>=12)]},Q:Wp,s:Hp,S:Fp,u:Ip,U:Rp,V:Np,w:Dp,W:Bp,x:null,X:null,y:zp,Y:Up,Z:Vp,"%":Gp},w={a:function(e,t,n){var i=d.exec(t.slice(n));return i?(e.w=p[i[0].toLowerCase()],n+i[0].length):-1},A:function(e,t,n){var i=f.exec(t.slice(n));return i?(e.w=h[i[0].toLowerCase()],n+i[0].length):-1},b:function(e,t,n){var i=m.exec(t.slice(n));return i?(e.m=y[i[0].toLowerCase()],n+i[0].length):-1},B:function(e,t,n){var i=v.exec(t.slice(n));return i?(e.m=g[i[0].toLowerCase()],n+i[0].length):-1},c:function(e,n,i){return P(e,t,n,i)},d:Jd,e:Jd,f:ap,H:tp,I:tp,j:ep,L:rp,m:$d,M:np,p:function(e,t,n){var i=l.exec(t.slice(n));return i?(e.p=c[i[0].toLowerCase()],n+i[0].length):-1},Q:sp,s:up,S:ip,u:Hd,U:Xd,V:qd,w:Wd,W:Yd,x:function(e,t,i){return P(e,n,t,i)},X:function(e,t,n){return P(e,i,t,n)},y:Qd,Y:Zd,Z:Kd,"%":op};function x(e,t){return function(n){var i,r,a,o=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(r=Rd[i=e.charAt(++s)])?i=e.charAt(++s):r="e"===i?" ":"0",(a=t[i])&&(i=a(n,r)),o.push(i),u=s+1);return o.push(e.slice(u,s)),o.join("")}}function k(e,t){return function(n){var i,r,a=Ld(1900);if(P(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("p"in a&&(a.H=a.H%12+12*a.p),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(r=(i=Ad(Ld(a.y))).getUTCDay(),i=r>4||0===r?wd.ceil(i):wd(i),i=yd.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(r=(i=t(Ld(a.y))).getDay(),i=r>4||0===r?od.ceil(i):od(i),i=id.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),r="Z"in a?Ad(Ld(a.y)).getUTCDay():t(Ld(a.y)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(r+5)%7:a.w+7*a.U-(r+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Ad(a)):t(a)}}function P(e,t,n,i){for(var r,a,o=0,s=t.length,u=n.length;o<s;){if(i>=u)return-1;if(37===(r=t.charCodeAt(o++))){if(r=t.charAt(o++),!(a=w[r in Rd?t.charAt(o++):r])||(i=a(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return b.x=x(n,b),b.X=x(i,b),b.c=x(t,b),_.x=x(n,_),_.X=x(i,_),_.c=x(t,_),{format:function(e){var t=x(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",Cd);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",_);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e,Ad);return t.toString=function(){return e},t}}}(e),Md.format,Md.parse,Fd=Md.utcFormat,Id=Md.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||Fd("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||Id("%Y-%m-%dT%H:%M:%S.%LZ");var Xp=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})};Xp("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Xp("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Xp("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Xp("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Fh(hh(300,.5,0),hh(-240,.5,1)),Fh(hh(-100,.75,.35),hh(80,1.5,.8)),Fh(hh(260,.75,.35),hh(80,1.5,.8)),hh();function qp(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}qp(Xp("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),qp(Xp("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),qp(Xp("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),qp(Xp("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));n.d(t,"COLOR_SCALE",function(){return Zp}),n.d(t,"App",function(){return Kp}),n.d(t,"renderToDOM",function(){return $p});const Yp="flows_total.geojson",Zp=function e(){var t=[.5],n=[0,1],i=1;function r(e){if(e<=e)return n[tf(t,e,0,i)]}return r.domain=function(e){return arguments.length?(t=ff.call(e),i=Math.min(t.length,n.length-1),r):t.slice()},r.range=function(e){return arguments.length?(n=ff.call(e),i=Math.min(t.length,n.length-1),r):n.slice()},r.invertExtent=function(e){var i=n.indexOf(e);return[t[i-1],t[i]]},r.copy=function(){return e().domain(t).range(n)},r}().domain([-.6,-.45,-.3,-.15,0,.15,.3,.45,.6,.75,.9,1.05,1.2]).range([[65,182,196],[127,205,187],[199,233,180],[237,248,177],[255,255,204],[255,237,160],[254,217,118],[254,178,76],[253,141,60],[252,78,42],[227,26,28],[189,0,38],[128,0,38]]),Qp={latitude:0,longitude:0,zoom:2,maxZoom:4,minZoom:2,pitch:45,bearing:0};class Kp extends i.Component{constructor(e){super(e),this.state={hoveredObject:null},this._onHover=this._onHover.bind(this),this._renderTooltip=this._renderTooltip.bind(this)}_onHover({x:e,y:t,object:n}){this.setState({x:e,y:t,hoveredObject:n})}_renderLayers(){const{data:e=Yp}=this.props;return[new Fu({id:"geojson",data:e,opacity:.8,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:e=>500*Math.sqrt(e.properties.OUT),getFillColor:e=>Zp(e.properties.OUT/1e6),getLineColor:[255,255,255],pickable:!0,onHover:this._onHover})]}_renderTooltip(){const{x:e,y:t,hoveredObject:n}=this.state;return n&&r.a.createElement("div",{className:"tooltip",style:{top:t,left:e}},r.a.createElement("div",null,n.properties.NAME,":  ",n.properties.OUT.toLocaleString("en-US")," refugees"))}render(){return r.a.createElement(Qc,{layers:this._renderLayers(),initialViewState:Qp,controller:!0},this._renderTooltip)}}function $p(e){Object(a.render)(r.a.createElement(Kp,null),e)}}]);