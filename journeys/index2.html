<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>Desperate Journey</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<link rel="shortcut icon" href="assets/img/nglogo.png" type="image/x-icon">
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.0/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.0/mapbox-gl.css' rel='stylesheet' />
<link href="https://fonts.googleapis.com/css?family=Buenard|Lustria|Vollkorn&amp;display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed&display=swap" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="  crossorigin="anonymous"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css" rel="stylesheet">
<script src="../tweets/js/utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
<script src="../js/chart.js"></script>
<script src="../js/Chart.PieceLabel.min.js"></script>

<style>
html {
    -moz-osx-font-smoothing: grayscale;
    -webkit-font-smoothing: antialiased;
    font-smoothing: antialiased;
    font-weight: 400;
    background-color:rgba(82, 87, 96,0.7);
    }

    @-moz-document url-prefix() {
        body {
            font-weight: lighter !important;
        }
    }

body { 
    margin:0; 
    padding:0; 
    font-family: 'Roboto Condensed', sans-serif;
    font-size: 1.3rem;
    }
h1 {
    padding:  25px 10px 0px 0px;
    font-size: 42px;
    font-family: 'Roboto Condensed', sans-serif;
    font-variant: small-caps;
    border: none;
    margin: auto;
    margin-bottom: 15px;
    text-decoration: none;
    text-align: center;
    font-weight:400;
    
}
h2 {
    padding:  25px 10px 0px 0px;
    font-size: 24px;
    font-family: 'Roboto Condensed', sans-serif;
    font-variant: small-caps;
    border: none;
    margin: auto;
    margin-bottom: 15px;
    text-decoration: none;
    text-align: center;
    font-weight:400;
    
}
h3 { 
    padding:  1px 0px 0px 0px;
    font-family: 'Roboto Condensed', sans-serif;
    font-variant: small-caps;
    border: none;
    margin: auto;
    margin-bottom: 15px;
    text-decoration: none;
    text-align: center;
    font-weight:400;
    font-size: 1.3rem;
}
h4 {
    text-align: center;
}
h5 {
    /* text-align: center; */
    font-weight:400;
}
#written {
    text-align: center;
    font-weight:400;
}
img {
    width: 90%;
    
    background-color: #fafafa;
    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2), 0 6px 2px 0 rgba(0, 0, 0, 0.2);
    display: block;
    margin-left: auto;
    margin-right: auto;
  
}
#map { 
    top:0; 
    bottom:0;  
    position: fixed;
    width:60%;
    }
#features {
    width: 40%;
    margin-left: 60%;
    font-family: 'Roboto Condensed', sans-serif;
    overflow-y: none;
    /* background-color:rgba(82, 87, 96,0.7); */
    color:white;
    }
small{
    padding: 10%;
    text-align: center;
}
section {
    padding:  150px 50px 25px 50px;
    /* line-height: 25px;
    border-bottom: 1px solid #ddd; */
    opacity: 0.25;
    font-size: 13px;
    overflow-y: none;
    }
section#intro {
    padding:  30px 50px 25px 50px;
    opacity: 1;
    }
section#final {
    padding:  150px 50px 250px 50px;
    opacity: 1;
    }
section.active {
    opacity: 1;
    }
section:last-child {
    border-bottom: none;
    margin-bottom: 200px;
    }
.right {
  text-align: right;
}
#updated{
    color:lightgray
}
#pop{
    color:lightgray
}
#updated_sea{
    color:lightblue
}
#pop_sea{
    color:lightblue
}
#updated_land{
    color:lightgreen
}
#pop_land{
    color:lightgreen
}
#updated_dead{
    color:darksalmon
}
#pop_dead{
    color:darksalmon
}
iframe {
    height: 1200px;
    font-family: 'Roboto Condensed', sans-serif;
    overflow-y: none;
    }
iframe.mahama {
    height: 500px;
    font-family: 'Roboto Condensed', sans-serif;
    overflow-y: none;
    display: block;
  margin-left: auto;
  margin-right: auto;
  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2), 0 6px 2px 0 rgba(0, 0, 0, 0.2);
    }

/* Mapbox Popup */
.mapboxgl-popup {
  max-width: 400px;
          
  }

.mapboxgl-popup-content {
    text-align: center;
    font-family: 'Roboto Condensed', sans-serif;
    color: rgb(255, 136, 0);
    box-shadow: 3px 3px 2px rgb(255, 255, 255, 0);
    text-shadow: rgba(0, 0, 0, 0.95) 0px 0px 6px; 
    background-color: hsl(0, 100%, 50%,0);
    top: -1px;
    left: 12px;
    }
    .mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip,
        .mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,
        .mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip {
            border-top-color: rgb(255, 0, 0, 0);
    }
a {
    color: silver;
}
p{
    font-size: 1rem;
}
.mapboxgl-popup-close-button {
    opacity:0;
}
.mapboxgl-popup-tip {
  opacity:0;
}
</style>
</head>
<body> 
<div id='map'></div>
<div id='info'></div>
<div id='features'>
    <h1>A desperate journey towards the Mediterranean <br>facing torture, starvation and arbitrary detention</h1>   
    <h3>After 15 months of beatings and abuse in captivity by Libyan traffickers<br> a Somali mother rejoins her teenage sons in Niamey.</h3><div id="written"><h5>
            &nbsp;&nbsp;&nbsp;&nbsp;Written by: Louise Donovan (<a href="https://www.unhcr.org/news/stories/2018/4/5acc80524/somali-torture-survivor-reunited-sons-niger.html#" target="_blank">Read the original article</a>)   
    </h5></div><br><br>
    <img src="https://www.unhcr.org/thumb4/5acccfaf4.jpg" width="100%"></img><p><small>Amina, Ahmed and Mohamed in Niamey. &copy;UNHCR</small></p>
<section id='intro' class='active'>
<p>” When I arrived in Libya, I was walking, nobody had to help me … but look at me now,” she says, holding up her badly broken arms in despair, her legs paralyzed.</p>
<p>
    Somali mother of two Amina* was strong and vigorous before she fell into the hands of Libyan traffickers. After more than a year of relentless beatings and electric shocks, she is now broken and unable to walk.</p>
        
    <h5>* Refugees’ names have been changed for protection reasons.</h5>


</section>
<section id='sudan'>
<h3>Amina, Ahmed and Mohamed</h3>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/2017_10_15_VBIED-8_%2837666124646%29.jpg/800px-2017_10_15_VBIED-8_%2837666124646%29.jpg" width="100%"></img><p><small>A building bombed by the militant group al Shabaab in  Mogadishu (October 2017, &copy; Wikimedia)</small></p><p>Her ordeal began in 2015 when her home in the capital, Mogadishu, was destroyed by a bomb that killed her husband and brother.</p>
<p>Without access to education and with limited resources, her sons Ahmed and Mohamed, aged 13 and 14 at the time, were in danger of forced recruitment by the armed group Al-Shabab, like so many boys their age.</p>
<p>With few options, the brothers set out in secret with a female cousin in 2016 on a quest for safety that would take them to Yemen, Sudan and then Libya.</p>
<p>
    Once Amina learned they had left, she set out for war-ravaged Yemen to try to find the boys. She eventually caught up with them five months later in Sudan, but little did they know what lay ahead of them in Libya.</p>

<br><br><br>
</section>
<section id='libya'>
<h3>Lybia</h3>
<p>After initially negotiating with traffickers, they set off north over the Sahara, with little or no water or food for days, in unyielding heat. Amina grew weak and the traffickers wanted to abandon her in the desert, but her sons refused to leave her.</p>


<img src="https://www.nationalgeographic.com/content/dam/magazine/rights-exempt/2019/07/niger/niger-migration-convoy-desert-migrants-libya.jpg" width="100%"></img><p><small>Migrant convoy in the Sahara desert. Photo: <a href="https://www.nationalgeographic.com/content/dam/magazine/rights-exempt/2019/07/niger/niger-migration-convoy-desert-migrants-libya.jpg" target="_blank">&copy;NatGeo</a> </small></p>
<p>When they reached the western Libyan city of Bani Walid, the real horror began. The traffickers demanded US$10,000 for each of the four family members. Amina did not have the means to pay, or family to ask for help.</p>   
</section>
<section id='bani_walid'>
<h3>BANI WALID</h3>

<p>“They tortured me so badly. I begged them not to torture my family,” says Amina, who volunteered to take all the abuse to spare her sons and niece.</p><br>
<p>
    <img src="https://global.unitednations.entermediadb.net/assets/mediadb/services/module/asset/downloads/preset/assets/2019/02/UN052682.jpg/image1170x530cropped.jpg" width="100%"></img></p><p><small>A migrant rests his hand on a gate inside a detention centre (Libya, 2017). Photo: <a href="https://www.infomigrants.net/en/post/4513/85-percent-of-migrants-tortured-in-libya-doctors-for-human-rights" target="_blank">&copy;UNICEF/Romenzi</a> </small></p><p>
<p>
    After seven months her body began to shut down from the abuse. She could no longer stand and her hands did not function. So the smugglers began torturing the children.</p><br>
</section>
<section id='coast'>
<h3>TO THE COAST</h3>
<p>After 15 months in captivity, Amina was on the brink of death. The smugglers did not want to deal with a corpse and realized that they would not get the money they demanded, so they finally let them go. </p>
<p>
    <img src="https://scd.infomigrants.net/media/resize/my_image_big/2f587720b83c1365c9fe63735306628dc6853aff.jpeg" width="100%"></img></p><p><small>Migrants at a detention centre in northern Libya. Photo: <a href="https://www.infomigrants.net/en/post/4513/85-percent-of-migrants-tortured-in-libya-doctors-for-human-rights" target="_blank">&copy;Zuhair Abusrewil</a> </small></p><p>
    “He knew I would die, and he didn’t want that, so he finally let us go,” recalls Amina. Another niece was also held captive in the same location, so the whole family left together. All five were transported to the coast as part of a larger group. They were among the lucky ones.</p>
</section>
<section id='sea'>
<h3> ON THE SEA</h3>
<p>They were herded on to an inflatable boat bound for Europe. They knew it was overloaded, with more than 100 people, but were powerless and unable to get away. Panic hit several hours later, when the boat began to sink. However a Libyan Coast Guard vessel brought them back to the coast.</p>
<p>
    <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Inflatable_boat_carrying_migrants_approaching_USS_Carney_%28DDG-64%29_in_the_Mediterranean_160729-N-EU999-004.jpg" width="100%"></img></p><p><small>Inflatable boat carrying migrants in the Mediterranean. Photo: <a href="https://commons.wikimedia.org/wiki/File:Inflatable_boat_carrying_migrants_approaching_USS_Carney_(DDG-64)_in_the_Mediterranean_160729-N-EU999-004.jpg" target="_blank">Wikimedia</a> </small></p><p>
        At the harbour, UNHCR, the UN Refugee Agency, was waiting for them. Amina was in a critical state and was rushed to hospital. Authorities took the boys and their cousins to a detention centre, where UNHCR informed them they would be flown to Niger.</p>


</section>
<section id='niamey'>
<h3>A NEW LIFE</h3>
<p> The move was arranged through UNHCR’s Emergency Evacuation Transit Mechanism (ETM), which was established in November 2017. So far, 1,020 of the most vulnerable refugees – like Amina and her family – have been evacuated to Niger on a temporary basis, while long-term solutions are sought for them, including resettlement.</p>
<p>
    The boys were first to be offered evacuation. “We were very anxious, from the minute we landed in Niger, we kept asking about our mother – whether she was alive, when she would be joining us,” says Mohamed. To their relief, UNHCR succeeded in flying Amina and her niece to Niger the following week.</p>
<img src="https://www.unhcr.org/thumb1/5accd0083.jpg" width="100%"></img>
<p><small>Amina sits with her nieces after being evacuated to Niger by UNHCR.  (<a href="https://www.unhcr.org/news/stories/2018/4/5acc80524/somali-torture-survivor-reunited-sons-niger.html" target="_blank">&copy;UNHCR/Louise Donovan</a>)</small></p>
<p>
    Amina begins to cry again, but this time from happiness. “Everything changed in a minute. I was so happy. Instead of feeling depressed, I felt blessed,” she recalls.
</p>
<p class="right">
    Written by: Louise Donovan in Niamey, Niger (<a href="https://www.unhcr.org/news/stories/2018/4/5acc80524/somali-torture-survivor-reunited-sons-niger.html" target="_blank">Read the original article</a>)   
</p><br><br>
</section>
<section id='final'>
<h3>DESPERATE JOURNEYS</h3>
<p>
    Persecution, conflicts and human rights violations continue to force people to flee their homes and seek safety in Europe. Many risk their lives and face a treacherous journey.
</p>

<p>
    This movement towards Europe continues to take a devastating toll on human life. Since the beginning of 2014, over 17,000 people are believed to have died or gone missing while crossing the Mediterranean Sea to reach Europe, with reports of many others perishing en route. These risks do not end once in Europe. Those moving onwards irregularly have reported numerous types of abuse, including being pushed back across borders.
</p>
<p>
    More information on the situation in the Mediterranean <a href='https://data2.unhcr.org/en/situations/mediterranean' target="_blank">here</a>
</p><br><hr style="height:1px; border:none; color:rgb(141, 141, 141); background-color:rgb(116, 116, 116);">
    <p>
    <h3>Mediterranean Arrivals by sea or land in 2019*</h3>
    </p>
<p>
    
    <h3 style="display: inline-block; color:lightgray"><i class="fas fa-users"></i> Total Arrivals: </h3>&nbsp;<h3 id="pop" style="display: inline-block;">N/A</h3>
        <h5 style="display: inline-block; color:lightgray">-- Last updated: </h5>&nbsp;<h5 id="updated" style="display: inline-block;">null</h5>
<br>
        <h3 style="display: inline-block; color:lightblue"><i class="fas fa-water"></i> Sea Arrivals: </h3>&nbsp;<h3 id="pop_sea" style="display: inline-block;">N/A</h3>
        <h5 style="display: inline-block; color:lightblue">-- Last updated: </h5>&nbsp;<h5 id="updated_sea" style="display: inline-block;">null</h5>
        <br>
        <h3 style="display: inline-block; color:lightgreen"><i class="fas fa-walking"></i> Land Arrivals: </h3>&nbsp;<h3 id="pop_land" style="display: inline-block;">N/A</h3>
        <h5 style="display: inline-block; color:lightgreen">-- Last updated: </h5>&nbsp;<h5 id="updated_land" style="display: inline-block;">null</h5>
        <br>
        <h3 style="display: inline-block; color:darksalmon"><i class="fas fa-user-alt-slash"></i> Dead and Missing: </h3>&nbsp;<h3 id="pop_dead" style="display: inline-block;">N/A</h3>
        <h5 style="display: inline-block; color:darksalmon">-- Last updated: </h5>&nbsp;<h5 id="updated_dead" style="display: inline-block;">null</h5>
       
        <h5>* Includes Refugees arrived to Italy, Greece, Spain, Cyprus and Malta</h5>
</p><hr style="height:1px; border:none; color:rgb(141, 141, 141); background-color:rgb(116, 116, 116);">
<p>
        <h2>Demography of Mediterranean sea arrivals</h2>
        </p><br>
<p>    <div id="mycanvas">
        <canvas id="canvas2" width="600" height="300" ></canvas>
       </div>
</p>
</section>
</div>
<script>
    window.onload = function(){
    $.getJSON("https://data2.unhcr.org/api/population/get?widget_id=131172&sv_id=11&population_group=4797%2C4798&year=latest", function() {
        
    }).then(function(data) {

        var population = (Number(data.data[0].individuals)).toLocaleString()
        var update = (data.data[0].date)
       
    document.getElementById('pop').innerHTML = population;
    document.getElementById('updated').innerHTML = update;
     })
     $.getJSON("https://data2.unhcr.org/api/population/get?widget_id=131173&sv_id=11&population_group=4797&year=latest", function() {
        
    }).then(function(data) {

        var population = (Number(data.data[0].individuals)).toLocaleString()
        var update = (data.data[0].date)
       
    document.getElementById('pop_sea').innerHTML = population;
    document.getElementById('updated_sea').innerHTML = update;
     })
     $.getJSON("https://data2.unhcr.org/api/population/get?widget_id=131174&sv_id=11&population_group=4798&year=latest", function() {
        
    }).then(function(data) {

        var population = (Number(data.data[0].individuals)).toLocaleString()
        var update = (data.data[0].date)
       
    document.getElementById('pop_land').innerHTML = population;
    document.getElementById('updated_land').innerHTML = update;
     })

     $.getJSON("https://data2.unhcr.org/api/population/get?widget_id=131175&sv_id=11&population_group=4801", function() {
        
    }).then(function(data) {

        var population = (Number(data.data[0].individuals)).toLocaleString()
        var update = (data.data[0].date)
       
    document.getElementById('pop_dead').innerHTML = population;
    document.getElementById('updated_dead').innerHTML = update;
     })
    };
</script>
<script>
    Chart.defaults.global.defaultFontFamily = "Roboto Condensed";
var randomScalingFactor = function() {
  return Math.round(Math.random() * 100);
};
var randomColorFactor = function() {
  return Math.round(Math.random() * 255);
};
var randomColor = function(opacity) {
  return 'rgba(' + randomColorFactor() + ',' + randomColorFactor() + ',' + randomColorFactor() + ',' + (opacity || '.3') + ')';
};

var config = {
  type: 'doughnut',
  data: {
    datasets: [{
      data: [
        18366,
        6072,
        8514,
        387
      ],
      backgroundColor: [
        
        "#46BFBD",
        "#E9967A",
        "#FDB45C",
        "#FAFAD2"
      ],
      label: 'Demographic breakdown'
    }],
    labels: [
      "Male: 18,366",
      "Female: 6,072",
      "Children: 8,514",
      "Unaccompanied Children: 387"
    ]
  },
  options: {
    responsive: true,
    legend: {
      position: 'bottom',
      labels: {
                // This more specific font property overrides the global property
                fontColor: 'white'
            }
    },
    title: {
      display: false,
      text: 'Demographic breakdown'
    },
    animation: {
      animateScale: true,
      animateRotate: true
    },
    tooltips: {
      callbacks: {
        label: function(tooltipItem, data) {
        	var dataset = data.datasets[tooltipItem.datasetIndex];
          var total = dataset.data.reduce(function(previousValue, currentValue, currentIndex, array) {
            return previousValue + currentValue;
          });
          var currentValue = dataset.data[tooltipItem.index];
          var percentage = Math.floor(((currentValue/total) * 100)+0.5);         
          return percentage + "%";
        }
      }
    }
  }
};


var ctx = document.getElementById("canvas2").getContext("2d");
window.myDoughnut = new Chart(ctx, config); {

}

    </script> 
<script>
 
var map = new mapboxgl.Map({
container: 'map', // container id
interactive: false,
style: {
    "version": 8,
    "sources": {
    "raster-tiles": {
    "type": "raster",
    "tiles": ["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.png"], //["https://basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png"]
    "tileSize": 256,
    "attribution": '&copy; ESRI'
    }
    },
    "layers": [{
    "id": "simple-tiles",
    "type": "raster",
    "source": "raster-tiles",
    "minzoom": 0,
    "maxzoom": 22,
    
}],
// "glyphs": "http://fonts.openmaptiles.org/{fontstack}/{range}.pbf"
},
center: [45.36, 2.07], // starting position
zoom: 5 // starting zoom
});

var popup = new mapboxgl.Popup({
        closeButton: false,
        closeOnClick: false
    });

    map.on('mousemove', 'deaths', function (e) {
        map.getCanvas().style.cursor = 'pointer';
        var feature = e.features[0];
        var population = '<div style="font-size: 1.3rem; color:orange;text-shadow: 1px 1px #1e1e1e"><b>' + e.features[0].properties.name + ':  </b>' + e.features[0].properties.deaths.toLocaleString() + ' deaths ';
        popup.setLngLat(e.lngLat)
            .setHTML(population)
            .addTo(map);
    });

    map.on('mouseleave', 'deaths', function () {
        map.getCanvas().style.cursor = '';
        popup.remove();
    });

var popupOffsets = {
 'top': [-60, -50],
 
 };
var mogadishu = new mapboxgl.Popup({closeOnClick: false})
.setLngLat([45.36, 2.07])
.setHTML('<h2>MOGADISHU</h2>')
.addTo(map);

var aden = new mapboxgl.Popup({closeOnClick: false})
.setLngLat([44.986412598590057, 12.781800124126674])
.setHTML('<h2>Aden</h2>')
.addTo(map);

var port_sudan = new mapboxgl.Popup({closeOnClick: false})
.setLngLat([37.214767384607718, 19.615887653007899])
.setHTML('<h2>Port Sudan</h2>')
.addTo(map);

var misrata = new mapboxgl.Popup({offset: popupOffsets})
.setLngLat([15.213699766358497, 32.359377671231229])
.setHTML('<h2>Misrata</h2>')
.addTo(map);

var tripoli = new mapboxgl.Popup({offset: popupOffsets})
.setLngLat([13.20277798547685, 32.89380700614813])
.setHTML('<h2>TRIPOLI</h2>')
.addTo(map);

var niamey = new mapboxgl.Popup({closeOnClick: false})
.setLngLat([2.104412070080809, 13.513824568420711])
.setHTML('<h2>NIAMEY</h2>')
.addTo(map);

var bani_walid = new mapboxgl.Popup({offset: popupOffsets})
.setLngLat([14.004865992126325, 31.750214309278885])
.setHTML('<h2>Bani Walid</h2>')
.addTo(map);

var chapters = {
'intro': {
bearing: 0,
pitch: 0,
center: [ 45.36, 2.07],
zoom:5,
},
'sudan': {
duration: 3000,
center: [ 45, 8],
bearing: 280,
zoom: 5.5,
pitch: 57
},
'libya': {
duration: 3000,
bearing: 350,
center: [ 25.2, 23],
zoom: 5.6,
speed: 0.6,
pitch: 47
},
'bani_walid': {
duration: 4000,
bearing: 0,
center: [ 14, 31.75],
zoom: 8.5,
pitch: 20
},
'coast': {
duration: 2000,
bearing: 0,
center: [14.55, 31.9],
zoom: 8.6,
pitch: 0,
speed: 0.5
},
'sea': {
duration: 3000,
bearing: 330,
center: [14.5, 32.9],
zoom: 8.7,
pitch: 95,
speed: 0.5
},
'niamey': {
duration: 5000,
bearing: 0,
center: [3.5, 23],
zoom: 5,
pitch: 45
},
'final': {
duration: 5000,
bearing: 10,
center: [15, 38.5],
zoom: 5.8,
pitch: 80
}
};
 
// On every scroll event, check which element is on screen
window.onscroll = function() {
var chapterNames = Object.keys(chapters);
for (var i = 0; i < chapterNames.length; i++) {
var chapterName = chapterNames[i];
if (isElementOnScreen(chapterName)) {
setActiveChapter(chapterName);
break;
}
}
};
 
var activeChapterName = 'intro';
function setActiveChapter(chapterName) {
if (chapterName === activeChapterName) return;
 
map.flyTo(chapters[chapterName]);
 
document.getElementById(chapterName).setAttribute('class', 'active');
document.getElementById(activeChapterName).setAttribute('class', '');
 
activeChapterName = chapterName;
}
 
function isElementOnScreen(id) {
var element = document.getElementById(id);
var bounds = element.getBoundingClientRect();
return bounds.top < window.innerHeight && bounds.bottom > 0;
}

map.on('load', function() {
    map.addSource('satellite',{
        'type': 'raster',
        'tiles': ['https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.png'],
        'tileSize': 150
    })

    map.addLayer({
            'id': 'satellite',
            'type': 'raster',
            'source': 'satellite',
            'paint': {
            'raster-opacity': 0},
            'minzoom': 1,
            'maxzoom': 16
        })

        map.addSource("somalia", {
            type: "geojson",
            data: 'assets/data/somalia.geojson'
        })

        map.addLayer({
            'id': 'somalia',
            'type': 'fill',
            'source': 'somalia',
            'layout': {
            },
            'paint': {
            'fill-color': '#ff0000',
            
            'fill-opacity': .3},
            'minzoom': 1,
            'maxzoom': 8.5
        });
        map.addSource("africa", {
            type: "geojson",
            data: 'assets/data/africa.geojson'
        })
        map.addLayer({
            'id': 'africa',
            'type': 'line',
            'source': 'africa',
            'layout': {
            'line-cap': 'round',
            'line-join': 'round'
            },
            'paint': {
            'line-color': '#1f1f1f',
            "line-dasharray": [1, 3],
            'line-width': 2,
            'line-opacity': .5},
            'minzoom': 4,
            'maxzoom': 9
        });
    map.addSource("route4", {
            type: "geojson",
            data: 'assets/data/route4.geojson'
        })
        map.addLayer({
            'id': 'route4-shadow',
            'type': 'line',
            'source': 'route4',
            'layout': {
            'line-cap': 'round',
            'line-join': 'round'
            },
            'paint': {
            'line-color': '#404040',
            'line-width': 10,
            "line-blur": 20,
            'line-opacity': .8},
            'minzoom':5.1,
            'maxzoom': 9.5
        });
        map.addLayer({
            'id': 'route',
            'type': 'line',
            'source': 'route4',
            'layout': {
                'visibility': 'visible',
                'line-cap': 'round',
                'line-join': 'round'
            },
            'paint': {
            'line-color': '#ff0000',
            'line-width': 3,
            'line-opacity': .8},
            'minzoom': 5.1,
            'maxzoom': 9.5
        });

    
    map.addSource("route5", {
            type: "geojson",
            data: 'assets/data/route5.geojson'
        })
        map.addLayer({
            'id': 'route5-shadow',
            'type': 'line',
            'source': 'route5',
            'layout': {
            'line-cap': 'round',
            'line-join': 'round'
            },
            'paint': {
            'line-color': '#404040',
            'line-width': 10,
            "line-blur": 20,
            'line-opacity': .8},
            'minzoom':5.6,
            'maxzoom':9.5
        });
        map.addLayer({
            'id': 'route5',
            'type': 'line',
            'source': 'route5',
            'layout': {
            'line-cap': 'round',
            'line-join': 'round'
            },
            'paint': {
            'line-color': '#ff0000',
            'line-width': 3,
            'line-opacity': .8},
            'minzoom': 5.6,
            'maxzoom': 9.5
        });


    map.addSource("route6", {
            type: "geojson",
            data: 'assets/data/route6.geojson'
        })
        map.addLayer({
            'id': 'route6-shadow',
            'type': 'line',
            'source': 'route6',
            'layout': {
            'line-cap': 'round',
            'line-join': 'round'
            },
            'paint': {
            'line-color': '#404040',
            'line-width': 15,
            "line-blur": 30,
            'line-opacity': .8},
            'minzoom':8.6,
            'maxzoom': 9.5
        });
        map.addLayer({
            'id': 'route6',
            'type': 'line',
            'source': 'route6',
            'layout': {
            'line-cap': 'round',
            'line-join': 'round'
            },
            'paint': {
            'line-color': '#ff0000',
            'line-width': 3,
            'line-opacity': .8},
            'minzoom':8.6,
            'maxzoom': 9.5
        });
        map.addSource("route7a", {
            type: "geojson",
            data: 'assets/data/route7a.geojson'
        })
        map.addLayer({
            'id': 'route7a-shadow',
            'type': 'line',
            'source': 'route7a',
            'layout': {
            'line-cap': 'round',
            'line-join': 'round'
            },
            'paint': {
            'line-color': '#404040',
            'line-width': 15,
            "line-blur": 30,
            'line-opacity': .8},
            'minzoom':8.7,
            'maxzoom': 9.5
        });
        map.addLayer({
            'id': 'route7a',
            'type': 'line',
            'source': 'route7a',
            'layout': {
            'line-cap': 'round',
            'line-join': 'round'
            },
            'paint': {
            'line-color': '#1E90FF',
            'line-width': 3,
            'line-opacity': .8},
            'minzoom':8.7,
            'maxzoom': 9.5
        });


        map.addSource("route7b", {
            type: "geojson",
            data: 'assets/data/route7b.geojson'
        })
        map.addLayer({
            'id': 'route7b-shadow',
            'type': 'line',
            'source': 'route7b',
            'layout': {
            'line-cap': 'round',
            'line-join': 'round'
            },
            'paint': {
            'line-color': '#404040',
            'line-width': 15,
            "line-blur": 30,
            'line-opacity': .8},
            'minzoom':8.7,
            'maxzoom': 9.5
        });
        map.addLayer({
            'id': 'route7b',
            'type': 'line',
            'source': 'route7b',
            'layout': {
            'line-cap': 'round',
            'line-join': 'round'
            },
            'paint': {
            'line-color': '#1E90FF',
            'line-width': 5,
            "line-dasharray": [1, 3],
            'line-opacity': .8},
            'minzoom':8.7,
            'maxzoom': 9.5
        });
        map.addSource("route8", {
            type: "geojson",
            data: 'assets/data/route8.geojson'
        })
        map.addLayer({
            'id': 'route8-shadow',
            'type': 'line',
            'source': 'route8',
            'layout': {
            'line-cap': 'round',
            'line-join': 'round'
            },
            'paint': {
            'line-color': '#404040',
            'line-width': 10,
            "line-blur": 30,
            'line-opacity': .9},
            'minzoom':4.9,
            'maxzoom': 5.1
        });
        map.addLayer({
            'id': 'route8',
            'type': 'line',
            'source': 'route8',
            'layout': {
            'line-cap': 'round',
            'line-join': 'round'
            },
            'paint': {
            'line-color': '#FF4500',
            'line-width': 5,
            "line-dasharray": [1, 3],
            'line-opacity': .8},
            'minzoom':4.9,
            'maxzoom': 5.1
        });
        map.addSource("places", {
            type: "geojson",
            data: 'assets/data/places.geojson',
            
            });
            map.loadImage('assets/data/city.png', function (error, image) {
            if (error) throw error;
            map.addImage('city', image);
            map.addLayer({
            "id": "poi-labels",
            "type": "symbol",
            "source": "places",
            "layout": {
            // "text-field": ["get", "name"],
            // "text-variable-anchor": ["top", "bottom", "left", "right"],
            // "text-radial-offset": 0.5,
            // "text-justify": "auto",
            "icon-image": "city",
                    "icon-allow-overlap": true,
                    "icon-size": 0.075,
                    "icon-offset": [0, -250]
            }
            });
        });
        
    map.addSource("bani", {
            type: "geojson",
            data: 'assets/data/bani.geojson'
        })
        map.loadImage('assets/data/prison.png', function (error, image) {
            if (error) throw error;
            map.addImage('prison', image);
            map.addLayer({
                "id": "prison",
                "type": "symbol",
                "source": "bani",
                "layout": {
                    "icon-image": "prison",
                    "icon-allow-overlap": true,
                    "icon-size": 0.13
                },
                'minzoom': 6,
                'maxzoom': 10
            });
            
        });

    map.addSource("flight", {
            type: "geojson",
            data: 'assets/data/flight.geojson'
        })
        map.loadImage('assets/data/airplane.png', function (error, image) {
            if (error) throw error;
            map.addImage('flight', image);
            map.addLayer({
                "id": "flight",
                "type": "symbol",
                "source": "flight",
                "layout": {
                    "icon-image": "flight",
                    "icon-allow-overlap": true,
                    "icon-size": 0.08
                },
                'minzoom': 1,
                'maxzoom': 15.2
            });
            
        });

        map.addSource("sink", {
            type: "geojson",
            data: 'assets/data/sink.geojson'
        })
        map.loadImage('assets/data/boat.png', function (error, image) {
            if (error) throw error;
            map.addImage('sink', image);
            map.addLayer({
                "id": "sink",
                "type": "symbol",
                "source": "sink",
                "layout": {
                    "icon-image": "sink",
                    "icon-allow-overlap": true,
                    "icon-size": 0.12
                },
                'minzoom': 8.7,
                'maxzoom': 9.5
            });
            
        });







        map.addSource("deaths", {
            type: "geojson",
            data: 'assets/data/deaths.geojson'
        })

        map.addLayer({
            'id': 'deaths',
            'type': 'fill-extrusion',
            'source': 'deaths',
            'paint': {
                'fill-extrusion-color': 'red',
                'fill-extrusion-height': ["get", "extrusion"],
                'fill-extrusion-base': 0,
                'fill-extrusion-opacity': 0.7
            },
            'minzoom': 5.7,
            'maxzoom': 5.9
        });

});
map.scrollZoom.disable();
</script> 
</body>
</html>